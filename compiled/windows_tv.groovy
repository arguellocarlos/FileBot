{def _y = "H:/";def Zrf = [home,"D:/","E:/","F:/","G:/","H:/"].collect { it as File }.sort { iz, ea ->  iz.exists() <=> ea.exists() ?: iz.diskSpace <=> ea.diskSpace }.last();def ln = _y ? _y : Zrf;"$ln/"}{def Al = /(CN|JP|KR|KP|TW|HK)/;def bW = /(aeni|donghua|anime)/;def hAb = anime || info.Keywords =~ bW || (genres =~ /Animation/ && country =~ Al) ? true : false;hAb ? "Videos/Anime/" : "Videos/TV Series/"}{def dUC = [[ym: 229743, ZAS: "VTuber Legend"],[ym: 240633, ZAS: "A Journey Through Another World"],[ym: 245285, ZAS: "Failure Frame"],[ym: 237045, ZAS: "Cherry Magic!"],[ym: 68854, ZAS: "From Me to You"],[ym: 271026, ZAS: "Taisho Era Contract Marriage"],[ym: 234538, ZAS: "Demon Lord 2099"]];def Sup = n;dUC.each {if (it.ym == tmdbid && type.toString() != "Movie") {Sup = it.ZAS}};def JCM = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def bCY = Sup.replaceAll(JCM.collect { "\\" + it }.join('|'), '');bCY = bCY.replaceAll(/(\s|\.)*$/, '');bCY}{def OwH = [68854,235973,262295,259140,204098,239779,273190,271026,240125,275695,123542,257162];def iU = OwH.find { bs ->  tmdbid == bs } ?: "";iU ? " ($y) [tmdbid-$iU]" : ""}/{episode.special ? 'Specials' : 'Season '+s}{def JCM = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def bCY = sn.replaceAll(JCM.collect { "\\" + it }.join('|'), '_');def DE = n.replaceAll(JCM.collect { "\\" + it }.join('|'), '_');def OTS = bCY.contains(DE) ? "" : bCY;OTS == 'Season '+ s ? "" : OTS ? " - " + OTS : ""}/{def rp = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def oV = rp.find { RRF ->  fn.contains(RRF) } ?: "";def YQo = any {(fn =~ /^\[(.*?)\]/)[0][1]} {oV} {group} {""};YQo ? "[$YQo] " : ""}{def dUC = [[ym: 229743, ZAS: "VTuber Legend"],[ym: 240633, ZAS: "A Journey Through Another World"],[ym: 245285, ZAS: "Failure Frame"],[ym: 237045, ZAS: "Cherry Magic!"],[ym: 68854, ZAS: "From Me to You"],[ym: 271026, ZAS: "Taisho Era Contract Marriage"],[ym: 234538, ZAS: "Demon Lord 2099"]];def Sup = n;dUC.each {if (it.ym == tmdbid && type.toString() != "Movie") {Sup = it.ZAS}};def JCM = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def bCY = Sup.replaceAll(JCM.collect { "\\" + it }.join('|'), '');bCY = bCY.replaceAll(/(\s|\.)*$/, '');bCY} - {s00e00}{def JCM = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def bCY = t.replaceAll(JCM.collect { "\\" + it }.join('|'), '_');bCY.length() > 100 ? " " : " - $bCY "} [{def vHk = [[jw: "Bilibili.tv", ZX: ["B-Global", "BiliIntl", "BILI"]],[jw: "Prime Video", ZX: ["AMZN"]],[jw: "U-NEXT", ZX: ["UNEXT"]],[jw: "ABEMA", ZX: ["ABEMA"]],[jw: "Hulu", ZX: ["HULU"]],[jw: "Shahid", ZX: ["SHAHID"]],[jw: "YouTube", ZX: ["YT.WEB-DL", "YOUTUBE", "YTB"]],[jw: "Netflix", ZX: ["NF.WEB-DL", "NF WEB"]]];def Wt = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def Qtb = ["Erai-raws", "SubsPlease"];def IE = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def Dp = any {def gKS = vHk.find { lmG ->  lmG.ZX.find { lYL ->  fn.contains(lYL) } }?.ZX.first() ?: "";gKS = gKS.replace(".WEB-DL", "");gKS ? "${gKS}.WEB-DL" : ""} {source} {Wt.find { wI ->  group == wI || IE == wI } ? "WEBRip" : ""} {def sLs = Qtb.find { ddh ->  group == ddh || IE == ddh} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : sLs} {vs} {""};Dp ? "$Dp " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def WP = " Dub";def AGF = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : WP;AGF = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : AGF;AGF}{def hlU = any { audioLanguages.size() } { 0 };def AGF = hlU > 2 ? " MAud" : hlU > 1 ? " DAud" : null;def Tc = hlU > 5 ? audioLanguages.take(5) : audioLanguages;AGF ? AGF + Tc.joining(" ", " (", "").upper() + (hlU > 5 ? " ...)" : ")") : ""}{def OR = any { textLanguages.size() } { 0 };def AGF = OR > 2 ? ", MSub" : OR > 1 ? ", DSub" : null;def Tc = OR > 5 ? textLanguages.take(5) : textLanguages;AGF ? AGF + Tc.joining(" ", " (", "").upper() + (OR > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}