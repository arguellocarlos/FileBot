{def ZRT = "H:/";def dj = [home,"D:/","E:/","F:/","G:/","H:/"].collect { it as File }.sort { oNd, YVJ ->  oNd.exists() <=> YVJ.exists() ?: oNd.diskSpace <=> YVJ.diskSpace }.last();def Vc = ZRT ? ZRT : dj;"$Vc/"}{"Videos/"}{def oQ = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","hentai", "sex", "lgbt", "explicit", "adult animation", "adult content"];def qIb = "TheMovieDB::TV";def ly = [[271026, qIb],[220118, qIb]];def o_W = [[236530, qIb]];def FB = any { info.database } { "IMDb" };def VAC = FB == "IMDb" ? "tt${id}" : id;def cT = any { info.adult } { false };def aC = ly.find { it[0] == VAC && it[1] == FB } != null;def Uj_ = o_W.find { it[0] == VAC && it[1] == FB } != null;def sGd = info.Keywords.findAll { it in oQ } || aC || cT;sGd = Uj_ ? false : sGd;sGd ? "R18+ " : ""}{def ww = ["CN", "JP", "KR", "KP", "TW", "HK"];def hs = ["aeni", "donghua", "anime"];def pYA = any {anime} || info.Keywords.findAll { it in hs } || (ww.contains(country) && genres =~ /Animation/);pYA ? "Anime/" : "TV Series/"}{def qIb = "TheMovieDB::TV";def jX = [[_QN: 68854, BYi: "From Me to You", QfJ: qIb],[_QN: 229743, BYi: "VTuber Legend", QfJ: qIb],[_QN: 234538, BYi: "Demon Lord 2099", QfJ: qIb],[_QN: 237045, BYi: "Cherry Magic!", QfJ: qIb],[_QN: 240633, BYi: "A Journey Through Another World", QfJ: qIb],[_QN: 245285, BYi: "Failure Frame", QfJ: qIb],[_QN: 271026, BYi: "Taisho Era Contract Marriage", QfJ: qIb]];def FB = any { info.database } { "IMDb" };def VAC = FB == "IMDb" ? "tt${id}" : id;def WLe = n;jX.each {if (it._QN == VAC && it.QfJ == FB) {WLe = it.BYi}};def _h = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def i_G = WLe.replaceAll(_h.collect { "\\" + it }.join('|'), '');i_G = i_G.replaceAll(/(\s|\.)*$/, '');i_G}{def qIb = "TheMovieDB::TV";def AJ = [[ 68854, qIb],[123542, qIb],[204098, qIb],[235973, qIb],[239779, qIb],[240125, qIb],[257162, qIb],[259140, qIb],[262295, qIb],[271026, qIb],[273190, qIb],[275695, qIb]];def Tb = AJ.find { it[0] == id && it[1] == info.database } != null;def MUQ = ["TheMovieDB::TV": "tmdbid","AniDB": "anidbid","TheTVDB": "tvdbid","TVmaze": "tvmazeid"];def ogg = MUQ[info.database];Tb ? " ($y) [${ogg}-${id}]" : ""}{"/"}{episode.special ? 'Specials' : 'Season '+s}{def _h = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def i_G = sn.replaceAll(_h.collect { "\\" + it }.join('|'), '_');def SE = n.replaceAll(_h.collect { "\\" + it }.join('|'), '_');def cti = i_G.contains(SE) ? "" : i_G;cti == 'Season '+ s ? "" : cti ? " - " + cti : ""}{"/"}{def IH = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def ziT = IH.find { Ws ->  fn.contains(Ws) } ?: "";def YN = any {(fn =~ /^\[(.*?)\]/)[0][1]} {ziT} {group} {""};YN ? "[$YN] " : ""}{def qIb = "TheMovieDB::TV";def jX = [[_QN: 68854, BYi: "From Me to You", QfJ: qIb],[_QN: 229743, BYi: "VTuber Legend", QfJ: qIb],[_QN: 234538, BYi: "Demon Lord 2099", QfJ: qIb],[_QN: 237045, BYi: "Cherry Magic!", QfJ: qIb],[_QN: 240633, BYi: "A Journey Through Another World", QfJ: qIb],[_QN: 245285, BYi: "Failure Frame", QfJ: qIb],[_QN: 271026, BYi: "Taisho Era Contract Marriage", QfJ: qIb]];def FB = any { info.database } { "IMDb" };def VAC = FB == "IMDb" ? "tt${id}" : id;def WLe = n;jX.each {if (it._QN == VAC && it.QfJ == FB) {WLe = it.BYi}};def _h = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def i_G = WLe.replaceAll(_h.collect { "\\" + it }.join('|'), '');i_G = i_G.replaceAll(/(\s|\.)*$/, '');i_G}{" - "}{s00e00}{def _h = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def i_G = t.replaceAll(_h.collect { "\\" + it }.join('|'), '_');def lbh = any { e } { special };i_G = i_G.length() > 100 ? " " : " - $i_G ";i_G == " - Episode $lbh " ? " " : i_G}{" ["}{def sL = [[_A: "ABEMA", vj: ["ABEMA"]],[_A: "Bilibili.tv", vj: ["B-Global", "BiliIntl", "BILI"]],[_A: "Hulu", vj: ["HULU"]],[_A: "MeWatch", vj: ["MW.WEB-DL"]],[_A: "Netflix", vj: ["NF.WEB-DL", "NF WEB"]],[_A: "Prime Video", vj: ["AMZN"]],[_A: "TVer", vj: ["TVER"]],[_A: "Shahid", vj: ["SHAHID"]],[_A: "U-NEXT", vj: ["UNEXT"]],[_A: "YouTube", vj: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def jCS = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def mx = ["Erai-raws", "SubsPlease"];def DL = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def sC = any {def Hhb = sL.find { eE ->  eE.vj.find { tG ->  fn.contains(tG) } }?.vj.first() ?: "";Hhb = Hhb.replace(".WEB-DL", "");Hhb ? "${Hhb}.WEB-DL" : ""} {source} {jCS.find { OJ ->  group == OJ || DL == OJ } ? "WEBRip" : ""} {def CH = mx.find { ps ->  group == ps || DL == ps} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : CH} {vs} {""};sC ? "$sC " : ""}{def YV = bitdepth ? " ${bitdepth}bit" : "";"$resolution $vcf $YV, $ac"}{" "}{af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0')}{def HHV = " Dub";def SAS = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : HHV;SAS = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : SAS;SAS}{def nQX = any { audioLanguages.size() } { 0 };def SAS = nQX > 2 ? " MAud" : nQX > 1 ? " DAud" : null;def fjv = nQX > 5 ? audioLanguages.take(5) : audioLanguages;SAS ? SAS + fjv.joining(" ", " (", "").upper() + (nQX > 5 ? " ...)" : ")") : ""}{def nPo = any { textLanguages.size() } { 0 };def SAS = nPo > 2 ? ", MSub" : nPo > 1 ? ", DSub" : null;def fjv = nPo > 5 ? textLanguages.take(5) : textLanguages;SAS ? SAS + fjv.joining(" ", " (", "").upper() + (nPo > 5 ? " ...)" : ")") : ""}{"]["}{crc32.upper()}{"]"}{def vE = ["ass", "srt", "ssa", "vtt", "ttml"];def ap = ["name": "." + lang.name,"iso3b": "." + lang.ISO3B,"iso3": "." +lang.ISO3,"iso2": "." + lang.ISO2];def zO = subt;ap.values().each { xPp -> if (zO.contains(xPp)) {zO = zO.replace(xPp, "")}};vE.contains(ext) ? ap.iso3b + zO : ""}{def vE = ["jpg", "jpeg", "png", "bmp"];vE.contains(ext) ? "-thumb" : ""}