{def HM = "H:/";def GuN = [home,"D:/","E:/","F:/","G:/","H:/"].collect { it as File }.sort { Eev, Sx ->  Eev.exists() <=> Sx.exists() ?: Eev.diskSpace <=> Sx.diskSpace }.last();def Fa = HM ? HM : GuN;"$Fa/"}{def sux = /(CN|JP|KR|KP|TW|HK)/;def rLZ = /(aeni|donghua|anime)/;def ewb = anime || info.Keywords =~ rLZ || (genres =~ /Animation/ && country =~ sux) ? true : false;ewb ? "Videos/Anime/" : "Videos/TV Series/"}{def Xm = [[cT: 229743, dlc: "VTuber Legend"],[cT: 240633, dlc: "A Journey Through Another World"],[cT: 245285, dlc: "Failure Frame"],[cT: 237045, dlc: "Cherry Magic!"],[cT: 68854, dlc: "From Me to You"],[cT: 271026, dlc: "Taisho Era Contract Marriage"],[cT: 234538, dlc: "Demon Lord 2099"]];def mJF = n;Xm.each {if (it.cT == tmdbid && type.toString() != "Movie") {mJF = it.dlc}};def wz = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def GoF = mJF.replaceAll(wz.collect { "\\" + it }.join('|'), '');GoF = GoF.replaceAll(/(\s|\.)*$/, '');GoF}{def _Cr = [68854,235973,262295,259140,204098,239779,273190,271026,240125,275695,123542,257162];def me = _Cr.find { lRv ->  tmdbid == lRv } ?: "";me ? " ($y) [tmdbid-$me]" : ""}/{episode.special ? 'Specials' : 'Season '+s}{def wz = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def GoF = sn.replaceAll(wz.collect { "\\" + it }.join('|'), '_');def JN = n.replaceAll(wz.collect { "\\" + it }.join('|'), '_');def nQ = GoF.contains(JN) ? "" : GoF;nQ == 'Season '+ s ? "" : nQ ? " - " + nQ : ""}/{def qo = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def Okl = qo.find { hT ->  fn.contains(hT) } ?: "";def gNq = any {(fn =~ /^\[(.*?)\]/)[0][1]} {Okl} {group} {""};gNq ? "[$gNq] " : ""}{def Xm = [[cT: 229743, dlc: "VTuber Legend"],[cT: 240633, dlc: "A Journey Through Another World"],[cT: 245285, dlc: "Failure Frame"],[cT: 237045, dlc: "Cherry Magic!"],[cT: 68854, dlc: "From Me to You"],[cT: 271026, dlc: "Taisho Era Contract Marriage"],[cT: 234538, dlc: "Demon Lord 2099"]];def mJF = n;Xm.each {if (it.cT == tmdbid && type.toString() != "Movie") {mJF = it.dlc}};def wz = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def GoF = mJF.replaceAll(wz.collect { "\\" + it }.join('|'), '');GoF = GoF.replaceAll(/(\s|\.)*$/, '');GoF} - {s00e00}{def wz = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def GoF = t.replaceAll(wz.collect { "\\" + it }.join('|'), '_');GoF.length() > 100 ? " " : " - $GoF "} [{def Cc = [[If: "Bilibili.tv", Du: ["B-Global", "BiliIntl", "BILI"]],[If: "Prime Video", Du: ["AMZN"]],[If: "U-NEXT", Du: ["UNEXT"]],[If: "ABEMA", Du: ["ABEMA"]],[If: "Hulu", Du: ["HULU"]],[If: "Shahid", Du: ["SHAHID"]],[If: "YouTube", Du: ["YT.WEB-DL", "YOUTUBE", "YTB"]],[If: "Netflix", Du: ["NF.WEB-DL", "NF WEB"]]];def Cwc = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def Mh = ["Erai-raws", "SubsPlease"];def Ea = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def svB = any {def SN = Cc.find { LSr ->  LSr.Du.find { wh ->  fn.contains(wh) } }?.Du.first() ?: "";SN = SN.replace(".WEB-DL", "");SN ? "${SN}.WEB-DL" : ""} {source} {Cwc.find { sV ->  group == sV || Ea == sV } ? "WEBRip" : ""} {def Dx = Mh.find { WnM ->  group == WnM || Ea == WnM} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : Dx} {vs} {""};svB ? "$svB " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def ODk = " Dub";def oG = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : ODk;oG = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : oG;oG}{def Rro = any { audioLanguages.size() } { 0 };def oG = Rro > 2 ? " MAud" : Rro > 1 ? " DAud" : null;def PXq = Rro > 5 ? audioLanguages.take(5) : audioLanguages;oG ? oG + PXq.joining(" ", " (", "").upper() + (Rro > 5 ? " ...)" : ")") : ""}{def ZQj = any { textLanguages.size() } { 0 };def oG = ZQj > 2 ? ", MSub" : ZQj > 1 ? ", DSub" : null;def PXq = ZQj > 5 ? textLanguages.take(5) : textLanguages;oG ? oG + PXq.joining(" ", " (", "").upper() + (ZQj > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}