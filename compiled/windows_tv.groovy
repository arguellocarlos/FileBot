{def cqD = "H:/";def JMu = [home,"D:/","E:/","F:/","G:/","H:/"].collect { it as File }.sort { jK, pm ->  jK.exists() <=> pm.exists() ?: jK.diskSpace <=> pm.diskSpace }.last();def cmJ = cqD ? cqD : JMu;"$cmJ/"}{def GIH = /(CN|JP|KR|KP|TW|HK)/;def j_G = /(aeni|donghua|anime)/;def YC = anime || info.Keywords =~ j_G || (genres =~ /Animation/ && country =~ GIH) ? true : false;YC ? "Videos/Anime/" : "Videos/TV Series/"}{def tl = [[uFA: 229743, JQ: "VTuber Legend"],[uFA: 240633, JQ: "A Journey Through Another World"],[uFA: 245285, JQ: "Failure Frame"],[uFA: 237045, JQ: "Cherry Magic!"],[uFA: 68854, JQ: "From Me to You"],[uFA: 271026, JQ: "Taisho Era Contract Marriage"],[uFA: 234538, JQ: "Demon Lord 2099"]];def oj = n;tl.each {if (it.uFA == tmdbid && type.toString() != "Movie") {oj = it.JQ}};def cPN = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def yO = oj.replaceAll(cPN.collect { "\\" + it }.join('|'), '');yO = yO.replaceAll(/(\s|\.)*$/, '');yO}{def ySO = [68854,235973,262295,259140,204098,239779,273190,271026,240125,275695,123542,257162];def Tuf = ySO.find { mvn ->  tmdbid == mvn } ?: "";Tuf ? " ($y) [tmdbid-$Tuf]" : ""}/{episode.special ? 'Specials' : 'Season '+s}{def cPN = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def yO = sn.replaceAll(cPN.collect { "\\" + it }.join('|'), '_');def OSR = n.replaceAll(cPN.collect { "\\" + it }.join('|'), '_');def esS = yO.contains(OSR) ? "" : yO;esS == 'Season '+ s ? "" : esS ? " - " + esS : ""}/{def xM = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def gpp = xM.find { yq ->  fn.contains(yq) } ?: "";def UU = any {(fn =~ /^\[(.*?)\]/)[0][1]} {gpp} {group} {""};UU ? "[$UU] " : ""}{def tl = [[uFA: 229743, JQ: "VTuber Legend"],[uFA: 240633, JQ: "A Journey Through Another World"],[uFA: 245285, JQ: "Failure Frame"],[uFA: 237045, JQ: "Cherry Magic!"],[uFA: 68854, JQ: "From Me to You"],[uFA: 271026, JQ: "Taisho Era Contract Marriage"],[uFA: 234538, JQ: "Demon Lord 2099"]];def oj = n;tl.each {if (it.uFA == tmdbid && type.toString() != "Movie") {oj = it.JQ}};def cPN = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def yO = oj.replaceAll(cPN.collect { "\\" + it }.join('|'), '');yO = yO.replaceAll(/(\s|\.)*$/, '');yO} - {s00e00}{def cPN = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def yO = t.replaceAll(cPN.collect { "\\" + it }.join('|'), '_');def lmi = any { e } { special };yO = yO.length() > 100 ? " " : " - $yO ";yO == " - Episode $lmi " ? " " : yO} [{def Ug = [[NWB: "Bilibili.tv", VA_: ["B-Global", "BiliIntl", "BILI"]],[NWB: "Prime Video", VA_: ["AMZN"]],[NWB: "U-NEXT", VA_: ["UNEXT"]],[NWB: "ABEMA", VA_: ["ABEMA"]],[NWB: "Hulu", VA_: ["HULU"]],[NWB: "Shahid", VA_: ["SHAHID"]],[NWB: "YouTube", VA_: ["YT.WEB-DL", "YOUTUBE", "YTB"]],[NWB: "Netflix", VA_: ["NF.WEB-DL", "NF WEB"]]];def ax = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def Xkx = ["Erai-raws", "SubsPlease"];def _S_ = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def _c = any {def Ne = Ug.find { Re ->  Re.VA_.find { Fvi ->  fn.contains(Fvi) } }?.VA_.first() ?: "";Ne = Ne.replace(".WEB-DL", "");Ne ? "${Ne}.WEB-DL" : ""} {source} {ax.find { nuV ->  group == nuV || _S_ == nuV } ? "WEBRip" : ""} {def iw = Xkx.find { loe ->  group == loe || _S_ == loe} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : iw} {vs} {""};_c ? "$_c " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def aXT = " Dub";def VkR = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : aXT;VkR = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : VkR;VkR}{def Bnh = any { audioLanguages.size() } { 0 };def VkR = Bnh > 2 ? " MAud" : Bnh > 1 ? " DAud" : null;def tF = Bnh > 5 ? audioLanguages.take(5) : audioLanguages;VkR ? VkR + tF.joining(" ", " (", "").upper() + (Bnh > 5 ? " ...)" : ")") : ""}{def vT = any { textLanguages.size() } { 0 };def VkR = vT > 2 ? ", MSub" : vT > 1 ? ", DSub" : null;def tF = vT > 5 ? textLanguages.take(5) : textLanguages;VkR ? VkR + tF.joining(" ", " (", "").upper() + (vT > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}