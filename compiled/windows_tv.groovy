{def yBt = "H:/";def zLn = [home,"D:/","E:/","F:/","G:/","H:/"].collect { it as File }.sort { Ojf, Ab ->  Ojf.exists() <=> Ab.exists() ?: Ojf.diskSpace <=> Ab.diskSpace }.last();def TJ = yBt ? yBt : zLn;"$TJ/"}{"Videos/"}{def kPo = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","sex", "lgbt", "explicit", "adult animation", "adult content"];def oTL = "TheMovieDB::TV";def ChO = [[271026, oTL],[220118, oTL],[ 74180, oTL]];def PUs = [[236530, oTL]];def zu_ = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def Pq = zu_ == "IMDb" ? "tt${id}" : id;def ttn = any { info.adult } { false };def aip = ChO.find { it[0] == Pq && it[1] == zu_ } != null;def spq = PUs.find { it[0] == Pq && it[1] == zu_ } != null;def bNw = info.Keywords.findAll { it in kPo } || aip || ttn;bNw = spq ? false : bNw;bNw ? "R18+ " : ""}{def sK = ["CN", "JP", "KR", "KP", "TW", "HK"];def x_s = ["aeni", "donghua", "anime"];def fVJ = any {anime} || info.Keywords.findAll { it in x_s } || (sK.contains(country) && genres =~ /Animation/);fVJ ? "Anime/" : "TV Series/"}{def oTL = "TheMovieDB::TV";def KU = [[BOa: 68854, wlE: "From Me to You", iFD: oTL],[BOa: 94904, wlE: "My Next Life as Ojf Villainess", iFD: oTL],[BOa: 229743, wlE: "VTuber Legend", iFD: oTL],[BOa: 234538, wlE: "Demon Lord 2099", iFD: oTL],[BOa: 237045, wlE: "Cherry Magic!", iFD: oTL],[BOa: 240633, wlE: "A Journey Through Another World", iFD: oTL],[BOa: 245285, wlE: "Failure Frame", iFD: oTL],[BOa: 271026, wlE: "Taisho Era Contract Marriage", iFD: oTL]];def zu_ = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def Pq = zu_ == "IMDb" ? "tt${id}" : id;def Vo = n;KU.each {if (it.BOa == Pq && it.iFD == zu_) {Vo = it.wlE}};def ep = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def RUG = Vo.replaceAll(ep.collect { "\\" + it }.join('|'), '');RUG = RUG.replaceAll(/(\s|\.)*$/, '');RUG}{def oTL = "TheMovieDB::TV";def Vvt = [[ 68854, oTL],[123542, oTL],[204098, oTL],[235973, oTL],[239779, oTL],[240125, oTL],[257162, oTL],[259140, oTL],[262295, oTL],[271026, oTL],[273190, oTL],[275695, oTL]];def Lfq = Vvt.find { it[0] == id && it[1] == info.database } != null;def iD = ["TheMovieDB::TV": "tmdbid","AniDB": "anidbid","TheTVDB": "tvdbid","TVmaze": "tvmazeid"];def jm = iD[info.database];Lfq ? " ($y) [${jm}-${id}]" : ""}{"/"}{episode.special ? 'Specials' : 'Season '+s}{def ep = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def RUG = sn.replaceAll(ep.collect { "\\" + it }.join('|'), '_');def Tp = n.replaceAll(ep.collect { "\\" + it }.join('|'), '_');def fJj = RUG.contains(Tp) ? "" : RUG;fJj == 'Season '+ s ? "" : fJj ? " - " + fJj : ""}{"/"}{def xDX = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def vy = xDX.find { XvY ->  fn.contains(XvY) } ?: "";def uN = any {(fn =~ /^\[(.*?)\]/)[0][1]} {vy} {group} {""};uN ? "[$uN] " : ""}{def oTL = "TheMovieDB::TV";def KU = [[BOa: 68854, wlE: "From Me to You", iFD: oTL],[BOa: 94904, wlE: "My Next Life as Ojf Villainess", iFD: oTL],[BOa: 229743, wlE: "VTuber Legend", iFD: oTL],[BOa: 234538, wlE: "Demon Lord 2099", iFD: oTL],[BOa: 237045, wlE: "Cherry Magic!", iFD: oTL],[BOa: 240633, wlE: "A Journey Through Another World", iFD: oTL],[BOa: 245285, wlE: "Failure Frame", iFD: oTL],[BOa: 271026, wlE: "Taisho Era Contract Marriage", iFD: oTL]];def zu_ = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def Pq = zu_ == "IMDb" ? "tt${id}" : id;def Vo = n;KU.each {if (it.BOa == Pq && it.iFD == zu_) {Vo = it.wlE}};def ep = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def RUG = Vo.replaceAll(ep.collect { "\\" + it }.join('|'), '');RUG = RUG.replaceAll(/(\s|\.)*$/, '');RUG}{" - "}{s00e00}{def ep = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def RUG = t.replaceAll(ep.collect { "\\" + it }.join('|'), '_');def ro = any { e } { special };RUG = RUG.length() > 100 ? " " : " - $RUG ";RUG == " - Episode $ro " ? " " : RUG}{" ["}{def gT = [[i_: "ABEMA", yAG: ["ABEMA"]],[i_: "Bilibili.tv", yAG: ["BILI", "B-Global", "BiliIntl", "B-Site", "BiliCN"]],[i_: "Hulu", yAG: ["HULU"]],[i_: "iQIYI", yAG: ["IQ.WEB-DL", "IQIYI"]],[i_: "MeWatch", yAG: ["MW.WEB-DL"]],[i_: "Netflix", yAG: ["NF.WEB-DL", "NF WEB"]],[i_: "Prime Video", yAG: ["AMZN"]],[i_: "Shahid", yAG: ["SHAHID"]],[i_: "TVer", yAG: ["TVER"]],[i_: "U-NEXT", yAG: ["UNEXT"]],[i_: "YouTube", yAG: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def AlQ = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def zz = ["Erai-raws", "SubsPlease"];def TCu = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def kTq = any {def odS = gT.find { WL ->  WL.yAG.find { Ul ->  fn.contains(Ul) } }?.yAG.first() ?: "";odS = odS.replace(".WEB-DL", "");odS ? "${odS}.WEB-DL" : ""} {source} {AlQ.find { BAe ->  group == BAe || TCu == BAe } ? "WEBRip" : ""} {def QH = zz.find { nB ->  group == nB || TCu == nB} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : QH} {vs} {""};kTq ? "$kTq " : ""}{def ply = bitdepth ? " ${bitdepth}bit" : "";"$resolution $vcf $ply, $ac"}{" "}{af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0')}{def Yc = " Dub";def Qo = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : Yc;Qo = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : Qo;Qo}{def biz = any { audioLanguages.size() } { 0 };def Qo = biz > 2 ? " MAud" : biz > 1 ? " DAud" : null;def zzQ = biz > 5 ? audioLanguages.take(5) : audioLanguages;Qo ? Qo + zzQ.joining(" ", " (", "").upper() + (biz > 5 ? " ...)" : ")") : ""}{def HEO = any { textLanguages.size() } { 0 };def Qo = HEO > 2 ? ", MSub" : HEO > 1 ? ", DSub" : null;def zzQ = HEO > 5 ? textLanguages.take(5) : textLanguages;Qo ? Qo + zzQ.joining(" ", " (", "").upper() + (HEO > 5 ? " ...)" : ")") : ""}{"]["}{crc32.upper()}{"]"}{def dh = ["ass", "srt", "ssa", "vtt", "ttml"];def ERU = ["name": "." + lang.name,"iso3b": "." + lang.ISO3B,"iso3": "." +lang.ISO3,"iso2": "." + lang.ISO2];def kt = subt;ERU.values().each { Zkm -> if (kt.contains(Zkm)) {kt = kt.replace(Zkm, "")}};dh.contains(ext) ? ERU.iso3b + kt : ""}{def dh = ["jpg", "jpeg", "png", "bmp"];dh.contains(ext) ? "-thumb" : ""}