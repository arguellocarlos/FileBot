{def XO = "H:/";def Im = [home,"D:/","E:/","F:/","G:/","H:/"].collect { it as File }.sort { UFo, xg ->  UFo.exists() <=> xg.exists() ?: UFo.diskSpace <=> xg.diskSpace }.last();def yj = XO ? XO : Im;"$yj/"}{def Ox = /(CN|JP|KR|KP|TW|HK)/;def bM = /(aeni|donghua|anime)/;def IX = anime || info.Keywords =~ bM || (genres =~ /Animation/ && country =~ Ox) ? true : false;IX ? "Videos/Anime/" : "Videos/TV Series/"}{def Du = [[zHv: 229743, dnz: "VTuber Legend"],[zHv: 240633, dnz: "A Journey Through Another World"],[zHv: 245285, dnz: "Failure Frame"],[zHv: 237045, dnz: "Cherry Magic!"],[zHv: 68854, dnz: "From Me to You"],[zHv: 271026, dnz: "Taisho Era Contract Marriage"],[zHv: 234538, dnz: "Demon Lord 2099"]];def zv = n;Du.each {if (it.zHv == tmdbid && type.toString() != "Movie") {zv = it.dnz}};def Vu = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def PM = zv.replaceAll(Vu.collect { "\\" + it }.join('|'), '');PM = PM.replaceAll(/(\s|\.)*$/, '');PM}{def Ixs = [68854,235973,262295,259140,204098,239779,273190,271026,240125,275695,123542,257162];def Ak = Ixs.find { XVh ->  tmdbid == XVh } ?: "";Ak ? " ($y) [tmdbid-$Ak]" : ""}/{episode.special ? 'Specials' : 'Season '+s}{def Vu = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def PM = sn.replaceAll(Vu.collect { "\\" + it }.join('|'), '_');def FHq = n.replaceAll(Vu.collect { "\\" + it }.join('|'), '_');def dE = PM.contains(FHq) ? "" : PM;dE == 'Season '+ s ? "" : dE ? " - " + dE : ""}/{def P_ = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def rk = P_.find { pZ ->  fn.contains(pZ) } ?: "";def ge = any {(fn =~ /^\[(.*?)\]/)[0][1]} {rk} {group} {""};ge ? "[$ge] " : ""}{def Du = [[zHv: 229743, dnz: "VTuber Legend"],[zHv: 240633, dnz: "A Journey Through Another World"],[zHv: 245285, dnz: "Failure Frame"],[zHv: 237045, dnz: "Cherry Magic!"],[zHv: 68854, dnz: "From Me to You"],[zHv: 271026, dnz: "Taisho Era Contract Marriage"],[zHv: 234538, dnz: "Demon Lord 2099"]];def zv = n;Du.each {if (it.zHv == tmdbid && type.toString() != "Movie") {zv = it.dnz}};def Vu = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def PM = zv.replaceAll(Vu.collect { "\\" + it }.join('|'), '');PM = PM.replaceAll(/(\s|\.)*$/, '');PM} - {s00e00}{def Vu = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def PM = t.replaceAll(Vu.collect { "\\" + it }.join('|'), '_');PM.length() > 100 ? " " : " - $PM "} [{def FV = [[kxp: "Bilibili.tv", FP: ["B-Global", "BiliIntl", "BILI"]],[kxp: "Prime Video", FP: ["AMZN"]],[kxp: "U-NEXT", FP: ["UNEXT"]],[kxp: "ABEMA", FP: ["ABEMA"]],[kxp: "Hulu", FP: ["HULU"]],[kxp: "Shahid", FP: ["SHAHID"]],[kxp: "YouTube", FP: ["YT.WEB-DL", "YOUTUBE", "YTB"]],[kxp: "Netflix", FP: ["NF.WEB-DL", "NF WEB"]]];def cjj = ["ASW", "Judas", "JRx7"];def KvV = ["Erai-raws", "SubsPlease"];def adP = (fn =~ /^\[(.*?)\]/)[0][1];def Oc = any {def kTg = FV.find { Kr ->  Kr.FP.find { oz ->  fn.contains(oz) } }?.FP.first() ?: "";kTg = kTg.replace(".WEB-DL", "");kTg ? "${kTg}.WEB-DL" : ""} {source} {cjj.find { wVO ->  group == wVO || adP == wVO } ? "WEBRip" : ""} {KvV.find { WN ->  group == WN || adP == WN} ? "WEB-DL" : ""} {vs} {""};Oc ? "$Oc " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def Yw = " Dub";def YZ = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : Yw;YZ = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : YZ;YZ}{def Hq = any { audioLanguages.size() } { 0 };def YZ = Hq > 2 ? " MAud" : Hq > 1 ? " DAud" : null;def IvM = Hq > 5 ? audioLanguages.take(5) : audioLanguages;YZ ? YZ + IvM.joining(" ", " (", "").upper() + (Hq > 5 ? " ...)" : ")") : ""}{def IxJ = any { textLanguages.size() } { 0 };def YZ = IxJ > 2 ? ", MSub" : IxJ > 1 ? ", DSub" : null;def IvM = IxJ > 5 ? textLanguages.take(5) : textLanguages;YZ ? YZ + IvM.joining(" ", " (", "").upper() + (IxJ > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}