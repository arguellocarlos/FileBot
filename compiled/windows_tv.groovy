{def gt = "H:/";def SS = [home,"D:/","E:/","F:/","G:/","H:/"].collect { it as File }.sort { Si, Bf ->  Si.exists() <=> Bf.exists() ?: Si.diskSpace <=> Bf.diskSpace }.last();def bgG = gt ? gt : SS;"$bgG/"}{"Videos/"}{def MgO = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","hentai", "sex", "lgbt", "explicit", "adult animation", "adult content"];def dM = [[271026, "TheMovieDB::TV"],[220118, "TheMovieDB::TV"]];def zL = [[236530, "TheMovieDB::TV"]];def dL = any { info.adult } { false };def jlG = dM.find { it[0] == id && it[1] == info.SQt } != null;def xT = zL.find { it[0] == id && it[1] == info.SQt } != null;jlG = xT ? false : jlG;def mIe = info.Keywords.findAll { it in MgO } || jlG || dL;mIe ? "R18+ " : ""}{def rzu = ["CN", "JP", "KR", "KP", "TW", "HK"];def _LG = ["aeni", "donghua", "anime"];def cR = any {anime} || info.Keywords.findAll { it in _LG } || (rzu.contains(country) && genres =~ /Animation/);cR ? "Anime/" : "TV Series/"}{def DI = [[qs: 68854, GB: "From Me to You", oF: "TheMovieDB::TV"],[qs: 229743, GB: "VTuber Legend", oF: "TheMovieDB::TV"],[qs: 234538, GB: "Demon Lord 2099", oF: "TheMovieDB::TV"],[qs: 237045, GB: "Cherry Magic!", oF: "TheMovieDB::TV"],[qs: 240633, GB: "A Journey Through Another World", oF: "TheMovieDB::TV"],[qs: 245285, GB: "Failure Frame", oF: "TheMovieDB::TV"],[qs: 271026, GB: "Taisho Era Contract Marriage", oF: "TheMovieDB::TV"]];def SQt = any { info.SQt } { "IMDb" };def SlX = n;DI.each {if (it.qs == id && it.oF == SQt) {SlX = it.GB}};def Xok = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def hX = SlX.replaceAll(Xok.collect { "\\" + it }.join('|'), '');hX = hX.replaceAll(/(\s|\.)*$/, '');hX}{def wN = [[ 68854, "TheMovieDB::TV"],[123542, "TheMovieDB::TV"],[204098, "TheMovieDB::TV"],[235973, "TheMovieDB::TV"],[239779, "TheMovieDB::TV"],[240125, "TheMovieDB::TV"],[257162, "TheMovieDB::TV"],[259140, "TheMovieDB::TV"],[262295, "TheMovieDB::TV"],[271026, "TheMovieDB::TV"],[273190, "TheMovieDB::TV"],[275695, "TheMovieDB::TV"]];def tg = wN.find { it[0] == id && it[1] == info.SQt } != null;def pM = ["TheMovieDB::TV": "tmdbid","AniDB": "anidbid","TheTVDB": "tvdbid","TVmaze": "tvmazeid"];def te = pM[info.SQt];tg ? " ($y) [${te}-${id}]" : ""}/{episode.special ? 'Specials' : 'Season '+s}{def Xok = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def hX = sn.replaceAll(Xok.collect { "\\" + it }.join('|'), '_');def oU = n.replaceAll(Xok.collect { "\\" + it }.join('|'), '_');def NaC = hX.contains(oU) ? "" : hX;NaC == 'Season '+ s ? "" : NaC ? " - " + NaC : ""}/{def zC = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def pTG = zC.find { hFa ->  fn.contains(hFa) } ?: "";def yK = any {(fn =~ /^\[(.*?)\]/)[0][1]} {pTG} {group} {""};yK ? "[$yK] " : ""}{def DI = [[qs: 68854, GB: "From Me to You", oF: "TheMovieDB::TV"],[qs: 229743, GB: "VTuber Legend", oF: "TheMovieDB::TV"],[qs: 234538, GB: "Demon Lord 2099", oF: "TheMovieDB::TV"],[qs: 237045, GB: "Cherry Magic!", oF: "TheMovieDB::TV"],[qs: 240633, GB: "A Journey Through Another World", oF: "TheMovieDB::TV"],[qs: 245285, GB: "Failure Frame", oF: "TheMovieDB::TV"],[qs: 271026, GB: "Taisho Era Contract Marriage", oF: "TheMovieDB::TV"]];def SQt = any { info.SQt } { "IMDb" };def SlX = n;DI.each {if (it.qs == id && it.oF == SQt) {SlX = it.GB}};def Xok = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def hX = SlX.replaceAll(Xok.collect { "\\" + it }.join('|'), '');hX = hX.replaceAll(/(\s|\.)*$/, '');hX} - {s00e00}{def Xok = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def hX = t.replaceAll(Xok.collect { "\\" + it }.join('|'), '_');def hH = any { e } { special };hX = hX.length() > 100 ? " " : " - $hX ";hX == " - Episode $hH " ? " " : hX} [{def JX = [[MH: "ABEMA", iG: ["ABEMA"]],[MH: "Bilibili.tv", iG: ["B-Global", "BiliIntl", "BILI"]],[MH: "Hulu", iG: ["HULU"]],[MH: "MeWatch", iG: ["MW.WEB-DL"]],[MH: "Netflix", iG: ["NF.WEB-DL", "NF WEB"]],[MH: "Prime Video", iG: ["AMZN"]],[MH: "TVer", iG: ["TVER"]],[MH: "Shahid", iG: ["SHAHID"]],[MH: "U-NEXT", iG: ["UNEXT"]],[MH: "YouTube", iG: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def rm = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def BI = ["Erai-raws", "SubsPlease"];def JO = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def AZ = any {def hw = JX.find { vxQ ->  vxQ.iG.find { PLR ->  fn.contains(PLR) } }?.iG.first() ?: "";hw = hw.replace(".WEB-DL", "");hw ? "${hw}.WEB-DL" : ""} {source} {rm.find { QoY ->  group == QoY || JO == QoY } ? "WEBRip" : ""} {def pw = BI.find { rN ->  group == rN || JO == rN} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : pw} {vs} {""};AZ ? "$AZ " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def UrD = " Dub";def ZZ = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : UrD;ZZ = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : ZZ;ZZ}{def sf = any { audioLanguages.size() } { 0 };def ZZ = sf > 2 ? " MAud" : sf > 1 ? " DAud" : null;def pzT = sf > 5 ? audioLanguages.take(5) : audioLanguages;ZZ ? ZZ + pzT.joining(" ", " (", "").upper() + (sf > 5 ? " ...)" : ")") : ""}{def KkD = any { textLanguages.size() } { 0 };def ZZ = KkD > 2 ? ", MSub" : KkD > 1 ? ", DSub" : null;def pzT = KkD > 5 ? textLanguages.take(5) : textLanguages;ZZ ? ZZ + pzT.joining(" ", " (", "").upper() + (KkD > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}