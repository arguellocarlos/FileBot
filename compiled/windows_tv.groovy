{def XxG = "H:/";def mQH = [home,"D:/","E:/","F:/","G:/","H:/"].collect { it as File }.sort { dRp, rbR ->  dRp.exists() <=> rbR.exists() ?: dRp.diskSpace <=> rbR.diskSpace }.last();def SIl = XxG ? XxG : mQH;"$SIl/"}{"Videos/"}{def ea = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","hentai", "sex", "lgbt", "explicit", "adult animation", "adult content"];def mJq = [[271026, "TheMovieDB::TV"],[220118, "TheMovieDB::TV"]];def UNi = any { info.adult } { false };def gMs = mJq.find { it[0] == id && it[1] == info.xHd } != null;def dM = info.Keywords.findAll { it in ea } || gMs || UNi;dM ? "R18+ " : ""}{def JJ = ["CN", "JP", "KR", "KP", "TW", "HK"];def eR = ["aeni", "donghua", "anime"];def voh = any {anime} || info.Keywords.findAll { it in eR } || (JJ.contains(country) && genres =~ /Animation/);voh ? "Anime/" : "TV Series/"}{def Sj = [[fpW: 68854, pH: "From Me to You", VWt: "TheMovieDB::TV"],[fpW: 229743, pH: "VTuber Legend", VWt: "TheMovieDB::TV"],[fpW: 234538, pH: "Demon Lord 2099", VWt: "TheMovieDB::TV"],[fpW: 237045, pH: "Cherry Magic!", VWt: "TheMovieDB::TV"],[fpW: 240633, pH: "A Journey Through Another World", VWt: "TheMovieDB::TV"],[fpW: 245285, pH: "Failure Frame", VWt: "TheMovieDB::TV"],[fpW: 271026, pH: "Taisho Era Contract Marriage", VWt: "TheMovieDB::TV"]];def xHd = any { info.xHd } { "IMDb" };def DQC = n;Sj.each {if (it.fpW == id && it.VWt == xHd) {DQC = it.pH}};def nu = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def pm = DQC.replaceAll(nu.collect { "\\" + it }.join('|'), '');pm = pm.replaceAll(/(\s|\.)*$/, '');pm}{def AHK = [[ 68854, "TheMovieDB::TV"],[123542, "TheMovieDB::TV"],[204098, "TheMovieDB::TV"],[235973, "TheMovieDB::TV"],[239779, "TheMovieDB::TV"],[240125, "TheMovieDB::TV"],[257162, "TheMovieDB::TV"],[259140, "TheMovieDB::TV"],[262295, "TheMovieDB::TV"],[271026, "TheMovieDB::TV"],[273190, "TheMovieDB::TV"],[275695, "TheMovieDB::TV"]];def Ei = AHK.find { it[0] == id && it[1] == info.xHd } != null;def xkN = ["TheMovieDB::TV": "tmdbid","AniDB": "anidbid","TheTVDB": "tvdbid","TVmaze": "tvmazeid"];def __g = xkN[info.xHd];Ei ? " ($y) [${__g}-${id}]" : ""}/{episode.special ? 'Specials' : 'Season '+s}{def nu = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def pm = sn.replaceAll(nu.collect { "\\" + it }.join('|'), '_');def xf = n.replaceAll(nu.collect { "\\" + it }.join('|'), '_');def mJY = pm.contains(xf) ? "" : pm;mJY == 'Season '+ s ? "" : mJY ? " - " + mJY : ""}/{def UG = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def Hhf = UG.find { kIv ->  fn.contains(kIv) } ?: "";def yN = any {(fn =~ /^\[(.*?)\]/)[0][1]} {Hhf} {group} {""};yN ? "[$yN] " : ""}{def Sj = [[fpW: 68854, pH: "From Me to You", VWt: "TheMovieDB::TV"],[fpW: 229743, pH: "VTuber Legend", VWt: "TheMovieDB::TV"],[fpW: 234538, pH: "Demon Lord 2099", VWt: "TheMovieDB::TV"],[fpW: 237045, pH: "Cherry Magic!", VWt: "TheMovieDB::TV"],[fpW: 240633, pH: "A Journey Through Another World", VWt: "TheMovieDB::TV"],[fpW: 245285, pH: "Failure Frame", VWt: "TheMovieDB::TV"],[fpW: 271026, pH: "Taisho Era Contract Marriage", VWt: "TheMovieDB::TV"]];def xHd = any { info.xHd } { "IMDb" };def DQC = n;Sj.each {if (it.fpW == id && it.VWt == xHd) {DQC = it.pH}};def nu = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def pm = DQC.replaceAll(nu.collect { "\\" + it }.join('|'), '');pm = pm.replaceAll(/(\s|\.)*$/, '');pm} - {s00e00}{def nu = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def pm = t.replaceAll(nu.collect { "\\" + it }.join('|'), '_');def Ft = any { e } { special };pm = pm.length() > 100 ? " " : " - $pm ";pm == " - Episode $Ft " ? " " : pm} [{def zY = [[uk: "ABEMA", opz: ["ABEMA"]],[uk: "Bilibili.tv", opz: ["B-Global", "BiliIntl", "BILI"]],[uk: "Hulu", opz: ["HULU"]],[uk: "MeWatch", opz: ["MW.WEB-DL"]],[uk: "Netflix", opz: ["NF.WEB-DL", "NF WEB"]],[uk: "Prime Video", opz: ["AMZN"]],[uk: "TVer", opz: ["TVER"]],[uk: "Shahid", opz: ["SHAHID"]],[uk: "U-NEXT", opz: ["UNEXT"]],[uk: "YouTube", opz: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def oeJ = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def rWs = ["Erai-raws", "SubsPlease"];def FdF = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def ukK = any {def Ar = zY.find { UR ->  UR.opz.find { HSw ->  fn.contains(HSw) } }?.opz.first() ?: "";Ar = Ar.replace(".WEB-DL", "");Ar ? "${Ar}.WEB-DL" : ""} {source} {oeJ.find { ha ->  group == ha || FdF == ha } ? "WEBRip" : ""} {def Nn = rWs.find { Bf ->  group == Bf || FdF == Bf} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : Nn} {vs} {""};ukK ? "$ukK " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def c_r = " Dub";def EC = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : c_r;EC = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : EC;EC}{def _pP = any { audioLanguages.size() } { 0 };def EC = _pP > 2 ? " MAud" : _pP > 1 ? " DAud" : null;def Fj = _pP > 5 ? audioLanguages.take(5) : audioLanguages;EC ? EC + Fj.joining(" ", " (", "").upper() + (_pP > 5 ? " ...)" : ")") : ""}{def FX = any { textLanguages.size() } { 0 };def EC = FX > 2 ? ", MSub" : FX > 1 ? ", DSub" : null;def Fj = FX > 5 ? textLanguages.take(5) : textLanguages;EC ? EC + Fj.joining(" ", " (", "").upper() + (FX > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}