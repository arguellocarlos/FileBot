{def Zg = "H:/";def ae = [home,"D:/","E:/","F:/","G:/","H:/"].collect { it as File }.sort { RdR, bRb ->  RdR.exists() <=> bRb.exists() ?: RdR.diskSpace <=> bRb.diskSpace }.last();def Xc = Zg ? Zg : ae;"$Xc/"}{def fqe = /(CN|JP|KR|KP|TW|HK)/;def tXo = /(aeni|donghua|anime)/;def rke = anime || info.Keywords =~ tXo || (genres =~ /Animation/ && country =~ fqe) ? true : false;rke ? "Videos/Anime/" : "Videos/TV Series/"}{def swv = [[yd: 229743, __: "VTuber Legend"],[yd: 240633, __: "A Journey Through Another World"],[yd: 245285, __: "Failure Frame"],[yd: 237045, __: "Cherry Magic!"],[yd: 68854, __: "From Me to You"],[yd: 271026, __: "Taisho Era Contract Marriage"],[yd: 234538, __: "Demon Lord 2099"]];def qkn = n;swv.each {if (it.yd == tmdbid && type.toString() != "Movie") {qkn = it.__}};def HF = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def aF = qkn.replaceAll(HF.collect { "\\" + it }.join('|'), '');aF = aF.replaceAll(/(\s|\.)*$/, '');aF}{def eD = [68854,235973,262295,259140,204098,239779,273190,271026,240125,275695,123542,257162];def GPL = eD.find { qK ->  tmdbid == qK } ?: "";GPL ? " ($y) [tmdbid-$GPL]" : ""}/{episode.special ? 'Specials' : 'Season '+s}{def HF = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def aF = sn.replaceAll(HF.collect { "\\" + it }.join('|'), '_');def aS = n.replaceAll(HF.collect { "\\" + it }.join('|'), '_');def vp = aF.contains(aS) ? "" : aF;vp == 'Season '+ s ? "" : vp ? " - " + vp : ""}/{def kY = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def tV = kY.find { SR ->  fn.contains(SR) } ?: "";def bW = any {(fn =~ /^\[(.*?)\]/)[0][1]} {tV} {group} {""};bW ? "[$bW] " : ""}{def swv = [[yd: 229743, __: "VTuber Legend"],[yd: 240633, __: "A Journey Through Another World"],[yd: 245285, __: "Failure Frame"],[yd: 237045, __: "Cherry Magic!"],[yd: 68854, __: "From Me to You"],[yd: 271026, __: "Taisho Era Contract Marriage"],[yd: 234538, __: "Demon Lord 2099"]];def qkn = n;swv.each {if (it.yd == tmdbid && type.toString() != "Movie") {qkn = it.__}};def HF = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def aF = qkn.replaceAll(HF.collect { "\\" + it }.join('|'), '');aF = aF.replaceAll(/(\s|\.)*$/, '');aF} - {s00e00}{def HF = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def aF = t.replaceAll(HF.collect { "\\" + it }.join('|'), '_');aF.length() > 100 ? " " : " - $aF "} [{def tK = [[FS: "Bilibili.tv", hYp: ["B-Global", "BiliIntl", "BILI"]],[FS: "Prime Video", hYp: ["AMZN"]],[FS: "U-NEXT", hYp: ["UNEXT"]],[FS: "ABEMA", hYp: ["ABEMA"]],[FS: "Hulu", hYp: ["HULU"]],[FS: "Shahid", hYp: ["SHAHID"]],[FS: "YouTube", hYp: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def krQ = ["ASW", "Judas"];def wUM = ["Erai-raws", "SubsPlease", "JRx7"];def ou = any {def xm = tK.find { NC ->  NC.hYp.find { dQ ->  fn.contains(dQ) } }?.hYp.first() ?: "";xm = xm.replace("YT.WEB-DL", "YT");xm ? "${xm}.WEB-DL" : ""} {source} {krQ.find { epJ ->  group == epJ } ? "WEBRip" : ""} {wUM.find { Cib ->  group == Cib } ? "WEB-DL" : ""} {""};ou ? "$ou " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def uEN = " Dub";def sV = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : uEN;sV = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : sV;sV}{def xF = any { audioLanguages.size() } { 0 };def sV = xF > 2 ? " MAud" : xF > 1 ? " DAud" : null;def YwP = xF > 5 ? audioLanguages.take(5) : audioLanguages;sV ? sV + YwP.joining(" ", " (", "").upper() + (xF > 5 ? " ...)" : ")") : ""}{def qA = any { textLanguages.size() } { 0 };def sV = qA > 2 ? ", MSub" : qA > 1 ? ", DSub" : null;def YwP = qA > 5 ? textLanguages.take(5) : textLanguages;sV ? sV + YwP.joining(" ", " (", "").upper() + (qA > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}