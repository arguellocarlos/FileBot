{def Wo = "H:/";def DWM = [home,"D:/","E:/","F:/","G:/","H:/"].collect { it as File }.sort { qcK, IV ->  qcK.exists() <=> IV.exists() ?: qcK.diskSpace <=> IV.diskSpace }.last();def qpd = Wo ? Wo : DWM;"$qpd/"}{def Ts = /(CN|JP|KR|KP|TW|HK)/;def OCw = /(aeni|donghua|anime)/;def GdD = anime || info.Keywords =~ OCw || (genres =~ /Animation/ && country =~ Ts) ? true : false;GdD ? "Videos/Anime/" : "Videos/TV Series/"}{def Ekk = [[cR: 229743, oa: "VTuber Legend"],[cR: 240633, oa: "A Journey Through Another World"],[cR: 245285, oa: "Failure Frame"],[cR: 237045, oa: "Cherry Magic!"],[cR: 68854, oa: "From Me to You"],[cR: 271026, oa: "Taisho Era Contract Marriage"],[cR: 234538, oa: "Demon Lord 2099"]];def cK = n;Ekk.each {if (it.cR == tmdbid && type.toString() != "Movie") {cK = it.oa}};def FgZ = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def VqV = cK.replaceAll(FgZ.collect { "\\" + it }.join('|'), '');VqV = VqV.replaceAll(/(\s|\.)*$/, '');VqV}{def QhD = [68854,235973,262295,259140,204098,239779,273190,271026,240125,275695,123542,257162];def Om = QhD.find { vyw ->  tmdbid == vyw } ?: "";Om ? " ($y) [tmdbid-$Om]" : ""}/{episode.special ? 'Specials' : 'Season '+s}{def FgZ = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def VqV = sn.replaceAll(FgZ.collect { "\\" + it }.join('|'), '_');def PQt = n.replaceAll(FgZ.collect { "\\" + it }.join('|'), '_');def yCh = VqV.contains(PQt) ? "" : VqV;yCh == 'Season '+ s ? "" : yCh ? " - " + yCh : ""}/{def kPt = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def xam = kPt.find { lH ->  fn.contains(lH) } ?: "";def VJh = any {(fn =~ /^\[(.*?)\]/)[0][1]} {xam} {group} {""};VJh ? "[$VJh] " : ""}{def Ekk = [[cR: 229743, oa: "VTuber Legend"],[cR: 240633, oa: "A Journey Through Another World"],[cR: 245285, oa: "Failure Frame"],[cR: 237045, oa: "Cherry Magic!"],[cR: 68854, oa: "From Me to You"],[cR: 271026, oa: "Taisho Era Contract Marriage"],[cR: 234538, oa: "Demon Lord 2099"]];def cK = n;Ekk.each {if (it.cR == tmdbid && type.toString() != "Movie") {cK = it.oa}};def FgZ = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def VqV = cK.replaceAll(FgZ.collect { "\\" + it }.join('|'), '');VqV = VqV.replaceAll(/(\s|\.)*$/, '');VqV} - {s00e00}{def FgZ = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def VqV = t.replaceAll(FgZ.collect { "\\" + it }.join('|'), '_');VqV.length() > 100 ? " " : " - $VqV "} [{def Ji = [[rBd: "Bilibili.tv", _xW: ["B-Global", "BiliIntl", "BILI"]],[rBd: "Prime Video", _xW: ["AMZN"]],[rBd: "U-NEXT", _xW: ["UNEXT"]],[rBd: "ABEMA", _xW: ["ABEMA"]],[rBd: "Hulu", _xW: ["HULU"]],[rBd: "Shahid", _xW: ["SHAHID"]],[rBd: "YouTube", _xW: ["YT.WEB-DL", "YOUTUBE", "YTB"]],[rBd: "Netflix", _xW: ["NF.WEB-DL", "NF WEB"]]];def KET = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def qCv = ["Erai-raws", "SubsPlease"];def GF = (fn =~ /^\[(.*?)\]/)[0][1];def owy = any {def w_ = Ji.find { qqS ->  qqS._xW.find { bT ->  fn.contains(bT) } }?._xW.first() ?: "";w_ = w_.replace(".WEB-DL", "");w_ ? "${w_}.WEB-DL" : ""} {source} {KET.find { WO ->  group == WO || GF == WO } ? "WEBRip" : ""} {def CUz = qCv.find { xxu ->  group == xxu || GF == xxu} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : CUz} {vs} {""};owy ? "$owy " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def IPk = " Dub";def vv = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : IPk;vv = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : vv;vv}{def tz = any { audioLanguages.size() } { 0 };def vv = tz > 2 ? " MAud" : tz > 1 ? " DAud" : null;def sEz = tz > 5 ? audioLanguages.take(5) : audioLanguages;vv ? vv + sEz.joining(" ", " (", "").upper() + (tz > 5 ? " ...)" : ")") : ""}{def eFG = any { textLanguages.size() } { 0 };def vv = eFG > 2 ? ", MSub" : eFG > 1 ? ", DSub" : null;def sEz = eFG > 5 ? textLanguages.take(5) : textLanguages;vv ? vv + sEz.joining(" ", " (", "").upper() + (eFG > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}