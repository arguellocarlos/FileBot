{def b_ = System.getProperty("user.name");def kf = "/run/media/${b_}";def Kq = "$kf/Videos";def _k = [home,"$kf/Data","$kf/Music","$kf/Videos","$kf/Games","$kf/Books"].collect { it as File }.sort { gmr, ceJ ->  gmr.exists() <=> ceJ.exists() ?: gmr.diskSpace <=> ceJ.diskSpace }.last();def Tze = Kq ? Kq : _k;"$Tze/"}{def bLJ = /(CN|JP|KR|KP|TW|HK)/;def jl = /(aeni|donghua|anime)/;def Jk = anime || info.Keywords =~ jl || any {(genres =~ /Animation/ && country =~ bLJ)}{false} ? true : false;def jn = Jk ? "Videos/Anime " : "Videos/";"$jn" + "Movies/"}{def ZO = [[Mh: 229743, oGJ: "VTuber Legend"],[Mh: 240633, oGJ: "A Journey Through Another World"],[Mh: 245285, oGJ: "Failure Frame"],[Mh: 237045, oGJ: "Cherry Magic!"],[Mh: 68854, oGJ: "From Me to You"],[Mh: 271026, oGJ: "Taisho Era Contract Marriage"],[Mh: 234538, oGJ: "Demon Lord 2099"]];def qkx = n;ZO.each {if (it.Mh == tmdbid && type.toString() != "Movie") {qkx = it.oGJ}};def fqx = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def qlj = qkx.replaceAll(fqx.collect { "\\" + it }.join('|'), '');qlj = qlj.replaceAll(/(\s|\.)*$/, '');qlj}{" ("}{y}{") [tmdbid-"}{tmdbid}{"]/"}{def eZ = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def _q = eZ.find { zIg ->  fn.contains(zIg) } ?: "";def jv = any {(fn =~ /^\[(.*?)\]/)[0][1]} {_q} {group} {""};jv ? "[$jv] " : ""}{def ZO = [[Mh: 229743, oGJ: "VTuber Legend"],[Mh: 240633, oGJ: "A Journey Through Another World"],[Mh: 245285, oGJ: "Failure Frame"],[Mh: 237045, oGJ: "Cherry Magic!"],[Mh: 68854, oGJ: "From Me to You"],[Mh: 271026, oGJ: "Taisho Era Contract Marriage"],[Mh: 234538, oGJ: "Demon Lord 2099"]];def qkx = n;ZO.each {if (it.Mh == tmdbid && type.toString() != "Movie") {qkx = it.oGJ}};def fqx = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def qlj = qkx.replaceAll(fqx.collect { "\\" + it }.join('|'), '');qlj = qlj.replaceAll(/(\s|\.)*$/, '');qlj}{" ("}{y}{")"} [{def JF = [[AHB: "ABEMA", NJy: ["ABEMA"]],[AHB: "Bilibili.tv", NJy: ["B-Global", "BiliIntl", "BILI"]],[AHB: "Hulu", NJy: ["HULU"]],[AHB: "MeWatch", NJy: ["MW.WEB-DL"]],[AHB: "Netflix", NJy: ["NF.WEB-DL", "NF WEB"]],[AHB: "Prime Video", NJy: ["AMZN"]],[AHB: "TVer", NJy: ["TVER"]],[AHB: "Shahid", NJy: ["SHAHID"]],[AHB: "U-NEXT", NJy: ["UNEXT"]],[AHB: "YouTube", NJy: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def jkY = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def ms = ["Erai-raws", "SubsPlease"];def nV = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def R_o = any {def yYr = JF.find { Vo ->  Vo.NJy.find { iV ->  fn.contains(iV) } }?.NJy.first() ?: "";yYr = yYr.replace(".WEB-DL", "");yYr ? "${yYr}.WEB-DL" : ""} {source} {jkY.find { zem ->  group == zem || nV == zem } ? "WEBRip" : ""} {def cw = ms.find { ti ->  group == ti || nV == ti} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : cw} {vs} {""};R_o ? "$R_o " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def ZLO = " Dub";def Vd = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : ZLO;Vd = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : Vd;Vd}{def fy = any { audioLanguages.size() } { 0 };def Vd = fy > 2 ? " MAud" : fy > 1 ? " DAud" : null;def Jt = fy > 5 ? audioLanguages.take(5) : audioLanguages;Vd ? Vd + Jt.joining(" ", " (", "").upper() + (fy > 5 ? " ...)" : ")") : ""}{def Lf = any { textLanguages.size() } { 0 };def Vd = Lf > 2 ? ", MSub" : Lf > 1 ? ", DSub" : null;def Jt = Lf > 5 ? textLanguages.take(5) : textLanguages;Vd ? Vd + Jt.joining(" ", " (", "").upper() + (Lf > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}