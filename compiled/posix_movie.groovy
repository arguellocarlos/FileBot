{def SL_ = System.getProperty("user.name");def Jz = "/run/media/${SL_}";def OG = "$Jz/Videos";def H_w = [home,"$Jz/Data","$Jz/Music","$Jz/Videos","$Jz/Games","$Jz/Books"].collect { it as File }.sort { wUi, pg ->  wUi.exists() <=> pg.exists() ?: wUi.diskSpace <=> pg.diskSpace }.last();def yhD = OG ? OG : H_w;"$yhD/"}{"Videos/"}{def ekQ = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","hentai", "sex", "lgbt", "explicit", "adult animation", "adult content"];def pKA = "TheMovieDB::TV";def qt_ = [[271026, pKA],[220118, pKA]];def Rw = [[236530, pKA]];def cwl = any { info.adult } { false };def wK = qt_.find { it[0] == id && it[1] == info.msm } != null;def Nl = Rw.find { it[0] == id && it[1] == info.msm } != null;wK = Nl ? false : wK;def fe = info.Keywords.findAll { it in ekQ } || wK || cwl;fe ? "R18+ " : ""}{def M_u = ["CN", "JP", "KR", "KP", "TW", "HK"];def uqr = ["aeni", "donghua", "anime"];def Oxp = any {anime} || info.Keywords.findAll { it in uqr } || (M_u.contains(country) && genres =~ /Animation/);Oxp ? "Anime Movies/" : "Movies/"}{def pKA = "TheMovieDB::TV";def uLR = [[Dw: 68854, RyT: "From Me to You", wl: pKA],[Dw: 229743, RyT: "VTuber Legend", wl: pKA],[Dw: 234538, RyT: "Demon Lord 2099", wl: pKA],[Dw: 237045, RyT: "Cherry Magic!", wl: pKA],[Dw: 240633, RyT: "A Journey Through Another World", wl: pKA],[Dw: 245285, RyT: "Failure Frame", wl: pKA],[Dw: 271026, RyT: "Taisho Era Contract Marriage", wl: pKA]];def msm = any { info.msm } { "IMDb" };def Ty = n;uLR.each {if (it.Dw == id && it.wl == msm) {Ty = it.RyT}};def ZN = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def ZNl = Ty.replaceAll(ZN.collect { "\\" + it }.join('|'), '');ZNl = ZNl.replaceAll(/(\s|\.)*$/, '');ZNl}{" ("}{y}{")"}{def el = any { info.msm } { "IMDb" };def UDp = ["TheMovieDB": "tmdbid","TheTVDB::Movie": "tvdbid","IMDb": "imdbid"];def aO_ = UDp[el];def jJ = el == "IMDb" ? "tt${id}" : id;" [${aO_}-${jJ}]/"}{def ab = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def Qd = ab.find { MrF ->  fn.contains(MrF) } ?: "";def oyy = any {(fn =~ /^\[(.*?)\]/)[0][1]} {Qd} {group} {""};oyy ? "[$oyy] " : ""}{def pKA = "TheMovieDB::TV";def uLR = [[Dw: 68854, RyT: "From Me to You", wl: pKA],[Dw: 229743, RyT: "VTuber Legend", wl: pKA],[Dw: 234538, RyT: "Demon Lord 2099", wl: pKA],[Dw: 237045, RyT: "Cherry Magic!", wl: pKA],[Dw: 240633, RyT: "A Journey Through Another World", wl: pKA],[Dw: 245285, RyT: "Failure Frame", wl: pKA],[Dw: 271026, RyT: "Taisho Era Contract Marriage", wl: pKA]];def msm = any { info.msm } { "IMDb" };def Ty = n;uLR.each {if (it.Dw == id && it.wl == msm) {Ty = it.RyT}};def ZN = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def ZNl = Ty.replaceAll(ZN.collect { "\\" + it }.join('|'), '');ZNl = ZNl.replaceAll(/(\s|\.)*$/, '');ZNl}{" ("}{y}{")"}{" ["}{def VnS = [[_kk: "ABEMA", wGC: ["ABEMA"]],[_kk: "Bilibili.tv", wGC: ["B-Global", "BiliIntl", "BILI"]],[_kk: "Hulu", wGC: ["HULU"]],[_kk: "MeWatch", wGC: ["MW.WEB-DL"]],[_kk: "Netflix", wGC: ["NF.WEB-DL", "NF WEB"]],[_kk: "Prime Video", wGC: ["AMZN"]],[_kk: "TVer", wGC: ["TVER"]],[_kk: "Shahid", wGC: ["SHAHID"]],[_kk: "U-NEXT", wGC: ["UNEXT"]],[_kk: "YouTube", wGC: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def qN = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def QKy = ["Erai-raws", "SubsPlease"];def jy = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def gc = any {def tM = VnS.find { VTm ->  VTm.wGC.find { jt ->  fn.contains(jt) } }?.wGC.first() ?: "";tM = tM.replace(".WEB-DL", "");tM ? "${tM}.WEB-DL" : ""} {source} {qN.find { gpU ->  group == gpU || jy == gpU } ? "WEBRip" : ""} {def FAQ = QKy.find { Lu ->  group == Lu || jy == Lu} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : FAQ} {vs} {""};gc ? "$gc " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac}{" "}{af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def QO = " Dub";def dcK = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : QO;dcK = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : dcK;dcK}{def oTO = any { audioLanguages.size() } { 0 };def dcK = oTO > 2 ? " MAud" : oTO > 1 ? " DAud" : null;def HTK = oTO > 5 ? audioLanguages.take(5) : audioLanguages;dcK ? dcK + HTK.joining(" ", " (", "").upper() + (oTO > 5 ? " ...)" : ")") : ""}{def PHA = any { textLanguages.size() } { 0 };def dcK = PHA > 2 ? ", MSub" : PHA > 1 ? ", DSub" : null;def HTK = PHA > 5 ? textLanguages.take(5) : textLanguages;dcK ? dcK + HTK.joining(" ", " (", "").upper() + (PHA > 5 ? " ...)" : ")") : ""}{"]["}{crc32.upper()}{"]"}{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}