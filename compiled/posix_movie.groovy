{def Kfk = System.getProperty("user.name");def eac = "/run/media/${Kfk}";def BqK = "$eac/Videos";def bqJ = [home,"$eac/Data","$eac/Music","$eac/Videos","$eac/Games","$eac/Books"].collect { it as File }.sort { ia, RbN ->  ia.exists() <=> RbN.exists() ?: ia.diskSpace <=> RbN.diskSpace }.last();def Ho = BqK ? BqK : bqJ;"$Ho/"}{"Videos/"}{def vRS = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","hentai", "sex", "lgbt", "explicit", "adult animation", "adult content"];def JG = [271026,220118];def ytA = any { info.adult } { false };def HkC = any { info.Keywords.findAll { it in vRS } } { id in JG } { ytA };HkC ? "R18+ " : ""}{def so = ["CN", "JP", "KR", "KP", "TW", "HK"];def YL = ["aeni", "donghua", "anime"];def Hkd = any { anime } { info.Keywords.findAll { it in YL } } { so.contains(country) } { false };Hkd && genres =~ /Animation/ ? "Anime Movies/" : "Movies/"}{def laf = [[XAq: 229743, uSc: "VTuber Legend"],[XAq: 240633, uSc: "A Journey Through Another World"],[XAq: 245285, uSc: "Failure Frame"],[XAq: 237045, uSc: "Cherry Magic!"],[XAq: 68854, uSc: "From Me to You"],[XAq: 271026, uSc: "Taisho Era Contract Marriage"],[XAq: 234538, uSc: "Demon Lord 2099"]];def Mm = n;laf.each {if (it.XAq == tmdbid && type.toString() != "Movie") {Mm = it.uSc}};def AB = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def ii = Mm.replaceAll(AB.collect { "\\" + it }.join('|'), '');ii = ii.replaceAll(/(\s|\.)*$/, '');ii}{" ("}{y}{") [tmdbid-"}{tmdbid}{"]/"}{def hVR = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def IE = hVR.find { gq ->  fn.contains(gq) } ?: "";def eLx = any {(fn =~ /^\[(.*?)\]/)[0][1]} {IE} {group} {""};eLx ? "[$eLx] " : ""}{def laf = [[XAq: 229743, uSc: "VTuber Legend"],[XAq: 240633, uSc: "A Journey Through Another World"],[XAq: 245285, uSc: "Failure Frame"],[XAq: 237045, uSc: "Cherry Magic!"],[XAq: 68854, uSc: "From Me to You"],[XAq: 271026, uSc: "Taisho Era Contract Marriage"],[XAq: 234538, uSc: "Demon Lord 2099"]];def Mm = n;laf.each {if (it.XAq == tmdbid && type.toString() != "Movie") {Mm = it.uSc}};def AB = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def ii = Mm.replaceAll(AB.collect { "\\" + it }.join('|'), '');ii = ii.replaceAll(/(\s|\.)*$/, '');ii}{" ("}{y}{")"} [{def b_ = [[Pl: "ABEMA", JkV: ["ABEMA"]],[Pl: "Bilibili.tv", JkV: ["B-Global", "BiliIntl", "BILI"]],[Pl: "Hulu", JkV: ["HULU"]],[Pl: "MeWatch", JkV: ["MW.WEB-DL"]],[Pl: "Netflix", JkV: ["NF.WEB-DL", "NF WEB"]],[Pl: "Prime Video", JkV: ["AMZN"]],[Pl: "TVer", JkV: ["TVER"]],[Pl: "Shahid", JkV: ["SHAHID"]],[Pl: "U-NEXT", JkV: ["UNEXT"]],[Pl: "YouTube", JkV: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def nPf = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def p_m = ["Erai-raws", "SubsPlease"];def fPW = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def aqB = any {def aDE = b_.find { Kf ->  Kf.JkV.find { MFu ->  fn.contains(MFu) } }?.JkV.first() ?: "";aDE = aDE.replace(".WEB-DL", "");aDE ? "${aDE}.WEB-DL" : ""} {source} {nPf.find { TgH ->  group == TgH || fPW == TgH } ? "WEBRip" : ""} {def qqp = p_m.find { UeF ->  group == UeF || fPW == UeF} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : qqp} {vs} {""};aqB ? "$aqB " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def JON = " Dub";def YyG = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : JON;YyG = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : YyG;YyG}{def HoR = any { audioLanguages.size() } { 0 };def YyG = HoR > 2 ? " MAud" : HoR > 1 ? " DAud" : null;def fx = HoR > 5 ? audioLanguages.take(5) : audioLanguages;YyG ? YyG + fx.joining(" ", " (", "").upper() + (HoR > 5 ? " ...)" : ")") : ""}{def Ha = any { textLanguages.size() } { 0 };def YyG = Ha > 2 ? ", MSub" : Ha > 1 ? ", DSub" : null;def fx = Ha > 5 ? textLanguages.take(5) : textLanguages;YyG ? YyG + fx.joining(" ", " (", "").upper() + (Ha > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}