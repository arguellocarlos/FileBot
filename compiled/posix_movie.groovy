{def Yh = System.getProperty("user.name");def YKa = "/run/media/${Yh}";def r_b = "$YKa/Videos";def mp = [home,"$YKa/Data","$YKa/Music","$YKa/Videos","$YKa/Games","$YKa/Books"].collect { it as File }.sort { gX, nDY ->  gX.exists() <=> nDY.exists() ?: gX.diskSpace <=> nDY.diskSpace }.last();def BE = r_b ? r_b : mp;"$BE/"}{"Videos/"}{def pj = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","sex", "lgbt", "explicit", "adult animation", "adult content"];def LNU = "TheMovieDB::TV";def kIt = [[271026, LNU],[220118, LNU],[ 74180, LNU]];def Nu = [[236530, LNU]];def sNU = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def vR = sNU == "IMDb" ? "tt${id}" : id;def XS = any { info.adult } { false };def qLD = kIt.find { it[0] == vR && it[1] == sNU } != null;def il = Nu.find { it[0] == vR && it[1] == sNU } != null;def LW = info.Keywords.findAll { it in pj } || qLD || XS;LW = il ? false : LW;LW ? "R18+ " : ""}{def fC = ["CN", "JP", "KR", "KP", "TW", "HK"];def iut = ["aeni", "donghua", "anime"];def Fw = any {anime} || info.Keywords.findAll { it in iut } || (fC.contains(country) && genres =~ /Animation/);Fw ? "Anime Movies/" : "Movies/"}{def LNU = "TheMovieDB::TV";def rK = [[dys: 68854, Uos: "From Me to You", mU: LNU],[dys: 229743, Uos: "VTuber Legend", mU: LNU],[dys: 234538, Uos: "Demon Lord 2099", mU: LNU],[dys: 237045, Uos: "Cherry Magic!", mU: LNU],[dys: 240633, Uos: "A Journey Through Another World", mU: LNU],[dys: 245285, Uos: "Failure Frame", mU: LNU],[dys: 271026, Uos: "Taisho Era Contract Marriage", mU: LNU]];def sNU = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def vR = sNU == "IMDb" ? "tt${id}" : id;def oi = n;rK.each {if (it.dys == vR && it.mU == sNU) {oi = it.Uos}};def tFb = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def we = oi.replaceAll(tFb.collect { "\\" + it }.join('|'), '');we = we.replaceAll(/(\s|\.)*$/, '');we}{" ("}{y}{")"}{def sNU = id == tmdbid ? "TheMovieDB" : "IMDb";def Zy = ["TheMovieDB": "tmdbid","IMDb": "imdbid"];def yy = Zy[sNU];def vR = sNU == "IMDb" ? "tt${id}" : id;" [${yy}-${vR}]/"}{def RXO = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def uRh = RXO.find { YnO ->  fn.contains(YnO) } ?: "";def JT = any {(fn =~ /^\[(.*?)\]/)[0][1]} {uRh} {group} {""};JT ? "[$JT] " : ""}{def LNU = "TheMovieDB::TV";def rK = [[dys: 68854, Uos: "From Me to You", mU: LNU],[dys: 229743, Uos: "VTuber Legend", mU: LNU],[dys: 234538, Uos: "Demon Lord 2099", mU: LNU],[dys: 237045, Uos: "Cherry Magic!", mU: LNU],[dys: 240633, Uos: "A Journey Through Another World", mU: LNU],[dys: 245285, Uos: "Failure Frame", mU: LNU],[dys: 271026, Uos: "Taisho Era Contract Marriage", mU: LNU]];def sNU = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def vR = sNU == "IMDb" ? "tt${id}" : id;def oi = n;rK.each {if (it.dys == vR && it.mU == sNU) {oi = it.Uos}};def tFb = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def we = oi.replaceAll(tFb.collect { "\\" + it }.join('|'), '');we = we.replaceAll(/(\s|\.)*$/, '');we}{" ("}{y}{")"}{" ["}{def YKG = [[mzJ: "ABEMA", QRD: ["ABEMA"]],[mzJ: "Bilibili.tv", QRD: ["BILI", "B-Global", "BiliIntl", "B-Site", "BiliCN"]],[mzJ: "Hulu", QRD: ["HULU"]],[mzJ: "iQIYI", QRD: ["IQ.WEB-DL", "IQIYI"]],[mzJ: "MeWatch", QRD: ["MW.WEB-DL"]],[mzJ: "Netflix", QRD: ["NF.WEB-DL", "NF WEB"]],[mzJ: "Prime Video", QRD: ["AMZN"]],[mzJ: "Shahid", QRD: ["SHAHID"]],[mzJ: "TVer", QRD: ["TVER"]],[mzJ: "U-NEXT", QRD: ["UNEXT"]],[mzJ: "YouTube", QRD: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def qB = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def TPt = ["Erai-raws", "SubsPlease"];def rg = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def Ok = any {def phZ = YKG.find { ml ->  ml.QRD.find { LM ->  fn.contains(LM) } }?.QRD.first() ?: "";phZ = phZ.replace(".WEB-DL", "");phZ ? "${phZ}.WEB-DL" : ""} {source} {qB.find { SEP ->  group == SEP || rg == SEP } ? "WEBRip" : ""} {def lC = TPt.find { aF ->  group == aF || rg == aF} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : lC} {vs} {""};Ok ? "$Ok " : ""}{def _w = bitdepth ? " ${bitdepth}bit" : "";"$resolution $vcf $_w, $ac"}{" "}{af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0')}{def QLR = " Dub";def FCE = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : QLR;FCE = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : FCE;FCE}{def Bk = any { audioLanguages.size() } { 0 };def FCE = Bk > 2 ? " MAud" : Bk > 1 ? " DAud" : null;def dh = Bk > 5 ? audioLanguages.take(5) : audioLanguages;FCE ? FCE + dh.joining(" ", " (", "").upper() + (Bk > 5 ? " ...)" : ")") : ""}{def Ag = any { textLanguages.size() } { 0 };def FCE = Ag > 2 ? ", MSub" : Ag > 1 ? ", DSub" : null;def dh = Ag > 5 ? textLanguages.take(5) : textLanguages;FCE ? FCE + dh.joining(" ", " (", "").upper() + (Ag > 5 ? " ...)" : ")") : ""}{"]["}{crc32.upper()}{"]"}{def WzQ = ["ass", "srt", "ssa", "vtt", "ttml"];def oT = ["name": "." + lang.name,"iso3b": "." + lang.ISO3B,"iso3": "." +lang.ISO3,"iso2": "." + lang.ISO2];def IE = subt;oT.values().each { yBo -> if (IE.contains(yBo)) {IE = IE.replace(yBo, "")}};WzQ.contains(ext) ? oT.iso3b + IE : ""}{def WzQ = ["jpg", "jpeg", "png", "bmp"];WzQ.contains(ext) ? "-thumb" : ""}