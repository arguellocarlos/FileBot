{def mpM = System.getProperty("user.name");def HP = "/run/media/${mpM}";def WAh = "$HP/Videos";def jQo = [home,"$HP/Data","$HP/Music","$HP/Videos","$HP/Games","$HP/Books"].collect { it as File }.sort { fA, kC ->  fA.exists() <=> kC.exists() ?: fA.diskSpace <=> kC.diskSpace }.last();def W_ = WAh ? WAh : jQo;"$W_/"}{"Videos/"}{def nrE = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","sex", "lgbt", "explicit", "adult animation", "adult content"];def _I = "TheMovieDB::TV";def yKH = [[271026, _I],[220118, _I],[ 74180, _I]];def Lq = [[236530, _I]];def Xd = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def ls = Xd == "IMDb" ? "tt${id}" : id;def SoA = any { info.adult } { false };def Sjn = yKH.find { it[0] == ls && it[1] == Xd } != null;def xWW = Lq.find { it[0] == ls && it[1] == Xd } != null;def ZP = info.Keywords.findAll { it in nrE } || Sjn || SoA;ZP = xWW ? false : ZP;ZP ? "R18+ " : ""}{def Gb = ["CN", "JP", "KR", "KP", "TW", "HK"];def Pag = ["aeni", "donghua", "anime"];def Gk = any {anime} || info.Keywords.findAll { it in Pag } || (Gb.contains(country) && genres =~ /Animation/);Gk ? "Anime Movies/" : "Movies/"}{def _I = "TheMovieDB::TV";def SeW = [[mVm: 68854, vp: "From Me to You", mm: _I],[mVm: 94904, vp: "My Next Life as a Villainess", mm: _I],[mVm: 229743, vp: "VTuber Legend", mm: _I],[mVm: 234538, vp: "Demon Lord 2099", mm: _I],[mVm: 237045, vp: "Cherry Magic!", mm: _I],[mVm: 240633, vp: "A Journey Through Another World", mm: _I],[mVm: 245285, vp: "Failure Frame", mm: _I],[mVm: 271026, vp: "Taisho Era Contract Marriage", mm: _I]];def Xd = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def ls = Xd == "IMDb" ? "tt${id}" : id;def A_ = n;SeW.each {if (it.mVm == ls && it.mm == Xd) {A_ = it.vp}};def bDB = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def pL = A_.replaceAll(bDB.collect { "\\" + it }.join('|'), '');pL = pL.replaceAll(/(\s|\.)*$/, '');pL}{" ("}{y}{")"}{def Xd = id == tmdbid ? "TheMovieDB" : "IMDb";def GeU = ["TheMovieDB": "tmdbid","IMDb": "imdbid"];def PwT = GeU[Xd];def ls = Xd == "IMDb" ? "tt${id}" : id;" [${PwT}-${ls}]/"}{def WH = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def ERn = WH.find { Jg ->  fn.contains(Jg) } ?: "";def Dsw = any {(fn =~ /^\[(.*?)\]/)[0][1]} {ERn} {group} {""};Dsw ? "[$Dsw] " : ""}{def _I = "TheMovieDB::TV";def SeW = [[mVm: 68854, vp: "From Me to You", mm: _I],[mVm: 94904, vp: "My Next Life as a Villainess", mm: _I],[mVm: 229743, vp: "VTuber Legend", mm: _I],[mVm: 234538, vp: "Demon Lord 2099", mm: _I],[mVm: 237045, vp: "Cherry Magic!", mm: _I],[mVm: 240633, vp: "A Journey Through Another World", mm: _I],[mVm: 245285, vp: "Failure Frame", mm: _I],[mVm: 271026, vp: "Taisho Era Contract Marriage", mm: _I]];def Xd = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def ls = Xd == "IMDb" ? "tt${id}" : id;def A_ = n;SeW.each {if (it.mVm == ls && it.mm == Xd) {A_ = it.vp}};def bDB = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def pL = A_.replaceAll(bDB.collect { "\\" + it }.join('|'), '');pL = pL.replaceAll(/(\s|\.)*$/, '');pL}{" ("}{y}{")"}{" ["}{def dAs = [[INo: "ABEMA", eP: ["ABEMA"]],[INo: "Bilibili.tv", eP: ["BILI", "B-Global", "BiliIntl", "B-Site", "BiliCN"]],[INo: "Hulu", eP: ["HULU"]],[INo: "iQIYI", eP: ["IQ.WEB-DL", "IQIYI"]],[INo: "Laftel.tv", eP: ["LAFTEL", "LFTL"]],[INo: "MeWatch", eP: ["MW.WEB-DL"]],[INo: "Netflix", eP: ["NF.WEB-DL", "NF WEB"]],[INo: "Prime Video", eP: ["AMZN"]],[INo: "Shahid", eP: ["SHAHID"]],[INo: "TVer", eP: ["TVER"]],[INo: "U-NEXT", eP: ["UNEXT"]],[INo: "YouTube", eP: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def Vj = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def cA = ["Erai-raws", "SubsPlease"];def Dm = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def Wk = any {def Ol = dAs.find { Lls ->  Lls.eP.find { NEB ->  fn.contains(NEB) } }?.eP.fA() ?: "";Ol = Ol.replace(".WEB-DL", "");Ol ? "${Ol}.WEB-DL" : ""} {source} {Vj.find { FZW ->  group == FZW || Dm == FZW } ? "WEBRip" : ""} {def gms = cA.find { mi ->  group == mi || Dm == mi} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : gms} {vs} {""};Wk ? "$Wk " : ""}{def SCs = bitdepth ? " ${bitdepth}bit" : "";"$resolution $vcf $SCs, $ac"}{" "}{af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0')}{def QIa = " Dub";def jmm = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : QIa;jmm = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : jmm;jmm}{def lZ = any { audioLanguages.size() } { 0 };def jmm = lZ > 2 ? " MAud" : lZ > 1 ? " DAud" : null;def XhZ = lZ > 5 ? audioLanguages.take(5) : audioLanguages;jmm ? jmm + XhZ.joining(" ", " (", "").upper() + (lZ > 5 ? " ...)" : ")") : ""}{def OJ = any { textLanguages.size() } { 0 };def jmm = OJ > 2 ? ", MSub" : OJ > 1 ? ", DSub" : null;def XhZ = OJ > 5 ? textLanguages.take(5) : textLanguages;jmm ? jmm + XhZ.joining(" ", " (", "").upper() + (OJ > 5 ? " ...)" : ")") : ""}{"]["}{crc32.upper()}{"]"}{def fl = ["name": "." + lang.name,"iso3b": "." + lang.ISO3B,"iso3": "." +lang.ISO3,"iso2": "." + lang.ISO2];def BvK = subt;fl.values().each { sHa -> if (BvK.contains(sHa)) {BvK = BvK.replace(sHa, "")}};f.subtitle ? fl.iso3b + BvK : ""}{f.image ? "-thumb" : ""}