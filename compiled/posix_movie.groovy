{def Azy = System.getProperty("user.name");def oX = "/run/media/${Azy}";def oDU = "$oX/Videos";def eWg = [home,"$oX/Data","$oX/Music","$oX/Videos","$oX/Games","$oX/Books"].collect { it as File }.sort { Hoa, VK ->  Hoa.exists() <=> VK.exists() ?: Hoa.diskSpace <=> VK.diskSpace }.last();def h_y = oDU ? oDU : eWg;"$h_y/"}{"Videos/"}{def Ca = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","hentai", "sex", "lgbt", "explicit", "adult animation", "adult content"];def PDO = [[271026, "TheMovieDB::TV"],[220118, "TheMovieDB::TV"]];def oIG = any { info.adult } { false };def JO = PDO.find { it[0] == id && it[1] == info.database } != null;def hgi = info.Keywords.findAll { it in Ca } || JO || oIG;hgi ? "R18+ " : ""}{def zc = ["CN", "JP", "KR", "KP", "TW", "HK"];def fMY = ["aeni", "donghua", "anime"];def IJP = any {anime} || info.Keywords.findAll { it in fMY } || (zc.contains(country) && genres =~ /Animation/);IJP ? "Anime Movies/" : "Movies/"}{def vhl = [[QN: 68854, Nr: "From Me to You", YyF: "TheMovieDB::TV"],[QN: 229743, Nr: "VTuber Legend", YyF: "TheMovieDB::TV"],[QN: 234538, Nr: "Demon Lord 2099", YyF: "TheMovieDB::TV"],[QN: 237045, Nr: "Cherry Magic!", YyF: "TheMovieDB::TV"],[QN: 240633, Nr: "A Journey Through Another World", YyF: "TheMovieDB::TV"],[QN: 245285, Nr: "Failure Frame", YyF: "TheMovieDB::TV"],[QN: 271026, Nr: "Taisho Era Contract Marriage", YyF: "TheMovieDB::TV"]];def HU = n;vhl.each {if (it.QN == tmdbid && it.YyF == info.database) {HU = it.Nr}};def fPF = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def OQe = HU.replaceAll(fPF.collect { "\\" + it }.join('|'), '');OQe = OQe.replaceAll(/(\s|\.)*$/, '');OQe}{" ("}{y}{") [tmdbid-"}{tmdbid}{"]/"}{def grx = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def Ru = grx.find { bA ->  fn.contains(bA) } ?: "";def Fnq = any {(fn =~ /^\[(.*?)\]/)[0][1]} {Ru} {group} {""};Fnq ? "[$Fnq] " : ""}{def vhl = [[QN: 68854, Nr: "From Me to You", YyF: "TheMovieDB::TV"],[QN: 229743, Nr: "VTuber Legend", YyF: "TheMovieDB::TV"],[QN: 234538, Nr: "Demon Lord 2099", YyF: "TheMovieDB::TV"],[QN: 237045, Nr: "Cherry Magic!", YyF: "TheMovieDB::TV"],[QN: 240633, Nr: "A Journey Through Another World", YyF: "TheMovieDB::TV"],[QN: 245285, Nr: "Failure Frame", YyF: "TheMovieDB::TV"],[QN: 271026, Nr: "Taisho Era Contract Marriage", YyF: "TheMovieDB::TV"]];def HU = n;vhl.each {if (it.QN == tmdbid && it.YyF == info.database) {HU = it.Nr}};def fPF = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def OQe = HU.replaceAll(fPF.collect { "\\" + it }.join('|'), '');OQe = OQe.replaceAll(/(\s|\.)*$/, '');OQe}{" ("}{y}{")"} [{def uci = [[bg: "ABEMA", iHm: ["ABEMA"]],[bg: "Bilibili.tv", iHm: ["B-Global", "BiliIntl", "BILI"]],[bg: "Hulu", iHm: ["HULU"]],[bg: "MeWatch", iHm: ["MW.WEB-DL"]],[bg: "Netflix", iHm: ["NF.WEB-DL", "NF WEB"]],[bg: "Prime Video", iHm: ["AMZN"]],[bg: "TVer", iHm: ["TVER"]],[bg: "Shahid", iHm: ["SHAHID"]],[bg: "U-NEXT", iHm: ["UNEXT"]],[bg: "YouTube", iHm: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def JQm = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def ES = ["Erai-raws", "SubsPlease"];def uf = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def Lc = any {def gVY = uci.find { xP ->  xP.iHm.find { qB ->  fn.contains(qB) } }?.iHm.first() ?: "";gVY = gVY.replace(".WEB-DL", "");gVY ? "${gVY}.WEB-DL" : ""} {source} {JQm.find { hlz ->  group == hlz || uf == hlz } ? "WEBRip" : ""} {def Cy = ES.find { DM ->  group == DM || uf == DM} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : Cy} {vs} {""};Lc ? "$Lc " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def Wk = " Dub";def fl = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : Wk;fl = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : fl;fl}{def yRN = any { audioLanguages.size() } { 0 };def fl = yRN > 2 ? " MAud" : yRN > 1 ? " DAud" : null;def xI = yRN > 5 ? audioLanguages.take(5) : audioLanguages;fl ? fl + xI.joining(" ", " (", "").upper() + (yRN > 5 ? " ...)" : ")") : ""}{def LU = any { textLanguages.size() } { 0 };def fl = LU > 2 ? ", MSub" : LU > 1 ? ", DSub" : null;def xI = LU > 5 ? textLanguages.take(5) : textLanguages;fl ? fl + xI.joining(" ", " (", "").upper() + (LU > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}