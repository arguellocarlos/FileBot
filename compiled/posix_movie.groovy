{def ii = System.getProperty("user.name");def qv = "/run/media/${ii}";def hSC = "$qv/Videos";def EE = [home,"$qv/Data","$qv/Music","$qv/Videos","$qv/Games","$qv/Books"].collect { it as File }.sort { OY, lzD ->  OY.exists() <=> lzD.exists() ?: OY.diskSpace <=> lzD.diskSpace }.last();def UZq = hSC ? hSC : EE;"$UZq/"}{def Rsb = /(CN|JP|KR|KP|TW|HK)/;def Udw = /(aeni|donghua|anime)/;def PWX = anime || info.Keywords =~ Udw || any {(genres =~ /Animation/ && country =~ Rsb)}{false} ? true : false;def bc = PWX ? "Videos/Anime " : "Videos/";"$bc" + "Movies/"}{def SpY = [[Yvh: 229743, pzB: "VTuber Legend"],[Yvh: 240633, pzB: "A Journey Through Another World"],[Yvh: 245285, pzB: "Failure Frame"],[Yvh: 237045, pzB: "Cherry Magic!"],[Yvh: 68854, pzB: "From Me to You"],[Yvh: 271026, pzB: "Taisho Era Contract Marriage"],[Yvh: 234538, pzB: "Demon Lord 2099"]];def Gva = n;SpY.each {if (it.Yvh == tmdbid && type.toString() != "Movie") {Gva = it.pzB}};def eA = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def OMn = Gva.replaceAll(eA.collect { "\\" + it }.join('|'), '');OMn = OMn.replaceAll(/(\s|\.)*$/, '');OMn}{" ("}{y}{") [tmdbid-"}{tmdbid}{"]/"}{def ZVK = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def mGJ = ZVK.find { wm ->  fn.contains(wm) } ?: "";def xte = any {(fn =~ /^\[(.*?)\]/)[0][1]} {mGJ} {group} {""};xte ? "[$xte] " : ""}{def SpY = [[Yvh: 229743, pzB: "VTuber Legend"],[Yvh: 240633, pzB: "A Journey Through Another World"],[Yvh: 245285, pzB: "Failure Frame"],[Yvh: 237045, pzB: "Cherry Magic!"],[Yvh: 68854, pzB: "From Me to You"],[Yvh: 271026, pzB: "Taisho Era Contract Marriage"],[Yvh: 234538, pzB: "Demon Lord 2099"]];def Gva = n;SpY.each {if (it.Yvh == tmdbid && type.toString() != "Movie") {Gva = it.pzB}};def eA = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def OMn = Gva.replaceAll(eA.collect { "\\" + it }.join('|'), '');OMn = OMn.replaceAll(/(\s|\.)*$/, '');OMn}{" ("}{y}{")"} [{def NHa = [[eu: "Bilibili.tv", AVe: ["B-Global", "BiliIntl", "BILI"]],[eu: "Prime Video", AVe: ["AMZN"]],[eu: "U-NEXT", AVe: ["UNEXT"]],[eu: "ABEMA", AVe: ["ABEMA"]],[eu: "Hulu", AVe: ["HULU"]],[eu: "Shahid", AVe: ["SHAHID"]],[eu: "YouTube", AVe: ["YT.WEB-DL", "YOUTUBE", "YTB"]],[eu: "Netflix", AVe: ["NF.WEB-DL", "NF WEB"]]];def rp = ["ASW", "Judas", "JRx7"];def oS = ["Erai-raws", "SubsPlease"];def eEU = (fn =~ /^\[(.*?)\]/)[0][1];def FaY = any {def Jvk = NHa.find { Hr ->  Hr.AVe.find { Qa ->  fn.contains(Qa) } }?.AVe.first() ?: "";Jvk = Jvk.replace(".WEB-DL", "");Jvk ? "${Jvk}.WEB-DL" : ""} {source} {rp.find { yt ->  group == yt || eEU == yt } ? "WEBRip" : ""} {oS.find { TV ->  group == TV || eEU == TV} ? "WEB-DL" : ""} {vs} {""};FaY ? "$FaY " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def ij = " Dub";def Db = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : ij;Db = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : Db;Db}{def oO = any { audioLanguages.size() } { 0 };def Db = oO > 2 ? " MAud" : oO > 1 ? " DAud" : null;def YJa = oO > 5 ? audioLanguages.take(5) : audioLanguages;Db ? Db + YJa.joining(" ", " (", "").upper() + (oO > 5 ? " ...)" : ")") : ""}{def fY = any { textLanguages.size() } { 0 };def Db = fY > 2 ? ", MSub" : fY > 1 ? ", DSub" : null;def YJa = fY > 5 ? textLanguages.take(5) : textLanguages;Db ? Db + YJa.joining(" ", " (", "").upper() + (fY > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}