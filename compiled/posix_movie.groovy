{def Duy = System.getProperty("user.name");def Dhw = "/run/media/${Duy}";def MvD = "$Dhw/Videos";def zAB = [home,"$Dhw/Data","$Dhw/Music","$Dhw/Videos","$Dhw/Games","$Dhw/Books"].collect { it as File }.sort { OD, jo ->  OD.exists() <=> jo.exists() ?: OD.diskSpace <=> jo.diskSpace }.last();def xzN = MvD ? MvD : zAB;"$xzN/"}{def JrJ = /(CN|JP|KR|KP|TW|HK)/;def qjO = /(aeni|donghua|anime)/;def qIJ = anime || info.Keywords =~ qjO || any {(genres =~ /Animation/ && country =~ JrJ)}{false} ? true : false;def kQL = qIJ ? "Videos/Anime " : "Videos/";"$kQL" + "Movies/"}{def _lA = [[eDH: 229743, dd: "VTuber Legend"],[eDH: 240633, dd: "A Journey Through Another World"],[eDH: 245285, dd: "Failure Frame"],[eDH: 237045, dd: "Cherry Magic!"],[eDH: 68854, dd: "From Me to You"],[eDH: 271026, dd: "Taisho Era Contract Marriage"],[eDH: 234538, dd: "Demon Lord 2099"]];def PBT = n;_lA.each {if (it.eDH == tmdbid && type.toString() != "Movie") {PBT = it.dd}};def sA = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def HBd = PBT.replaceAll(sA.collect { "\\" + it }.join('|'), '');HBd = HBd.replaceAll(/(\s|\.)*$/, '');HBd}{" ("}{y}{") [tmdbid-"}{tmdbid}{"]/"}{def QSi = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def al = QSi.find { pU ->  fn.contains(pU) } ?: "";def YB = any {(fn =~ /^\[(.*?)\]/)[0][1]} {al} {group} {""};YB ? "[$YB] " : ""}{def _lA = [[eDH: 229743, dd: "VTuber Legend"],[eDH: 240633, dd: "A Journey Through Another World"],[eDH: 245285, dd: "Failure Frame"],[eDH: 237045, dd: "Cherry Magic!"],[eDH: 68854, dd: "From Me to You"],[eDH: 271026, dd: "Taisho Era Contract Marriage"],[eDH: 234538, dd: "Demon Lord 2099"]];def PBT = n;_lA.each {if (it.eDH == tmdbid && type.toString() != "Movie") {PBT = it.dd}};def sA = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def HBd = PBT.replaceAll(sA.collect { "\\" + it }.join('|'), '');HBd = HBd.replaceAll(/(\s|\.)*$/, '');HBd}{" ("}{y}{")"} [{def PTa = [[nK: "Bilibili.tv", vS: ["B-Global", "BiliIntl", "BILI"]],[nK: "Prime Video", vS: ["AMZN"]],[nK: "U-NEXT", vS: ["UNEXT"]],[nK: "ABEMA", vS: ["ABEMA"]],[nK: "Hulu", vS: ["HULU"]],[nK: "Shahid", vS: ["SHAHID"]],[nK: "YouTube", vS: ["YT.WEB-DL", "YOUTUBE", "YTB"]],[nK: "Netflix", vS: ["NF.WEB-DL", "NF WEB"]]];def HPN = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def PS = ["Erai-raws", "SubsPlease"];def XX = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def QKn = any {def fZL = PTa.find { Qua ->  Qua.vS.find { Wx ->  fn.contains(Wx) } }?.vS.first() ?: "";fZL = fZL.replace(".WEB-DL", "");fZL ? "${fZL}.WEB-DL" : ""} {source} {HPN.find { oe ->  group == oe || XX == oe } ? "WEBRip" : ""} {def NEP = PS.find { Wt ->  group == Wt || XX == Wt} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : NEP} {vs} {""};QKn ? "$QKn " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def wn = " Dub";def uJx = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : wn;uJx = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : uJx;uJx}{def VSy = any { audioLanguages.size() } { 0 };def uJx = VSy > 2 ? " MAud" : VSy > 1 ? " DAud" : null;def Da = VSy > 5 ? audioLanguages.take(5) : audioLanguages;uJx ? uJx + Da.joining(" ", " (", "").upper() + (VSy > 5 ? " ...)" : ")") : ""}{def Swp = any { textLanguages.size() } { 0 };def uJx = Swp > 2 ? ", MSub" : Swp > 1 ? ", DSub" : null;def Da = Swp > 5 ? textLanguages.take(5) : textLanguages;uJx ? uJx + Da.joining(" ", " (", "").upper() + (Swp > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}