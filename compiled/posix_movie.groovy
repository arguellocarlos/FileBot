{def YdO = System.getProperty("user.name");def hd = "/run/media/${YdO}";def ZP_ = "$hd/Videos";def yy = [home,"$hd/Data","$hd/Music","$hd/Videos","$hd/Games","$hd/Books"].collect { it as File }.sort { FC, QhH ->  FC.exists() <=> QhH.exists() ?: FC.diskSpace <=> QhH.diskSpace }.last();def Rd = ZP_ ? ZP_ : yy;"$Rd/"}{def Aqs = /(CN|JP|KR|KP|TW|HK)/;def WJx = /(aeni|donghua|anime)/;def sk = anime || info.Keywords =~ WJx || any {(genres =~ /Animation/ && country =~ Aqs)}{false} ? true : false;def ouJ = sk ? "Videos/Anime " : "Videos/";"$ouJ" + "Movies/"}{def LZ = [[Hi: 229743, fKb: "VTuber Legend"],[Hi: 240633, fKb: "A Journey Through Another World"],[Hi: 245285, fKb: "Failure Frame"],[Hi: 237045, fKb: "Cherry Magic!"],[Hi: 68854, fKb: "From Me to You"],[Hi: 271026, fKb: "Taisho Era Contract Marriage"],[Hi: 234538, fKb: "Demon Lord 2099"]];def dv = n;LZ.each {if (it.Hi == tmdbid && type.toString() != "Movie") {dv = it.fKb}};def caZ = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def Kb = dv.replaceAll(caZ.collect { "\\" + it }.join('|'), '');Kb = Kb.replaceAll(/(\s|\.)*$/, '');Kb}{" ("}{y}{") [tmdbid-"}{tmdbid}{"]/"}{def pPL = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def Z_P = pPL.find { cJO ->  fn.contains(cJO) } ?: "";def rw = any {(fn =~ /^\[(.*?)\]/)[0][1]} {Z_P} {group} {""};rw ? "[$rw] " : ""}{def LZ = [[Hi: 229743, fKb: "VTuber Legend"],[Hi: 240633, fKb: "A Journey Through Another World"],[Hi: 245285, fKb: "Failure Frame"],[Hi: 237045, fKb: "Cherry Magic!"],[Hi: 68854, fKb: "From Me to You"],[Hi: 271026, fKb: "Taisho Era Contract Marriage"],[Hi: 234538, fKb: "Demon Lord 2099"]];def dv = n;LZ.each {if (it.Hi == tmdbid && type.toString() != "Movie") {dv = it.fKb}};def caZ = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def Kb = dv.replaceAll(caZ.collect { "\\" + it }.join('|'), '');Kb = Kb.replaceAll(/(\s|\.)*$/, '');Kb}{" ("}{y}{")"} [{def OfB = [[lWy: "Bilibili.tv", odf: ["B-Global", "BiliIntl", "BILI"]],[lWy: "Prime Video", odf: ["AMZN"]],[lWy: "U-NEXT", odf: ["UNEXT"]],[lWy: "ABEMA", odf: ["ABEMA"]],[lWy: "Hulu", odf: ["HULU"]],[lWy: "Shahid", odf: ["SHAHID"]],[lWy: "YouTube", odf: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def bO = ["ASW", "Judas"];def Pi = ["Erai-raws", "SubsPlease", "JRx7"];def dhZ = any {def AN = OfB.find { Gzw ->  Gzw.odf.find { mn ->  fn.contains(mn) } }?.odf.first() ?: "";AN = AN.replace("YT.WEB-DL", "YT");AN ? "${AN}.WEB-DL" : ""} {source} {bO.find { oqg ->  group == oqg } ? "WEBRip" : ""} {Pi.find { iAM ->  group == iAM } ? "WEB-DL" : ""} {""};dhZ ? "$dhZ " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def ogm = " Dub";def bR = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : ogm;bR = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : bR;bR}{def itU = any { audioLanguages.size() } { 0 };def bR = itU > 2 ? " MAud" : itU > 1 ? " DAud" : null;def mD = itU > 5 ? audioLanguages.take(5) : audioLanguages;bR ? bR + mD.joining(" ", " (", "").upper() + (itU > 5 ? " ...)" : ")") : ""}{def Em = any { textLanguages.size() } { 0 };def bR = Em > 2 ? ", MSub" : Em > 1 ? ", DSub" : null;def mD = Em > 5 ? textLanguages.take(5) : textLanguages;bR ? bR + mD.joining(" ", " (", "").upper() + (Em > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}