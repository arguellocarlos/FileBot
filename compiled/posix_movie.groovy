{def _S = System.getProperty("user.name");def ZPn = "/run/media/${_S}";def XG = "$ZPn/Videos";def WTW = [home,"$ZPn/Data","$ZPn/Music","$ZPn/Videos","$ZPn/Games","$ZPn/Books"].collect { it as File }.sort { lM, VH ->  lM.exists() <=> VH.exists() ?: lM.diskSpace <=> VH.diskSpace }.last();def oqk = XG ? XG : WTW;"$oqk/"}{"Videos/"}{def zbG = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","hentai", "sex", "lgbt", "explicit", "adult animation", "adult content"];def Vho = [271026,220118];def iH = any { info.adult } { false };def jJ = any { info.Keywords.findAll { it in zbG } } { id in Vho } { iH };jJ ? "R18+ " : ""}{def Ff = /(CN|JP|KR|KP|TW|HK)/;def hw = /(aeni|donghua|anime)/;def QO = anime || info.Keywords =~ hw || any {(genres =~ /Animation/ && country =~ Ff)}{false} ? true : false;QO ? "Anime Movies/" : "Movies/"}{def twP = [[HoW: 229743, lCa: "VTuber Legend"],[HoW: 240633, lCa: "A Journey Through Another World"],[HoW: 245285, lCa: "Failure Frame"],[HoW: 237045, lCa: "Cherry Magic!"],[HoW: 68854, lCa: "From Me to You"],[HoW: 271026, lCa: "Taisho Era Contract Marriage"],[HoW: 234538, lCa: "Demon Lord 2099"]];def a_u = n;twP.each {if (it.HoW == tmdbid && type.toString() != "Movie") {a_u = it.lCa}};def JHH = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def eD = a_u.replaceAll(JHH.collect { "\\" + it }.join('|'), '');eD = eD.replaceAll(/(\s|\.)*$/, '');eD}{" ("}{y}{") [tmdbid-"}{tmdbid}{"]/"}{def ony = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def _Bh = ony.find { YC ->  fn.contains(YC) } ?: "";def gK = any {(fn =~ /^\[(.*?)\]/)[0][1]} {_Bh} {group} {""};gK ? "[$gK] " : ""}{def twP = [[HoW: 229743, lCa: "VTuber Legend"],[HoW: 240633, lCa: "A Journey Through Another World"],[HoW: 245285, lCa: "Failure Frame"],[HoW: 237045, lCa: "Cherry Magic!"],[HoW: 68854, lCa: "From Me to You"],[HoW: 271026, lCa: "Taisho Era Contract Marriage"],[HoW: 234538, lCa: "Demon Lord 2099"]];def a_u = n;twP.each {if (it.HoW == tmdbid && type.toString() != "Movie") {a_u = it.lCa}};def JHH = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def eD = a_u.replaceAll(JHH.collect { "\\" + it }.join('|'), '');eD = eD.replaceAll(/(\s|\.)*$/, '');eD}{" ("}{y}{")"} [{def VOO = [[CQ: "ABEMA", uKr: ["ABEMA"]],[CQ: "Bilibili.tv", uKr: ["B-Global", "BiliIntl", "BILI"]],[CQ: "Hulu", uKr: ["HULU"]],[CQ: "MeWatch", uKr: ["MW.WEB-DL"]],[CQ: "Netflix", uKr: ["NF.WEB-DL", "NF WEB"]],[CQ: "Prime Video", uKr: ["AMZN"]],[CQ: "TVer", uKr: ["TVER"]],[CQ: "Shahid", uKr: ["SHAHID"]],[CQ: "U-NEXT", uKr: ["UNEXT"]],[CQ: "YouTube", uKr: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def awl = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def fX = ["Erai-raws", "SubsPlease"];def Wci = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def Xfq = any {def Gc = VOO.find { bLU ->  bLU.uKr.find { ze ->  fn.contains(ze) } }?.uKr.first() ?: "";Gc = Gc.replace(".WEB-DL", "");Gc ? "${Gc}.WEB-DL" : ""} {source} {awl.find { hBv ->  group == hBv || Wci == hBv } ? "WEBRip" : ""} {def ZS = fX.find { lJL ->  group == lJL || Wci == lJL} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : ZS} {vs} {""};Xfq ? "$Xfq " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def cjJ = " Dub";def HcC = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : cjJ;HcC = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : HcC;HcC}{def JOI = any { audioLanguages.size() } { 0 };def HcC = JOI > 2 ? " MAud" : JOI > 1 ? " DAud" : null;def nmi = JOI > 5 ? audioLanguages.take(5) : audioLanguages;HcC ? HcC + nmi.joining(" ", " (", "").upper() + (JOI > 5 ? " ...)" : ")") : ""}{def WKX = any { textLanguages.size() } { 0 };def HcC = WKX > 2 ? ", MSub" : WKX > 1 ? ", DSub" : null;def nmi = WKX > 5 ? textLanguages.take(5) : textLanguages;HcC ? HcC + nmi.joining(" ", " (", "").upper() + (WKX > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}