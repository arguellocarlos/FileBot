{def WD = System.getProperty("user.name");def DDX = "/run/media/${WD}";def WEA = "$DDX/Videos";def eb = [home,"$DDX/Data","$DDX/Music","$DDX/Videos","$DDX/Games","$DDX/Books"].collect { it as File }.sort { Nc, he ->  Nc.exists() <=> he.exists() ?: Nc.diskSpace <=> he.diskSpace }.last();def ZJT = WEA ? WEA : eb;"$ZJT/"}{"Videos/"}{def oJ = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","hentai", "sex", "lgbt", "explicit", "adult animation", "adult content"];def AR = [[271026, "TheMovieDB::TV"],[220118, "TheMovieDB::TV"]];def jWK = [[236530, "TheMovieDB::TV"]];def JCg = any { info.adult } { false };def gdZ = AR.find { it[0] == id && it[1] == info.DM } != null;def nua = jWK.find { it[0] == id && it[1] == info.DM } != null;gdZ = nua ? false : gdZ;def QSh = info.Keywords.findAll { it in oJ } || gdZ || JCg;QSh ? "R18+ " : ""}{def LrK = ["CN", "JP", "KR", "KP", "TW", "HK"];def dC = ["aeni", "donghua", "anime"];def tU = any {anime} || info.Keywords.findAll { it in dC } || (LrK.contains(country) && genres =~ /Animation/);tU ? "Anime Movies/" : "Movies/"}{def kVV = [[ktX: 68854, Hvb: "From Me to You", yy: "TheMovieDB::TV"],[ktX: 229743, Hvb: "VTuber Legend", yy: "TheMovieDB::TV"],[ktX: 234538, Hvb: "Demon Lord 2099", yy: "TheMovieDB::TV"],[ktX: 237045, Hvb: "Cherry Magic!", yy: "TheMovieDB::TV"],[ktX: 240633, Hvb: "A Journey Through Another World", yy: "TheMovieDB::TV"],[ktX: 245285, Hvb: "Failure Frame", yy: "TheMovieDB::TV"],[ktX: 271026, Hvb: "Taisho Era Contract Marriage", yy: "TheMovieDB::TV"]];def DM = any { info.DM } { "IMDb" };def lFc = n;kVV.each {if (it.ktX == id && it.yy == DM) {lFc = it.Hvb}};def ykc = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def LC = lFc.replaceAll(ykc.collect { "\\" + it }.join('|'), '');LC = LC.replaceAll(/(\s|\.)*$/, '');LC}{" ("}{y}{")"}{def rUE = any { info.DM } { "IMDb" };def hv = ["TheMovieDB": "tmdbid","TheTVDB::Movie": "tvdbid","IMDb": "imdbid"];def PoP = hv[rUE];def BN = rUE == "IMDb" ? "tt${id}" : id;" [${PoP}-${BN}]/"}{def wg = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def SJs = wg.find { JM ->  fn.contains(JM) } ?: "";def ML = any {(fn =~ /^\[(.*?)\]/)[0][1]} {SJs} {group} {""};ML ? "[$ML] " : ""}{def kVV = [[ktX: 68854, Hvb: "From Me to You", yy: "TheMovieDB::TV"],[ktX: 229743, Hvb: "VTuber Legend", yy: "TheMovieDB::TV"],[ktX: 234538, Hvb: "Demon Lord 2099", yy: "TheMovieDB::TV"],[ktX: 237045, Hvb: "Cherry Magic!", yy: "TheMovieDB::TV"],[ktX: 240633, Hvb: "A Journey Through Another World", yy: "TheMovieDB::TV"],[ktX: 245285, Hvb: "Failure Frame", yy: "TheMovieDB::TV"],[ktX: 271026, Hvb: "Taisho Era Contract Marriage", yy: "TheMovieDB::TV"]];def DM = any { info.DM } { "IMDb" };def lFc = n;kVV.each {if (it.ktX == id && it.yy == DM) {lFc = it.Hvb}};def ykc = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def LC = lFc.replaceAll(ykc.collect { "\\" + it }.join('|'), '');LC = LC.replaceAll(/(\s|\.)*$/, '');LC}{" ("}{y}{")"} [{def HlU = [[kpy: "ABEMA", GBx: ["ABEMA"]],[kpy: "Bilibili.tv", GBx: ["B-Global", "BiliIntl", "BILI"]],[kpy: "Hulu", GBx: ["HULU"]],[kpy: "MeWatch", GBx: ["MW.WEB-DL"]],[kpy: "Netflix", GBx: ["NF.WEB-DL", "NF WEB"]],[kpy: "Prime Video", GBx: ["AMZN"]],[kpy: "TVer", GBx: ["TVER"]],[kpy: "Shahid", GBx: ["SHAHID"]],[kpy: "U-NEXT", GBx: ["UNEXT"]],[kpy: "YouTube", GBx: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def Ib = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def gw = ["Erai-raws", "SubsPlease"];def EX = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def eGP = any {def jG = HlU.find { XTE ->  XTE.GBx.find { Wna ->  fn.contains(Wna) } }?.GBx.first() ?: "";jG = jG.replace(".WEB-DL", "");jG ? "${jG}.WEB-DL" : ""} {source} {Ib.find { Wna ->  group == Wna || EX == Wna } ? "WEBRip" : ""} {def jFJ = gw.find { Sc ->  group == Sc || EX == Sc} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : jFJ} {vs} {""};eGP ? "$eGP " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def gIU = " Dub";def uy = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : gIU;uy = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : uy;uy}{def _Qf = any { audioLanguages.size() } { 0 };def uy = _Qf > 2 ? " MAud" : _Qf > 1 ? " DAud" : null;def CA = _Qf > 5 ? audioLanguages.take(5) : audioLanguages;uy ? uy + CA.joining(" ", " (", "").upper() + (_Qf > 5 ? " ...)" : ")") : ""}{def Ou = any { textLanguages.size() } { 0 };def uy = Ou > 2 ? ", MSub" : Ou > 1 ? ", DSub" : null;def CA = Ou > 5 ? textLanguages.take(5) : textLanguages;uy ? uy + CA.joining(" ", " (", "").upper() + (Ou > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}