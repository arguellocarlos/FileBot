{def JRs = System.getProperty("user.name");def cx_ = "/run/media/${JRs}";def ta = "$cx_/Videos";def Kjj = [home,"$cx_/Data","$cx_/Music","$cx_/Videos","$cx_/Games","$cx_/Books"].collect { it as File }.sort { cYy, Zkh ->  cYy.exists() <=> Zkh.exists() ?: cYy.diskSpace <=> Zkh.diskSpace }.last();def JO = ta ? ta : Kjj;"$JO/"}{"Videos/"}{def rpM = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","hentai", "sex", "lgbt", "explicit", "adult animation", "adult content"];def El = [[271026, "TheMovieDB::TV"],[220118, "TheMovieDB::TV"]];def uUK = [[236530, "TheMovieDB::TV"]];def bU = any { info.adult } { false };def ixX = El.find { it[0] == id && it[1] == info.UE } != null;def Riw = uUK.find { it[0] == id && it[1] == info.UE } != null;ixX = Riw ? false : ixX;def JU = info.Keywords.findAll { it in rpM } || ixX || bU;JU ? "R18+ " : ""}{def QU = ["CN", "JP", "KR", "KP", "TW", "HK"];def IMo = ["aeni", "donghua", "anime"];def TuI = any {anime} || info.Keywords.findAll { it in IMo } || (QU.contains(country) && genres =~ /Animation/);TuI ? "Anime/" : "TV Series/"}{def RB = [[BtD: 68854, pN: "From Me to You", kC: "TheMovieDB::TV"],[BtD: 229743, pN: "VTuber Legend", kC: "TheMovieDB::TV"],[BtD: 234538, pN: "Demon Lord 2099", kC: "TheMovieDB::TV"],[BtD: 237045, pN: "Cherry Magic!", kC: "TheMovieDB::TV"],[BtD: 240633, pN: "A Journey Through Another World", kC: "TheMovieDB::TV"],[BtD: 245285, pN: "Failure Frame", kC: "TheMovieDB::TV"],[BtD: 271026, pN: "Taisho Era Contract Marriage", kC: "TheMovieDB::TV"]];def UE = any { info.UE } { "IMDb" };def prg = n;RB.each {if (it.BtD == id && it.kC == UE) {prg = it.pN}};def jn = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def Bz = prg.replaceAll(jn.collect { "\\" + it }.join('|'), '');Bz = Bz.replaceAll(/(\s|\.)*$/, '');Bz}{def wSm = [[ 68854, "TheMovieDB::TV"],[123542, "TheMovieDB::TV"],[204098, "TheMovieDB::TV"],[235973, "TheMovieDB::TV"],[239779, "TheMovieDB::TV"],[240125, "TheMovieDB::TV"],[257162, "TheMovieDB::TV"],[259140, "TheMovieDB::TV"],[262295, "TheMovieDB::TV"],[271026, "TheMovieDB::TV"],[273190, "TheMovieDB::TV"],[275695, "TheMovieDB::TV"]];def JdV = wSm.find { it[0] == id && it[1] == info.UE } != null;def zH = ["TheMovieDB::TV": "tmdbid","AniDB": "anidbid","TheTVDB": "tvdbid","TVmaze": "tvmazeid"];def iEL = zH[info.UE];JdV ? " ($y) [${iEL}-${id}]" : ""}/{episode.special ? 'Specials' : 'Season '+s}{def jn = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def Bz = sn.replaceAll(jn.collect { "\\" + it }.join('|'), '_');def jo_ = n.replaceAll(jn.collect { "\\" + it }.join('|'), '_');def cx_ = Bz.contains(jo_) ? "" : Bz;cx_ == 'Season '+ s ? "" : cx_ ? " - " + cx_ : ""}/{def xiK = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def vF = xiK.find { mg ->  fn.contains(mg) } ?: "";def mOz = any {(fn =~ /^\[(.*?)\]/)[0][1]} {vF} {group} {""};mOz ? "[$mOz] " : ""}{def RB = [[BtD: 68854, pN: "From Me to You", kC: "TheMovieDB::TV"],[BtD: 229743, pN: "VTuber Legend", kC: "TheMovieDB::TV"],[BtD: 234538, pN: "Demon Lord 2099", kC: "TheMovieDB::TV"],[BtD: 237045, pN: "Cherry Magic!", kC: "TheMovieDB::TV"],[BtD: 240633, pN: "A Journey Through Another World", kC: "TheMovieDB::TV"],[BtD: 245285, pN: "Failure Frame", kC: "TheMovieDB::TV"],[BtD: 271026, pN: "Taisho Era Contract Marriage", kC: "TheMovieDB::TV"]];def UE = any { info.UE } { "IMDb" };def prg = n;RB.each {if (it.BtD == id && it.kC == UE) {prg = it.pN}};def jn = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def Bz = prg.replaceAll(jn.collect { "\\" + it }.join('|'), '');Bz = Bz.replaceAll(/(\s|\.)*$/, '');Bz} - {s00e00}{def jn = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def Bz = t.replaceAll(jn.collect { "\\" + it }.join('|'), '_');def wB = any { e } { special };Bz = Bz.length() > 100 ? " " : " - $Bz ";Bz == " - Episode $wB " ? " " : Bz} [{def RUN = [[FJ: "ABEMA", om: ["ABEMA"]],[FJ: "Bilibili.tv", om: ["B-Global", "BiliIntl", "BILI"]],[FJ: "Hulu", om: ["HULU"]],[FJ: "MeWatch", om: ["MW.WEB-DL"]],[FJ: "Netflix", om: ["NF.WEB-DL", "NF WEB"]],[FJ: "Prime Video", om: ["AMZN"]],[FJ: "TVer", om: ["TVER"]],[FJ: "Shahid", om: ["SHAHID"]],[FJ: "U-NEXT", om: ["UNEXT"]],[FJ: "YouTube", om: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def GY = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def fSA = ["Erai-raws", "SubsPlease"];def nYk = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def XT = any {def UX = RUN.find { jRh ->  jRh.om.find { Dp ->  fn.contains(Dp) } }?.om.first() ?: "";UX = UX.replace(".WEB-DL", "");UX ? "${UX}.WEB-DL" : ""} {source} {GY.find { Lyz ->  group == Lyz || nYk == Lyz } ? "WEBRip" : ""} {def wD = fSA.find { qwr ->  group == qwr || nYk == qwr} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : wD} {vs} {""};XT ? "$XT " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def Ffm = " Dub";def eJu = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : Ffm;eJu = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : eJu;eJu}{def Hw = any { audioLanguages.size() } { 0 };def eJu = Hw > 2 ? " MAud" : Hw > 1 ? " DAud" : null;def vDE = Hw > 5 ? audioLanguages.take(5) : audioLanguages;eJu ? eJu + vDE.joining(" ", " (", "").upper() + (Hw > 5 ? " ...)" : ")") : ""}{def lrk = any { textLanguages.size() } { 0 };def eJu = lrk > 2 ? ", MSub" : lrk > 1 ? ", DSub" : null;def vDE = lrk > 5 ? textLanguages.take(5) : textLanguages;eJu ? eJu + vDE.joining(" ", " (", "").upper() + (lrk > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}