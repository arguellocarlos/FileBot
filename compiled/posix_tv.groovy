{def seU = System.getProperty("user.name");def Bqg = "/run/media/${seU}";def Xg = "$Bqg/Videos";def SjU = [home,"$Bqg/Data","$Bqg/Music","$Bqg/Videos","$Bqg/Games","$Bqg/Books"].collect { it as File }.sort { Gja, HJ ->  Gja.exists() <=> HJ.exists() ?: Gja.diskSpace <=> HJ.diskSpace }.last();def zC = Xg ? Xg : SjU;"$zC/"}{def Akk = /(CN|JP|KR|KP|TW|HK)/;def mm = /(aeni|donghua|anime)/;def IT_ = anime || info.Keywords =~ mm || (genres =~ /Animation/ && country =~ Akk) ? true : false;IT_ ? "Videos/Anime/" : "Videos/TV Series/"}{def inC = [[ID_: 229743, Iw: "VTuber Legend"],[ID_: 240633, Iw: "A Journey Through Another World"],[ID_: 245285, Iw: "Failure Frame"],[ID_: 237045, Iw: "Cherry Magic!"],[ID_: 68854, Iw: "From Me to You"],[ID_: 271026, Iw: "Taisho Era Contract Marriage"],[ID_: 234538, Iw: "Demon Lord 2099"]];def Egz = n;inC.each {if (it.ID_ == tmdbid && type.toString() != "Movie") {Egz = it.Iw}};def Xe = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def Wgm = Egz.replaceAll(Xe.collect { "\\" + it }.join('|'), '');Wgm = Wgm.replaceAll(/(\s|\.)*$/, '');Wgm}{def tT = [68854,235973,262295,259140,204098,239779,273190,271026,240125,275695,123542,257162];def Rb = tT.find { gTc ->  tmdbid == gTc } ?: "";Rb ? " ($y) [tmdbid-$Rb]" : ""}/{episode.special ? 'Specials' : 'Season '+s}{def Xe = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def Wgm = sn.replaceAll(Xe.collect { "\\" + it }.join('|'), '_');def qS = n.replaceAll(Xe.collect { "\\" + it }.join('|'), '_');def Qm = Wgm.contains(qS) ? "" : Wgm;Qm == 'Season '+ s ? "" : Qm ? " - " + Qm : ""}/{def Tgz = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def Us = Tgz.find { eo ->  fn.contains(eo) } ?: "";def OJn = any {(fn =~ /^\[(.*?)\]/)[0][1]} {Us} {group} {""};OJn ? "[$OJn] " : ""}{def inC = [[ID_: 229743, Iw: "VTuber Legend"],[ID_: 240633, Iw: "A Journey Through Another World"],[ID_: 245285, Iw: "Failure Frame"],[ID_: 237045, Iw: "Cherry Magic!"],[ID_: 68854, Iw: "From Me to You"],[ID_: 271026, Iw: "Taisho Era Contract Marriage"],[ID_: 234538, Iw: "Demon Lord 2099"]];def Egz = n;inC.each {if (it.ID_ == tmdbid && type.toString() != "Movie") {Egz = it.Iw}};def Xe = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def Wgm = Egz.replaceAll(Xe.collect { "\\" + it }.join('|'), '');Wgm = Wgm.replaceAll(/(\s|\.)*$/, '');Wgm} - {s00e00}{def Xe = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def Wgm = t.replaceAll(Xe.collect { "\\" + it }.join('|'), '_');Wgm.length() > 100 ? " " : " - $Wgm "} [{def GG = [[MIr: "Bilibili.tv", Imt: ["B-Global", "BiliIntl", "BILI"]],[MIr: "Prime Video", Imt: ["AMZN"]],[MIr: "U-NEXT", Imt: ["UNEXT"]],[MIr: "ABEMA", Imt: ["ABEMA"]],[MIr: "Hulu", Imt: ["HULU"]],[MIr: "Shahid", Imt: ["SHAHID"]],[MIr: "YouTube", Imt: ["YT.WEB-DL", "YOUTUBE", "YTB"]],[MIr: "Netflix", Imt: ["NF.WEB-DL", "NF WEB"]]];def gcQ = ["ASW", "Judas", "JRx7"];def gDH = ["Erai-raws", "SubsPlease"];def PV = (fn =~ /^\[(.*?)\]/)[0][1];def Bc = any {def NQm = GG.find { VwU ->  VwU.Imt.find { tW ->  fn.contains(tW) } }?.Imt.first() ?: "";NQm = NQm.replace(".WEB-DL", "");NQm ? "${NQm}.WEB-DL" : ""} {source} {gcQ.find { Onm ->  group == Onm || PV == Onm } ? "WEBRip" : ""} {gDH.find { JO ->  group == JO || PV == JO} ? "WEB-DL" : ""} {vs} {""};Bc ? "$Bc " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def PK = " Dub";def mzs = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : PK;mzs = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : mzs;mzs}{def WS = any { audioLanguages.size() } { 0 };def mzs = WS > 2 ? " MAud" : WS > 1 ? " DAud" : null;def ICn = WS > 5 ? audioLanguages.take(5) : audioLanguages;mzs ? mzs + ICn.joining(" ", " (", "").upper() + (WS > 5 ? " ...)" : ")") : ""}{def IMa = any { textLanguages.size() } { 0 };def mzs = IMa > 2 ? ", MSub" : IMa > 1 ? ", DSub" : null;def ICn = IMa > 5 ? textLanguages.take(5) : textLanguages;mzs ? mzs + ICn.joining(" ", " (", "").upper() + (IMa > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}