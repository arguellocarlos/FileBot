{def Ium = System.getProperty("user.name");def wH = "/run/media/${Ium}";def lt = "$wH/Videos";def mh = [home,"$wH/Data","$wH/Music","$wH/Videos","$wH/Games","$wH/Books"].collect { it as File }.sort { Zc, mZ ->  Zc.exists() <=> mZ.exists() ?: Zc.diskSpace <=> mZ.diskSpace }.last();def Xgl = lt ? lt : mh;"$Xgl/"}{"Videos/"}{def lYH = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","hentai", "sex", "lgbt", "explicit", "adult animation", "adult content"];def EK = [271026,220118];def BuJ = any { info.adult } { false };def eAZ = any { info.Keywords.findAll { it in lYH } } { id in EK } { BuJ };eAZ ? "R18+ " : ""}{def wO = /(CN|JP|KR|KP|TW|HK)/;def _H = /(aeni|donghua|anime)/;def wM = anime || info.Keywords =~ _H || (genres =~ /Animation/ && country =~ wO) ? true : false;wM ? "Anime/" : "TV Series/"}{def EP = [[Ev: 229743, UlD: "VTuber Legend"],[Ev: 240633, UlD: "A Journey Through Another World"],[Ev: 245285, UlD: "Failure Frame"],[Ev: 237045, UlD: "Cherry Magic!"],[Ev: 68854, UlD: "From Me to You"],[Ev: 271026, UlD: "Taisho Era Contract Marriage"],[Ev: 234538, UlD: "Demon Lord 2099"]];def JAb = n;EP.each {if (it.Ev == tmdbid && type.toString() != "Movie") {JAb = it.UlD}};def nWu = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def C_v = JAb.replaceAll(nWu.collect { "\\" + it }.join('|'), '');C_v = C_v.replaceAll(/(\s|\.)*$/, '');C_v}{def dun = [68854,235973,262295,259140,204098,239779,273190,271026,240125,275695,123542,257162];def xWG = dun.find { CK ->  tmdbid == CK } ?: "";xWG ? " ($y) [tmdbid-$xWG]" : ""}/{episode.special ? 'Specials' : 'Season '+s}{def nWu = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def C_v = sn.replaceAll(nWu.collect { "\\" + it }.join('|'), '_');def Pd = n.replaceAll(nWu.collect { "\\" + it }.join('|'), '_');def BQz = C_v.contains(Pd) ? "" : C_v;BQz == 'Season '+ s ? "" : BQz ? " - " + BQz : ""}/{def Sb = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def zK = Sb.find { Ux ->  fn.contains(Ux) } ?: "";def wP = any {(fn =~ /^\[(.*?)\]/)[0][1]} {zK} {group} {""};wP ? "[$wP] " : ""}{def EP = [[Ev: 229743, UlD: "VTuber Legend"],[Ev: 240633, UlD: "A Journey Through Another World"],[Ev: 245285, UlD: "Failure Frame"],[Ev: 237045, UlD: "Cherry Magic!"],[Ev: 68854, UlD: "From Me to You"],[Ev: 271026, UlD: "Taisho Era Contract Marriage"],[Ev: 234538, UlD: "Demon Lord 2099"]];def JAb = n;EP.each {if (it.Ev == tmdbid && type.toString() != "Movie") {JAb = it.UlD}};def nWu = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def C_v = JAb.replaceAll(nWu.collect { "\\" + it }.join('|'), '');C_v = C_v.replaceAll(/(\s|\.)*$/, '');C_v} - {s00e00}{def nWu = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def C_v = t.replaceAll(nWu.collect { "\\" + it }.join('|'), '_');def rcN = any { e } { special };C_v = C_v.length() > 100 ? " " : " - $C_v ";C_v == " - Episode $rcN " ? " " : C_v} [{def gL = [[gAP: "ABEMA", kI: ["ABEMA"]],[gAP: "Bilibili.tv", kI: ["B-Global", "BiliIntl", "BILI"]],[gAP: "Hulu", kI: ["HULU"]],[gAP: "MeWatch", kI: ["MW.WEB-DL"]],[gAP: "Netflix", kI: ["NF.WEB-DL", "NF WEB"]],[gAP: "Prime Video", kI: ["AMZN"]],[gAP: "TVer", kI: ["TVER"]],[gAP: "Shahid", kI: ["SHAHID"]],[gAP: "U-NEXT", kI: ["UNEXT"]],[gAP: "YouTube", kI: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def jOv = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def AvP = ["Erai-raws", "SubsPlease"];def Kj = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def Kfq = any {def yTI = gL.find { Gp ->  Gp.kI.find { OLq ->  fn.contains(OLq) } }?.kI.first() ?: "";yTI = yTI.replace(".WEB-DL", "");yTI ? "${yTI}.WEB-DL" : ""} {source} {jOv.find { lR ->  group == lR || Kj == lR } ? "WEBRip" : ""} {def WO = AvP.find { Ac ->  group == Ac || Kj == Ac} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : WO} {vs} {""};Kfq ? "$Kfq " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def _O = " Dub";def eHN = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : _O;eHN = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : eHN;eHN}{def IUk = any { audioLanguages.size() } { 0 };def eHN = IUk > 2 ? " MAud" : IUk > 1 ? " DAud" : null;def tJr = IUk > 5 ? audioLanguages.take(5) : audioLanguages;eHN ? eHN + tJr.joining(" ", " (", "").upper() + (IUk > 5 ? " ...)" : ")") : ""}{def NV = any { textLanguages.size() } { 0 };def eHN = NV > 2 ? ", MSub" : NV > 1 ? ", DSub" : null;def tJr = NV > 5 ? textLanguages.take(5) : textLanguages;eHN ? eHN + tJr.joining(" ", " (", "").upper() + (NV > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}