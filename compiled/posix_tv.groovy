{def ZHi = System.getProperty("user.name");def tfR = "/run/media/${ZHi}";def LBn = "$tfR/Videos";def QI = [home,"$tfR/Data","$tfR/Music","$tfR/Videos","$tfR/Games","$tfR/Books"].collect { it as File }.sort { qE, EK ->  qE.exists() <=> EK.exists() ?: qE.diskSpace <=> EK.diskSpace }.last();def nPT = LBn ? LBn : QI;"$nPT/"}{"Videos/"}{def HVz = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","hentai", "sex", "lgbt", "explicit", "adult animation", "adult content"];def ck = "TheMovieDB::TV";def SFY = [[271026, ck],[220118, ck]];def erN = [[236530, ck]];def w_i = any { info.adult } { false };def ud = SFY.find { it[0] == id && it[1] == info.vRa } != null;def vFs = erN.find { it[0] == id && it[1] == info.vRa } != null;ud = vFs ? false : ud;def vk = info.Keywords.findAll { it in HVz } || ud || w_i;vk ? "R18+ " : ""}{def xkM = ["CN", "JP", "KR", "KP", "TW", "HK"];def ySo = ["aeni", "donghua", "anime"];def q_ = any {anime} || info.Keywords.findAll { it in ySo } || (xkM.contains(country) && genres =~ /Animation/);q_ ? "Anime/" : "TV Series/"}{def ck = "TheMovieDB::TV";def xXN = [[QHI: 68854, lqW: "From Me to You", GJq: ck],[QHI: 229743, lqW: "VTuber Legend", GJq: ck],[QHI: 234538, lqW: "Demon Lord 2099", GJq: ck],[QHI: 237045, lqW: "Cherry Magic!", GJq: ck],[QHI: 240633, lqW: "A Journey Through Another World", GJq: ck],[QHI: 245285, lqW: "Failure Frame", GJq: ck],[QHI: 271026, lqW: "Taisho Era Contract Marriage", GJq: ck]];def vRa = any { info.vRa } { "IMDb" };def XiO = n;xXN.each {if (it.QHI == id && it.GJq == vRa) {XiO = it.lqW}};def TU = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def cRM = XiO.replaceAll(TU.collect { "\\" + it }.join('|'), '');cRM = cRM.replaceAll(/(\s|\.)*$/, '');cRM}{def ck = "TheMovieDB::TV";def UtH = [[ 68854, ck],[123542, ck],[204098, ck],[235973, ck],[239779, ck],[240125, ck],[257162, ck],[259140, ck],[262295, ck],[271026, ck],[273190, ck],[275695, ck]];def IJ = UtH.find { it[0] == id && it[1] == info.vRa } != null;def kO = ["TheMovieDB::TV": "tmdbid","AniDB": "anidbid","TheTVDB": "tvdbid","TVmaze": "tvmazeid"];def hXb = kO[info.vRa];IJ ? " ($y) [${hXb}-${id}]" : ""}{"/"}{episode.special ? 'Specials' : 'Season '+s}{def TU = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def cRM = sn.replaceAll(TU.collect { "\\" + it }.join('|'), '_');def Lul = n.replaceAll(TU.collect { "\\" + it }.join('|'), '_');def drS = cRM.contains(Lul) ? "" : cRM;drS == 'Season '+ s ? "" : drS ? " - " + drS : ""}{"/"}{def cSP = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def DO = cSP.find { YQp ->  fn.contains(YQp) } ?: "";def FG = any {(fn =~ /^\[(.*?)\]/)[0][1]} {DO} {group} {""};FG ? "[$FG] " : ""}{def ck = "TheMovieDB::TV";def xXN = [[QHI: 68854, lqW: "From Me to You", GJq: ck],[QHI: 229743, lqW: "VTuber Legend", GJq: ck],[QHI: 234538, lqW: "Demon Lord 2099", GJq: ck],[QHI: 237045, lqW: "Cherry Magic!", GJq: ck],[QHI: 240633, lqW: "A Journey Through Another World", GJq: ck],[QHI: 245285, lqW: "Failure Frame", GJq: ck],[QHI: 271026, lqW: "Taisho Era Contract Marriage", GJq: ck]];def vRa = any { info.vRa } { "IMDb" };def XiO = n;xXN.each {if (it.QHI == id && it.GJq == vRa) {XiO = it.lqW}};def TU = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def cRM = XiO.replaceAll(TU.collect { "\\" + it }.join('|'), '');cRM = cRM.replaceAll(/(\s|\.)*$/, '');cRM}{" - "}{s00e00}{def TU = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def cRM = t.replaceAll(TU.collect { "\\" + it }.join('|'), '_');def JFa = any { e } { special };cRM = cRM.length() > 100 ? " " : " - $cRM ";cRM == " - Episode $JFa " ? " " : cRM}{" ["}{def hC = [[rw: "ABEMA", wxv: ["ABEMA"]],[rw: "Bilibili.tv", wxv: ["B-Global", "BiliIntl", "BILI"]],[rw: "Hulu", wxv: ["HULU"]],[rw: "MeWatch", wxv: ["MW.WEB-DL"]],[rw: "Netflix", wxv: ["NF.WEB-DL", "NF WEB"]],[rw: "Prime Video", wxv: ["AMZN"]],[rw: "TVer", wxv: ["TVER"]],[rw: "Shahid", wxv: ["SHAHID"]],[rw: "U-NEXT", wxv: ["UNEXT"]],[rw: "YouTube", wxv: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def kBv = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def Io = ["Erai-raws", "SubsPlease"];def bCp = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def Pd = any {def Mov = hC.find { kYz ->  kYz.wxv.find { OqF ->  fn.contains(OqF) } }?.wxv.first() ?: "";Mov = Mov.replace(".WEB-DL", "");Mov ? "${Mov}.WEB-DL" : ""} {source} {kBv.find { dU ->  group == dU || bCp == dU } ? "WEBRip" : ""} {def kI = Io.find { xC ->  group == xC || bCp == xC} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : kI} {vs} {""};Pd ? "$Pd " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac}{" "}{af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def wbY = " Dub";def Yq = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : wbY;Yq = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : Yq;Yq}{def Mkt = any { audioLanguages.size() } { 0 };def Yq = Mkt > 2 ? " MAud" : Mkt > 1 ? " DAud" : null;def uy = Mkt > 5 ? audioLanguages.take(5) : audioLanguages;Yq ? Yq + uy.joining(" ", " (", "").upper() + (Mkt > 5 ? " ...)" : ")") : ""}{def Vnz = any { textLanguages.size() } { 0 };def Yq = Vnz > 2 ? ", MSub" : Vnz > 1 ? ", DSub" : null;def uy = Vnz > 5 ? textLanguages.take(5) : textLanguages;Yq ? Yq + uy.joining(" ", " (", "").upper() + (Vnz > 5 ? " ...)" : ")") : ""}{"]["}{crc32.upper()}{"]"}{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}