{def MCr = System.getProperty("user.name");def Zf = "/run/media/${MCr}";def FI = "$Zf/Videos";def Pj = [home,"$Zf/Data","$Zf/Music","$Zf/Videos","$Zf/Games","$Zf/Books"].collect { it as File }.sort { Tz, OQ_ ->  Tz.exists() <=> OQ_.exists() ?: Tz.diskSpace <=> OQ_.diskSpace }.last();def dA = FI ? FI : Pj;"$dA/"}{def FJE = /(CN|JP|KR|KP|TW|HK)/;def Yh = /(aeni|donghua|anime)/;def kE = anime || info.Keywords =~ Yh || (genres =~ /Animation/ && country =~ FJE) ? true : false;kE ? "Videos/Anime/" : "Videos/TV Series/"}{def CX = [[WF: 229743, HuI: "VTuber Legend"],[WF: 240633, HuI: "A Journey Through Another World"],[WF: 245285, HuI: "Failure Frame"],[WF: 237045, HuI: "Cherry Magic!"],[WF: 68854, HuI: "From Me to You"],[WF: 271026, HuI: "Taisho Era Contract Marriage"],[WF: 234538, HuI: "Demon Lord 2099"]];def cG = n;CX.each {if (it.WF == tmdbid && type.toString() != "Movie") {cG = it.HuI}};def OeZ = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def qU = cG.replaceAll(OeZ.collect { "\\" + it }.join('|'), '');qU = qU.replaceAll(/(\s|\.)*$/, '');qU}{def Jda = [68854,235973,262295,259140,204098,239779,273190,271026,240125,275695,123542,257162];def Kb = Jda.find { Zu ->  tmdbid == Zu } ?: "";Kb ? " ($y) [tmdbid-$Kb]" : ""}/{episode.special ? 'Specials' : 'Season '+s}{def OeZ = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def qU = sn.replaceAll(OeZ.collect { "\\" + it }.join('|'), '_');def PD = n.replaceAll(OeZ.collect { "\\" + it }.join('|'), '_');def Sj = qU.contains(PD) ? "" : qU;Sj == 'Season '+ s ? "" : Sj ? " - " + Sj : ""}/{def yf = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def aI = yf.find { bZS ->  fn.contains(bZS) } ?: "";def mZ = any {(fn =~ /^\[(.*?)\]/)[0][1]} {aI} {group} {""};mZ ? "[$mZ] " : ""}{def CX = [[WF: 229743, HuI: "VTuber Legend"],[WF: 240633, HuI: "A Journey Through Another World"],[WF: 245285, HuI: "Failure Frame"],[WF: 237045, HuI: "Cherry Magic!"],[WF: 68854, HuI: "From Me to You"],[WF: 271026, HuI: "Taisho Era Contract Marriage"],[WF: 234538, HuI: "Demon Lord 2099"]];def cG = n;CX.each {if (it.WF == tmdbid && type.toString() != "Movie") {cG = it.HuI}};def OeZ = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def qU = cG.replaceAll(OeZ.collect { "\\" + it }.join('|'), '');qU = qU.replaceAll(/(\s|\.)*$/, '');qU} - {s00e00}{def OeZ = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def qU = t.replaceAll(OeZ.collect { "\\" + it }.join('|'), '_');qU.length() > 100 ? " " : " - $qU "} [{def Uid = [[MZl: "Bilibili.tv", mH: ["B-Global", "BiliIntl", "BILI"]],[MZl: "Prime Video", mH: ["AMZN"]],[MZl: "U-NEXT", mH: ["UNEXT"]],[MZl: "ABEMA", mH: ["ABEMA"]],[MZl: "Hulu", mH: ["HULU"]],[MZl: "Shahid", mH: ["SHAHID"]],[MZl: "YouTube", mH: ["YT.WEB-DL", "YOUTUBE", "YTB"]],[MZl: "Netflix", mH: ["NF.WEB-DL", "NF WEB"]]];def rhl = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def BEI = ["Erai-raws", "SubsPlease"];def Qlu = (fn =~ /^\[(.*?)\]/)[0][1];def eOL = any {def kcM = Uid.find { VD ->  VD.mH.find { eA ->  fn.contains(eA) } }?.mH.first() ?: "";kcM = kcM.replace(".WEB-DL", "");kcM ? "${kcM}.WEB-DL" : ""} {source} {rhl.find { sE ->  group == sE || Qlu == sE } ? "WEBRip" : ""} {def Ic = BEI.find { IOD ->  group == IOD || Qlu == IOD} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : Ic} {vs} {""};eOL ? "$eOL " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def sw = " Dub";def EZ = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : sw;EZ = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : EZ;EZ}{def PL = any { audioLanguages.size() } { 0 };def EZ = PL > 2 ? " MAud" : PL > 1 ? " DAud" : null;def r_n = PL > 5 ? audioLanguages.take(5) : audioLanguages;EZ ? EZ + r_n.joining(" ", " (", "").upper() + (PL > 5 ? " ...)" : ")") : ""}{def vj = any { textLanguages.size() } { 0 };def EZ = vj > 2 ? ", MSub" : vj > 1 ? ", DSub" : null;def r_n = vj > 5 ? textLanguages.take(5) : textLanguages;EZ ? EZ + r_n.joining(" ", " (", "").upper() + (vj > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}