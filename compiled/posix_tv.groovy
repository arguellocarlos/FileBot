{def Ji = System.getProperty("user.name");def vq = "/run/media/${Ji}";def Aa = "$vq/Videos";def bs = [home,"$vq/Data","$vq/Music","$vq/Videos","$vq/Games","$vq/Books"].collect { it as File }.sort { G_, EEE ->  G_.exists() <=> EEE.exists() ?: G_.diskSpace <=> EEE.diskSpace }.last();def Qq = Aa ? Aa : bs;"$Qq/"}{"Videos/"}{def NV = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","hentai", "sex", "lgbt", "explicit", "adult animation", "adult content"];def mp = [[271026, "TheMovieDB::TV"],[220118, "TheMovieDB::TV"]];def Sn = any { info.adult } { false };def rgu = mp.find { it[0] == id && it[1] == info.database } != null;def xqt = info.Keywords.findAll { it in NV } || rgu || Sn;xqt ? "R18+ " : ""}{def qFW = ["CN", "JP", "KR", "KP", "TW", "HK"];def fsc = ["aeni", "donghua", "anime"];def AO = any {anime} || info.Keywords.findAll { it in fsc } || (qFW.contains(country) && genres =~ /Animation/);AO ? "Anime/" : "TV Series/"}{def PlU = [[UF: 68854, ak: "From Me to You", JV: "TheMovieDB::TV"],[UF: 229743, ak: "VTuber Legend", JV: "TheMovieDB::TV"],[UF: 234538, ak: "Demon Lord 2099", JV: "TheMovieDB::TV"],[UF: 237045, ak: "Cherry Magic!", JV: "TheMovieDB::TV"],[UF: 240633, ak: "A Journey Through Another World", JV: "TheMovieDB::TV"],[UF: 245285, ak: "Failure Frame", JV: "TheMovieDB::TV"],[UF: 271026, ak: "Taisho Era Contract Marriage", JV: "TheMovieDB::TV"]];def fIH = n;PlU.each {if (it.UF == tmdbid && it.JV == info.database) {fIH = it.ak}};def _A = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def mV = fIH.replaceAll(_A.collect { "\\" + it }.join('|'), '');mV = mV.replaceAll(/(\s|\.)*$/, '');mV}{def vwN = [[ 68854, "TheMovieDB::TV"],[123542, "TheMovieDB::TV"],[204098, "TheMovieDB::TV"],[235973, "TheMovieDB::TV"],[239779, "TheMovieDB::TV"],[240125, "TheMovieDB::TV"],[257162, "TheMovieDB::TV"],[259140, "TheMovieDB::TV"],[262295, "TheMovieDB::TV"],[271026, "TheMovieDB::TV"],[273190, "TheMovieDB::TV"],[275695, "TheMovieDB::TV"]];def QWa = vwN.find { it[0] == tmdbid && it[1] == info.database } != null;def OGl = ["TheMovieDB::TV": "tmdbid","AniDB": "anidbid","TheTVDB": "tvdbid","TVmaze": "tvmazeid"];def bU = OGl[info.database];QWa ? " ($y) [${bU}-${id}]" : ""}/{episode.special ? 'Specials' : 'Season '+s}{def _A = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def mV = sn.replaceAll(_A.collect { "\\" + it }.join('|'), '_');def nhD = n.replaceAll(_A.collect { "\\" + it }.join('|'), '_');def hE = mV.contains(nhD) ? "" : mV;hE == 'Season '+ s ? "" : hE ? " - " + hE : ""}/{def OK = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def DkQ = OK.find { KQ ->  fn.contains(KQ) } ?: "";def rhI = any {(fn =~ /^\[(.*?)\]/)[0][1]} {DkQ} {group} {""};rhI ? "[$rhI] " : ""}{def PlU = [[UF: 68854, ak: "From Me to You", JV: "TheMovieDB::TV"],[UF: 229743, ak: "VTuber Legend", JV: "TheMovieDB::TV"],[UF: 234538, ak: "Demon Lord 2099", JV: "TheMovieDB::TV"],[UF: 237045, ak: "Cherry Magic!", JV: "TheMovieDB::TV"],[UF: 240633, ak: "A Journey Through Another World", JV: "TheMovieDB::TV"],[UF: 245285, ak: "Failure Frame", JV: "TheMovieDB::TV"],[UF: 271026, ak: "Taisho Era Contract Marriage", JV: "TheMovieDB::TV"]];def fIH = n;PlU.each {if (it.UF == tmdbid && it.JV == info.database) {fIH = it.ak}};def _A = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def mV = fIH.replaceAll(_A.collect { "\\" + it }.join('|'), '');mV = mV.replaceAll(/(\s|\.)*$/, '');mV} - {s00e00}{def _A = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def mV = t.replaceAll(_A.collect { "\\" + it }.join('|'), '_');def Nbb = any { e } { special };mV = mV.length() > 100 ? " " : " - $mV ";mV == " - Episode $Nbb " ? " " : mV} [{def yHN = [[Shw: "ABEMA", OE: ["ABEMA"]],[Shw: "Bilibili.tv", OE: ["B-Global", "BiliIntl", "BILI"]],[Shw: "Hulu", OE: ["HULU"]],[Shw: "MeWatch", OE: ["MW.WEB-DL"]],[Shw: "Netflix", OE: ["NF.WEB-DL", "NF WEB"]],[Shw: "Prime Video", OE: ["AMZN"]],[Shw: "TVer", OE: ["TVER"]],[Shw: "Shahid", OE: ["SHAHID"]],[Shw: "U-NEXT", OE: ["UNEXT"]],[Shw: "YouTube", OE: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def ia = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def pF = ["Erai-raws", "SubsPlease"];def I_n = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def Ba = any {def sv = yHN.find { bnz ->  bnz.OE.find { DVr ->  fn.contains(DVr) } }?.OE.first() ?: "";sv = sv.replace(".WEB-DL", "");sv ? "${sv}.WEB-DL" : ""} {source} {ia.find { nz ->  group == nz || I_n == nz } ? "WEBRip" : ""} {def DQx = pF.find { fXo ->  group == fXo || I_n == fXo} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : DQx} {vs} {""};Ba ? "$Ba " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def QTE = " Dub";def iwE = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : QTE;iwE = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : iwE;iwE}{def Aj = any { audioLanguages.size() } { 0 };def iwE = Aj > 2 ? " MAud" : Aj > 1 ? " DAud" : null;def bok = Aj > 5 ? audioLanguages.take(5) : audioLanguages;iwE ? iwE + bok.joining(" ", " (", "").upper() + (Aj > 5 ? " ...)" : ")") : ""}{def FvX = any { textLanguages.size() } { 0 };def iwE = FvX > 2 ? ", MSub" : FvX > 1 ? ", DSub" : null;def bok = FvX > 5 ? textLanguages.take(5) : textLanguages;iwE ? iwE + bok.joining(" ", " (", "").upper() + (FvX > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}