{def VI = System.getProperty("user.name");def ki = "/run/media/${VI}";def No = "$ki/Videos";def PN = [home,"$ki/Data","$ki/Music","$ki/Videos","$ki/Games","$ki/Books"].collect { it as File }.sort { AxU, mV ->  AxU.exists() <=> mV.exists() ?: AxU.diskSpace <=> mV.diskSpace }.last();def HZY = No ? No : PN;"$HZY/"}{"Videos/"}{def KkA = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","hentai", "sex", "lgbt", "explicit", "adult animation", "adult content"];def _bJ = [271026,220118];def XW = any { info.adult } { false };def AY = any { info.Keywords.findAll { it in KkA } } { id in _bJ } { XW };AY ? "R18+ " : ""}{def TH = ["CN", "JP", "KR", "KP", "TW", "HK"];def bPl = ["aeni", "donghua", "anime"];def tg = any { anime } { info.Keywords.findAll { it in bPl } } { TH.contains(country) } { false };tg && genres =~ /Animation/ ? "Anime/" : "TV Series/"}{def jcH = [[tY: 229743, hZr: "VTuber Legend"],[tY: 240633, hZr: "A Journey Through Another World"],[tY: 245285, hZr: "Failure Frame"],[tY: 237045, hZr: "Cherry Magic!"],[tY: 68854, hZr: "From Me to You"],[tY: 271026, hZr: "Taisho Era Contract Marriage"],[tY: 234538, hZr: "Demon Lord 2099"]];def jZ = n;jcH.each {if (it.tY == tmdbid && type.toString() != "Movie") {jZ = it.hZr}};def JeC = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def ZRO = jZ.replaceAll(JeC.collect { "\\" + it }.join('|'), '');ZRO = ZRO.replaceAll(/(\s|\.)*$/, '');ZRO}{def zCx = [68854,235973,262295,259140,204098,239779,273190,271026,240125,275695,123542,257162];def HV = zCx.find { nb ->  tmdbid == nb } ?: "";HV ? " ($y) [tmdbid-$HV]" : ""}/{episode.special ? 'Specials' : 'Season '+s}{def JeC = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def ZRO = sn.replaceAll(JeC.collect { "\\" + it }.join('|'), '_');def RlV = n.replaceAll(JeC.collect { "\\" + it }.join('|'), '_');def Tbn = ZRO.contains(RlV) ? "" : ZRO;Tbn == 'Season '+ s ? "" : Tbn ? " - " + Tbn : ""}/{def cXh = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def sv = cXh.find { WI ->  fn.contains(WI) } ?: "";def nQq = any {(fn =~ /^\[(.*?)\]/)[0][1]} {sv} {group} {""};nQq ? "[$nQq] " : ""}{def jcH = [[tY: 229743, hZr: "VTuber Legend"],[tY: 240633, hZr: "A Journey Through Another World"],[tY: 245285, hZr: "Failure Frame"],[tY: 237045, hZr: "Cherry Magic!"],[tY: 68854, hZr: "From Me to You"],[tY: 271026, hZr: "Taisho Era Contract Marriage"],[tY: 234538, hZr: "Demon Lord 2099"]];def jZ = n;jcH.each {if (it.tY == tmdbid && type.toString() != "Movie") {jZ = it.hZr}};def JeC = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def ZRO = jZ.replaceAll(JeC.collect { "\\" + it }.join('|'), '');ZRO = ZRO.replaceAll(/(\s|\.)*$/, '');ZRO} - {s00e00}{def JeC = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def ZRO = t.replaceAll(JeC.collect { "\\" + it }.join('|'), '_');def wm = any { e } { special };ZRO = ZRO.length() > 100 ? " " : " - $ZRO ";ZRO == " - Episode $wm " ? " " : ZRO} [{def hep = [[Sfk: "ABEMA", xih: ["ABEMA"]],[Sfk: "Bilibili.tv", xih: ["B-Global", "BiliIntl", "BILI"]],[Sfk: "Hulu", xih: ["HULU"]],[Sfk: "MeWatch", xih: ["MW.WEB-DL"]],[Sfk: "Netflix", xih: ["NF.WEB-DL", "NF WEB"]],[Sfk: "Prime Video", xih: ["AMZN"]],[Sfk: "TVer", xih: ["TVER"]],[Sfk: "Shahid", xih: ["SHAHID"]],[Sfk: "U-NEXT", xih: ["UNEXT"]],[Sfk: "YouTube", xih: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def Tf = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def RM = ["Erai-raws", "SubsPlease"];def RdS = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def tIR = any {def XQF = hep.find { KFA ->  KFA.xih.find { yo ->  fn.contains(yo) } }?.xih.first() ?: "";XQF = XQF.replace(".WEB-DL", "");XQF ? "${XQF}.WEB-DL" : ""} {source} {Tf.find { JV ->  group == JV || RdS == JV } ? "WEBRip" : ""} {def wL = RM.find { RL ->  group == RL || RdS == RL} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : wL} {vs} {""};tIR ? "$tIR " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def oQ = " Dub";def OGH = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : oQ;OGH = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : OGH;OGH}{def Pux = any { audioLanguages.size() } { 0 };def OGH = Pux > 2 ? " MAud" : Pux > 1 ? " DAud" : null;def biz = Pux > 5 ? audioLanguages.take(5) : audioLanguages;OGH ? OGH + biz.joining(" ", " (", "").upper() + (Pux > 5 ? " ...)" : ")") : ""}{def Qdq = any { textLanguages.size() } { 0 };def OGH = Qdq > 2 ? ", MSub" : Qdq > 1 ? ", DSub" : null;def biz = Qdq > 5 ? textLanguages.take(5) : textLanguages;OGH ? OGH + biz.joining(" ", " (", "").upper() + (Qdq > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}