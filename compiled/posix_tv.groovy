{def ti_ = System.getProperty("user.name");def jo = "/run/media/${ti_}";def YH = "$jo/Videos";def BJm = [home,"$jo/Data","$jo/Music","$jo/Videos","$jo/Games","$jo/Books"].collect { it as File }.sort { rM, lB ->  rM.exists() <=> lB.exists() ?: rM.diskSpace <=> lB.diskSpace }.last();def UB = YH ? YH : BJm;"$UB/"}{def ER = /(CN|JP|KR|KP|TW|HK)/;def Hz = /(aeni|donghua|anime)/;def VMn = anime || info.Keywords =~ Hz || (genres =~ /Animation/ && country =~ ER) ? true : false;VMn ? "Videos/Anime/" : "Videos/TV Series/"}{def VeT = [[rq: 229743, lH: "VTuber Legend"],[rq: 240633, lH: "A Journey Through Another World"],[rq: 245285, lH: "Failure Frame"],[rq: 237045, lH: "Cherry Magic!"],[rq: 68854, lH: "From Me to You"],[rq: 271026, lH: "Taisho Era Contract Marriage"],[rq: 234538, lH: "Demon Lord 2099"]];def Ekc = n;VeT.each {if (it.rq == tmdbid && type.toString() != "Movie") {Ekc = it.lH}};def Tf = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def NYR = Ekc.replaceAll(Tf.collect { "\\" + it }.join('|'), '');NYR = NYR.replaceAll(/(\s|\.)*$/, '');NYR}{def KY = [68854,235973,262295,259140,204098,239779,273190,271026,240125,275695,123542,257162];def sR = KY.find { viw ->  tmdbid == viw } ?: "";sR ? " ($y) [tmdbid-$sR]" : ""}/{episode.special ? 'Specials' : 'Season '+s}{def Tf = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def NYR = sn.replaceAll(Tf.collect { "\\" + it }.join('|'), '_');def jj = n.replaceAll(Tf.collect { "\\" + it }.join('|'), '_');def ao = NYR.contains(jj) ? "" : NYR;ao == 'Season '+ s ? "" : ao ? " - " + ao : ""}/{def xnO = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def PL = xnO.find { xev ->  fn.contains(xev) } ?: "";def eO = any {(fn =~ /^\[(.*?)\]/)[0][1]} {PL} {group} {""};eO ? "[$eO] " : ""}{def VeT = [[rq: 229743, lH: "VTuber Legend"],[rq: 240633, lH: "A Journey Through Another World"],[rq: 245285, lH: "Failure Frame"],[rq: 237045, lH: "Cherry Magic!"],[rq: 68854, lH: "From Me to You"],[rq: 271026, lH: "Taisho Era Contract Marriage"],[rq: 234538, lH: "Demon Lord 2099"]];def Ekc = n;VeT.each {if (it.rq == tmdbid && type.toString() != "Movie") {Ekc = it.lH}};def Tf = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def NYR = Ekc.replaceAll(Tf.collect { "\\" + it }.join('|'), '');NYR = NYR.replaceAll(/(\s|\.)*$/, '');NYR} - {s00e00}{def Tf = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def NYR = t.replaceAll(Tf.collect { "\\" + it }.join('|'), '_');NYR.length() > 100 ? " " : " - $NYR "} [{def Lr = [[uV: "Bilibili.tv", nfe: ["B-Global", "BiliIntl", "BILI"]],[uV: "Prime Video", nfe: ["AMZN"]],[uV: "U-NEXT", nfe: ["UNEXT"]],[uV: "ABEMA", nfe: ["ABEMA"]],[uV: "Hulu", nfe: ["HULU"]],[uV: "Shahid", nfe: ["SHAHID"]],[uV: "YouTube", nfe: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def gwr = ["ASW", "Judas"];def JfT = ["Erai-raws", "SubsPlease", "JRx7"];def IHK = any {def cRl = Lr.find { xTp ->  xTp.nfe.find { OJI ->  fn.contains(OJI) } }?.nfe.first() ?: "";cRl = cRl.replace("YT.WEB-DL", "YT");cRl ? "${cRl}.WEB-DL" : ""} {source} {gwr.find { ikJ ->  group == ikJ } ? "WEBRip" : ""} {JfT.find { RSU ->  group == RSU } ? "WEB-DL" : ""} {""};IHK ? "$IHK " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def TC = " Dub";def xA = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : TC;xA = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : xA;xA}{def Hk = any { audioLanguages.size() } { 0 };def xA = Hk > 2 ? " MAud" : Hk > 1 ? " DAud" : null;def fcA = Hk > 5 ? audioLanguages.take(5) : audioLanguages;xA ? xA + fcA.joining(" ", " (", "").upper() + (Hk > 5 ? " ...)" : ")") : ""}{def vi = any { textLanguages.size() } { 0 };def xA = vi > 2 ? ", MSub" : vi > 1 ? ", DSub" : null;def fcA = vi > 5 ? textLanguages.take(5) : textLanguages;xA ? xA + fcA.joining(" ", " (", "").upper() + (vi > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}