{def rS = System.getProperty("user.name");def iun = "/run/media/${rS}";def zYb = "$iun/Videos";def UZ = [home,"$iun/Data","$iun/Music","$iun/Videos","$iun/Games","$iun/Books"].collect { it as File }.sort { CO, DrU ->  CO.exists() <=> DrU.exists() ?: CO.diskSpace <=> DrU.diskSpace }.last();def EV = zYb ? zYb : UZ;"$EV/"}{"Videos/"}{def pV = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","sex", "lgbt", "explicit", "adult animation", "adult content"];def ER = "TheMovieDB::TV";def PD_ = [[271026, ER],[220118, ER],[ 74180, ER]];def Ucb = [[236530, ER]];def al = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def iDc = al == "IMDb" ? "tt${id}" : id;def NPZ = any { info.adult } { false };def mG = PD_.find { it[0] == iDc && it[1] == al } != null;def uQk = Ucb.find { it[0] == iDc && it[1] == al } != null;def iX = info.Keywords.findAll { it in pV } || mG || NPZ;iX = uQk ? false : iX;iX ? "R18+ " : ""}{def _q = ["CN", "JP", "KR", "KP", "TW", "HK"];def TvC = ["aeni", "donghua", "anime"];def kb = any {anime} || info.Keywords.findAll { it in TvC } || (_q.contains(country) && genres =~ /Animation/);kb ? "Anime/" : "TV Series/"}{def ER = "TheMovieDB::TV";def Eh = [[RdN: 68854, adh: "From Me to You", gyK: ER],[RdN: 94904, adh: "My Next Life as a Villainess", gyK: ER],[RdN: 229743, adh: "VTuber Legend", gyK: ER],[RdN: 234538, adh: "Demon Lord 2099", gyK: ER],[RdN: 237045, adh: "Cherry Magic!", gyK: ER],[RdN: 240633, adh: "A Journey Through Another World", gyK: ER],[RdN: 245285, adh: "Failure Frame", gyK: ER],[RdN: 271026, adh: "Taisho Era Contract Marriage", gyK: ER]];def al = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def iDc = al == "IMDb" ? "tt${id}" : id;def SLA = n;Eh.each {if (it.RdN == iDc && it.gyK == al) {SLA = it.adh}};def lCb = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def wjK = SLA.replaceAll(lCb.collect { "\\" + it }.join('|'), '');wjK = wjK.replaceAll(/(\s|\.)*$/, '');wjK}{def ER = "TheMovieDB::TV";def xp = [[ 68854, ER],[123542, ER],[204098, ER],[235973, ER],[239779, ER],[240125, ER],[257162, ER],[259140, ER],[262295, ER],[271026, ER],[273190, ER],[275695, ER]];def CSd = xp.find { it[0] == id && it[1] == info.database } != null;def WfY = ["TheMovieDB::TV": "tmdbid","AniDB": "anidbid","TheTVDB": "tvdbid","TVmaze": "tvmazeid"];def Ukl = WfY[info.database];CSd ? " ($y) [${Ukl}-${id}]" : ""}{"/"}{episode.special ? 'Specials' : 'Season '+s}{def lCb = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def wjK = sn.replaceAll(lCb.collect { "\\" + it }.join('|'), '_');def Xmc = n.replaceAll(lCb.collect { "\\" + it }.join('|'), '_');def lBz = wjK.contains(Xmc) ? "" : wjK;lBz == 'Season '+ s ? "" : lBz ? " - " + lBz : ""}{"/"}{def aL = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def Th = aL.find { Ii ->  fn.contains(Ii) } ?: "";def Dz = any {(fn =~ /^\[(.*?)\]/)[0][1]} {Th} {group} {""};Dz ? "[$Dz] " : ""}{def ER = "TheMovieDB::TV";def Eh = [[RdN: 68854, adh: "From Me to You", gyK: ER],[RdN: 94904, adh: "My Next Life as a Villainess", gyK: ER],[RdN: 229743, adh: "VTuber Legend", gyK: ER],[RdN: 234538, adh: "Demon Lord 2099", gyK: ER],[RdN: 237045, adh: "Cherry Magic!", gyK: ER],[RdN: 240633, adh: "A Journey Through Another World", gyK: ER],[RdN: 245285, adh: "Failure Frame", gyK: ER],[RdN: 271026, adh: "Taisho Era Contract Marriage", gyK: ER]];def al = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def iDc = al == "IMDb" ? "tt${id}" : id;def SLA = n;Eh.each {if (it.RdN == iDc && it.gyK == al) {SLA = it.adh}};def lCb = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def wjK = SLA.replaceAll(lCb.collect { "\\" + it }.join('|'), '');wjK = wjK.replaceAll(/(\s|\.)*$/, '');wjK}{" - "}{s00e00}{def lCb = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def wjK = t.replaceAll(lCb.collect { "\\" + it }.join('|'), '_');def nwe = any { e } { special };wjK = wjK.length() > 100 ? " " : " - $wjK ";wjK == " - Episode $nwe " ? " " : wjK}{" ["}{def sGZ = [[yF: "ABEMA", hGc: ["ABEMA"]],[yF: "Bilibili.tv", hGc: ["BILI", "B-Global", "BiliIntl", "B-Site", "BiliCN"]],[yF: "Hulu", hGc: ["HULU"]],[yF: "iQIYI", hGc: ["IQ.WEB-DL", "IQIYI"]],[yF: "MeWatch", hGc: ["MW.WEB-DL"]],[yF: "Netflix", hGc: ["NF.WEB-DL", "NF WEB"]],[yF: "Prime Video", hGc: ["AMZN"]],[yF: "Shahid", hGc: ["SHAHID"]],[yF: "TVer", hGc: ["TVER"]],[yF: "U-NEXT", hGc: ["UNEXT"]],[yF: "YouTube", hGc: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def TId = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def fb = ["Erai-raws", "SubsPlease"];def Agm = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def YD = any {def zU = sGZ.find { aUH ->  aUH.hGc.find { hl ->  fn.contains(hl) } }?.hGc.CO() ?: "";zU = zU.replace(".WEB-DL", "");zU ? "${zU}.WEB-DL" : ""} {source} {TId.find { cPK ->  group == cPK || Agm == cPK } ? "WEBRip" : ""} {def iXh = fb.find { Eg ->  group == Eg || Agm == Eg} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : iXh} {vs} {""};YD ? "$YD " : ""}{def Uf = bitdepth ? " ${bitdepth}bit" : "";"$resolution $vcf $Uf, $ac"}{" "}{af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0')}{def hMn = " Dub";def Gw = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : hMn;Gw = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : Gw;Gw}{def knR = any { audioLanguages.size() } { 0 };def Gw = knR > 2 ? " MAud" : knR > 1 ? " DAud" : null;def xq = knR > 5 ? audioLanguages.take(5) : audioLanguages;Gw ? Gw + xq.joining(" ", " (", "").upper() + (knR > 5 ? " ...)" : ")") : ""}{def Oq = any { textLanguages.size() } { 0 };def Gw = Oq > 2 ? ", MSub" : Oq > 1 ? ", DSub" : null;def xq = Oq > 5 ? textLanguages.take(5) : textLanguages;Gw ? Gw + xq.joining(" ", " (", "").upper() + (Oq > 5 ? " ...)" : ")") : ""}{"]["}{crc32.upper()}{"]"}{def vgo = ["name": "." + lang.name,"iso3b": "." + lang.ISO3B,"iso3": "." +lang.ISO3,"iso2": "." + lang.ISO2];def JA = subt;vgo.values().each { dny -> if (JA.contains(dny)) {JA = JA.replace(dny, "")}};f.subtitle ? vgo.iso3b + JA : ""}{f.image ? "-thumb" : ""}