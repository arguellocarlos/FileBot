{def go = "H:/";def iUs = [home,"D:/","E:/","F:/","G:/","H:/"].collect { it as File }.sort { ZOd, DWV ->  ZOd.exists() <=> DWV.exists() ?: ZOd.diskSpace <=> DWV.diskSpace }.last();def CZH = go ? go : iUs;"$CZH/"}{def au = /(CN|JP|KR|KP|TW|HK)/;def VJL = /(aeni|donghua|anime)/;def bP = anime || info.Keywords =~ VJL || any {(genres =~ /Animation/ && country =~ au)}{false} ? true : false;def IOM = bP ? "Videos/Anime " : "Videos/";"$IOM" + "Movies/"}{def Ud = [[UR: 229743, KPr: "VTuber Legend"],[UR: 240633, KPr: "A Journey Through Another World"],[UR: 245285, KPr: "Failure Frame"],[UR: 237045, KPr: "Cherry Magic!"],[UR: 68854, KPr: "From Me to You"],[UR: 271026, KPr: "Taisho Era Contract Marriage"],[UR: 234538, KPr: "Demon Lord 2099"]];def pG_ = n;Ud.each {if (it.UR == tmdbid && type.toString() != "Movie") {pG_ = it.KPr}};def pkz = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def QT = pG_.replaceAll(pkz.collect { "\\" + it }.join('|'), '');QT = QT.replaceAll(/(\s|\.)*$/, '');QT}{" ("}{y}{") [tmdbid-"}{tmdbid}{"]/"}{def lFA = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def zAu = lFA.find { rTM ->  fn.contains(rTM) } ?: "";def cs = any {(fn =~ /^\[(.*?)\]/)[0][1]} {zAu} {group} {""};cs ? "[$cs] " : ""}{def Ud = [[UR: 229743, KPr: "VTuber Legend"],[UR: 240633, KPr: "A Journey Through Another World"],[UR: 245285, KPr: "Failure Frame"],[UR: 237045, KPr: "Cherry Magic!"],[UR: 68854, KPr: "From Me to You"],[UR: 271026, KPr: "Taisho Era Contract Marriage"],[UR: 234538, KPr: "Demon Lord 2099"]];def pG_ = n;Ud.each {if (it.UR == tmdbid && type.toString() != "Movie") {pG_ = it.KPr}};def pkz = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def QT = pG_.replaceAll(pkz.collect { "\\" + it }.join('|'), '');QT = QT.replaceAll(/(\s|\.)*$/, '');QT}{" ("}{y}{")"} [{def pW = [[NP: "Bilibili.tv", ND_: ["B-Global", "BiliIntl", "BILI"]],[NP: "Prime Video", ND_: ["AMZN"]],[NP: "U-NEXT", ND_: ["UNEXT"]],[NP: "ABEMA", ND_: ["ABEMA"]],[NP: "Hulu", ND_: ["HULU"]],[NP: "Shahid", ND_: ["SHAHID"]],[NP: "YouTube", ND_: ["YT.WEB-DL", "YOUTUBE", "YTB"]],[NP: "Netflix", ND_: ["NF.WEB-DL", "NF WEB"]]];def jO = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def To = ["Erai-raws", "SubsPlease"];def eKU = (fn =~ /^\[(.*?)\]/)[0][1];def kv = any {def Nip = pW.find { ga ->  ga.ND_.find { nUp ->  fn.contains(nUp) } }?.ND_.first() ?: "";Nip = Nip.replace(".WEB-DL", "");Nip ? "${Nip}.WEB-DL" : ""} {source} {jO.find { Zn ->  group == Zn || eKU == Zn } ? "WEBRip" : ""} {def xlI = To.find { iD ->  group == iD || eKU == iD} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : xlI} {vs} {""};kv ? "$kv " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def SS = " Dub";def ub = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : SS;ub = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : ub;ub}{def Kz = any { audioLanguages.size() } { 0 };def ub = Kz > 2 ? " MAud" : Kz > 1 ? " DAud" : null;def ZLC = Kz > 5 ? audioLanguages.take(5) : audioLanguages;ub ? ub + ZLC.joining(" ", " (", "").upper() + (Kz > 5 ? " ...)" : ")") : ""}{def KdV = any { textLanguages.size() } { 0 };def ub = KdV > 2 ? ", MSub" : KdV > 1 ? ", DSub" : null;def ZLC = KdV > 5 ? textLanguages.take(5) : textLanguages;ub ? ub + ZLC.joining(" ", " (", "").upper() + (KdV > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}