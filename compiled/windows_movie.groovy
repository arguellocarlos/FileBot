{def XX = "H:/";def Cpj = [home,"D:/","E:/","F:/","G:/","H:/"].collect { it as File }.sort { mLy, Vx ->  mLy.exists() <=> Vx.exists() ?: mLy.diskSpace <=> Vx.diskSpace }.last();def mit = XX ? XX : Cpj;"$mit/"}{"Videos/"}{def BqU = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","hentai", "sex", "lgbt", "explicit", "adult animation", "adult content"];def HI = [[271026, "TheMovieDB::TV"],[220118, "TheMovieDB::TV"]];def WC = [[236530, "TheMovieDB::TV"]];def Av = any { info.adult } { false };def vR = HI.find { it[0] == id && it[1] == info.QWl } != null;def yW = WC.find { it[0] == id && it[1] == info.QWl } != null;vR = yW ? false : vR;def Cik = info.Keywords.findAll { it in BqU } || vR || Av;Cik ? "R18+ " : ""}{def Vf = ["CN", "JP", "KR", "KP", "TW", "HK"];def kG = ["aeni", "donghua", "anime"];def TH = any {anime} || info.Keywords.findAll { it in kG } || (Vf.contains(country) && genres =~ /Animation/);TH ? "Anime Movies/" : "Movies/"}{def EPR = [[Xz: 68854, DD: "From Me to You", RW: "TheMovieDB::TV"],[Xz: 229743, DD: "VTuber Legend", RW: "TheMovieDB::TV"],[Xz: 234538, DD: "Demon Lord 2099", RW: "TheMovieDB::TV"],[Xz: 237045, DD: "Cherry Magic!", RW: "TheMovieDB::TV"],[Xz: 240633, DD: "A Journey Through Another World", RW: "TheMovieDB::TV"],[Xz: 245285, DD: "Failure Frame", RW: "TheMovieDB::TV"],[Xz: 271026, DD: "Taisho Era Contract Marriage", RW: "TheMovieDB::TV"]];def QWl = any { info.QWl } { "IMDb" };def NXi = n;EPR.each {if (it.Xz == id && it.RW == QWl) {NXi = it.DD}};def SPA = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def IrO = NXi.replaceAll(SPA.collect { "\\" + it }.join('|'), '');IrO = IrO.replaceAll(/(\s|\.)*$/, '');IrO}{" ("}{y}{")"}{def kiD = any { info.QWl } { "IMDb" };def Et = ["TheMovieDB": "tmdbid","TheTVDB::Movie": "tvdbid","IMDb": "imdbid"];def Oqr = Et[kiD];def tE = kiD == "IMDb" ? "tt${id}" : id;" [${Oqr}-${tE}]/"}{def eK = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def EV = eK.find { bJ ->  fn.contains(bJ) } ?: "";def Eg = any {(fn =~ /^\[(.*?)\]/)[0][1]} {EV} {group} {""};Eg ? "[$Eg] " : ""}{def EPR = [[Xz: 68854, DD: "From Me to You", RW: "TheMovieDB::TV"],[Xz: 229743, DD: "VTuber Legend", RW: "TheMovieDB::TV"],[Xz: 234538, DD: "Demon Lord 2099", RW: "TheMovieDB::TV"],[Xz: 237045, DD: "Cherry Magic!", RW: "TheMovieDB::TV"],[Xz: 240633, DD: "A Journey Through Another World", RW: "TheMovieDB::TV"],[Xz: 245285, DD: "Failure Frame", RW: "TheMovieDB::TV"],[Xz: 271026, DD: "Taisho Era Contract Marriage", RW: "TheMovieDB::TV"]];def QWl = any { info.QWl } { "IMDb" };def NXi = n;EPR.each {if (it.Xz == id && it.RW == QWl) {NXi = it.DD}};def SPA = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def IrO = NXi.replaceAll(SPA.collect { "\\" + it }.join('|'), '');IrO = IrO.replaceAll(/(\s|\.)*$/, '');IrO}{" ("}{y}{")"} [{def ygl = [[ydO: "ABEMA", fMW: ["ABEMA"]],[ydO: "Bilibili.tv", fMW: ["B-Global", "BiliIntl", "BILI"]],[ydO: "Hulu", fMW: ["HULU"]],[ydO: "MeWatch", fMW: ["MW.WEB-DL"]],[ydO: "Netflix", fMW: ["NF.WEB-DL", "NF WEB"]],[ydO: "Prime Video", fMW: ["AMZN"]],[ydO: "TVer", fMW: ["TVER"]],[ydO: "Shahid", fMW: ["SHAHID"]],[ydO: "U-NEXT", fMW: ["UNEXT"]],[ydO: "YouTube", fMW: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def XA = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def hmh = ["Erai-raws", "SubsPlease"];def Ij = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def IJq = any {def do = ygl.find { aLR ->  aLR.fMW.find { vmJ ->  fn.contains(vmJ) } }?.fMW.first() ?: "";do = do.replace(".WEB-DL", "");do ? "${do}.WEB-DL" : ""} {source} {XA.find { HW ->  group == HW || Ij == HW } ? "WEBRip" : ""} {def iC = hmh.find { dwX ->  group == dwX || Ij == dwX} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : iC} {vs} {""};IJq ? "$IJq " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def _z = " Dub";def pG = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : _z;pG = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : pG;pG}{def Rs = any { audioLanguages.size() } { 0 };def pG = Rs > 2 ? " MAud" : Rs > 1 ? " DAud" : null;def LSL = Rs > 5 ? audioLanguages.take(5) : audioLanguages;pG ? pG + LSL.joining(" ", " (", "").upper() + (Rs > 5 ? " ...)" : ")") : ""}{def QoA = any { textLanguages.size() } { 0 };def pG = QoA > 2 ? ", MSub" : QoA > 1 ? ", DSub" : null;def LSL = QoA > 5 ? textLanguages.take(5) : textLanguages;pG ? pG + LSL.joining(" ", " (", "").upper() + (QoA > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}