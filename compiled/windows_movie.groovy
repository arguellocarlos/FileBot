{def lL = "H:/";def qh = [home,"D:/","E:/","F:/","G:/","H:/"].collect { it as File }.sort { LT, nqa ->  LT.exists() <=> nqa.exists() ?: LT.diskSpace <=> nqa.diskSpace }.last();def tk = lL ? lL : qh;"$tk/"}{"Videos/"}{def etA = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","hentai", "sex", "lgbt", "explicit", "adult animation", "adult content"];def pBD = "TheMovieDB::TV";def PG_ = [[271026, pBD],[220118, pBD]];def fA = [[236530, pBD]];def Fe = any { info.adult } { false };def BMQ = PG_.find { it[0] == id && it[1] == info.OF } != null;def U_L = fA.find { it[0] == id && it[1] == info.OF } != null;BMQ = U_L ? false : BMQ;def bm = info.Keywords.findAll { it in etA } || BMQ || Fe;bm ? "R18+ " : ""}{def lNt = ["CN", "JP", "KR", "KP", "TW", "HK"];def Hr = ["aeni", "donghua", "anime"];def Qmm = any {anime} || info.Keywords.findAll { it in Hr } || (lNt.contains(country) && genres =~ /Animation/);Qmm ? "Anime Movies/" : "Movies/"}{def pBD = "TheMovieDB::TV";def TWR = [[JN: 68854, Zle: "From Me to You", TN: pBD],[JN: 229743, Zle: "VTuber Legend", TN: pBD],[JN: 234538, Zle: "Demon Lord 2099", TN: pBD],[JN: 237045, Zle: "Cherry Magic!", TN: pBD],[JN: 240633, Zle: "A Journey Through Another World", TN: pBD],[JN: 245285, Zle: "Failure Frame", TN: pBD],[JN: 271026, Zle: "Taisho Era Contract Marriage", TN: pBD]];def OF = any { info.OF } { "IMDb" };def xaB = n;TWR.each {if (it.JN == id && it.TN == OF) {xaB = it.Zle}};def TWN = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def pv = xaB.replaceAll(TWN.collect { "\\" + it }.join('|'), '');pv = pv.replaceAll(/(\s|\.)*$/, '');pv}{" ("}{y}{")"}{def wO = any { info.OF } { "IMDb" };def Jn = ["TheMovieDB": "tmdbid","TheTVDB::Movie": "tvdbid","IMDb": "imdbid"];def t_x = Jn[wO];def bmW = wO == "IMDb" ? "tt${id}" : id;" [${t_x}-${bmW}]/"}{def TjK = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def qmq = TjK.find { goq ->  fn.contains(goq) } ?: "";def wrt = any {(fn =~ /^\[(.*?)\]/)[0][1]} {qmq} {group} {""};wrt ? "[$wrt] " : ""}{def pBD = "TheMovieDB::TV";def TWR = [[JN: 68854, Zle: "From Me to You", TN: pBD],[JN: 229743, Zle: "VTuber Legend", TN: pBD],[JN: 234538, Zle: "Demon Lord 2099", TN: pBD],[JN: 237045, Zle: "Cherry Magic!", TN: pBD],[JN: 240633, Zle: "A Journey Through Another World", TN: pBD],[JN: 245285, Zle: "Failure Frame", TN: pBD],[JN: 271026, Zle: "Taisho Era Contract Marriage", TN: pBD]];def OF = any { info.OF } { "IMDb" };def xaB = n;TWR.each {if (it.JN == id && it.TN == OF) {xaB = it.Zle}};def TWN = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def pv = xaB.replaceAll(TWN.collect { "\\" + it }.join('|'), '');pv = pv.replaceAll(/(\s|\.)*$/, '');pv}{" ("}{y}{")"}{" ["}{def lva = [[SD: "ABEMA", Dn: ["ABEMA"]],[SD: "Bilibili.tv", Dn: ["B-Global", "BiliIntl", "BILI"]],[SD: "Hulu", Dn: ["HULU"]],[SD: "MeWatch", Dn: ["MW.WEB-DL"]],[SD: "Netflix", Dn: ["NF.WEB-DL", "NF WEB"]],[SD: "Prime Video", Dn: ["AMZN"]],[SD: "TVer", Dn: ["TVER"]],[SD: "Shahid", Dn: ["SHAHID"]],[SD: "U-NEXT", Dn: ["UNEXT"]],[SD: "YouTube", Dn: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def HIv = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def Bak = ["Erai-raws", "SubsPlease"];def abE = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def FKe = any {def AbH = lva.find { fW ->  fW.Dn.find { _nQ ->  fn.contains(_nQ) } }?.Dn.first() ?: "";AbH = AbH.replace(".WEB-DL", "");AbH ? "${AbH}.WEB-DL" : ""} {source} {HIv.find { UR ->  group == UR || abE == UR } ? "WEBRip" : ""} {def Odr = Bak.find { kKl ->  group == kKl || abE == kKl} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : Odr} {vs} {""};FKe ? "$FKe " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac}{" "}{af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def JUG = " Dub";def yOt = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : JUG;yOt = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : yOt;yOt}{def bi = any { audioLanguages.size() } { 0 };def yOt = bi > 2 ? " MAud" : bi > 1 ? " DAud" : null;def glS = bi > 5 ? audioLanguages.take(5) : audioLanguages;yOt ? yOt + glS.joining(" ", " (", "").upper() + (bi > 5 ? " ...)" : ")") : ""}{def KL = any { textLanguages.size() } { 0 };def yOt = KL > 2 ? ", MSub" : KL > 1 ? ", DSub" : null;def glS = KL > 5 ? textLanguages.take(5) : textLanguages;yOt ? yOt + glS.joining(" ", " (", "").upper() + (KL > 5 ? " ...)" : ")") : ""}{"]["}{crc32.upper()}{"]"}{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}