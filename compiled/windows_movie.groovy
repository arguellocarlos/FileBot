{def mOl = "H:/";def KCi = [home,"D:/","E:/","F:/","G:/","H:/"].collect { it as File }.sort { wE, R_ ->  wE.exists() <=> R_.exists() ?: wE.diskSpace <=> R_.diskSpace }.last();def ydY = mOl ? mOl : KCi;"$ydY/"}{"Videos/"}{def W_j = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","hentai", "sex", "lgbt", "explicit", "adult animation", "adult content"];def ax = [271026,220118];def dOw = any { info.adult } { false };def Cg = any { info.Keywords.findAll { it in W_j } } { id in ax } { dOw };Cg ? "R18+ " : ""}{def _v = /(CN|JP|KR|KP|TW|HK)/;def Sn = /(aeni|donghua|anime)/;def qa = anime || info.Keywords =~ Sn || any {(genres =~ /Animation/ && country =~ _v)}{false} ? true : false;qa ? "Anime Movies/" : "Movies/"}{def aYU = [[yO: 229743, EM: "VTuber Legend"],[yO: 240633, EM: "A Journey Through Another World"],[yO: 245285, EM: "Failure Frame"],[yO: 237045, EM: "Cherry Magic!"],[yO: 68854, EM: "From Me to You"],[yO: 271026, EM: "Taisho Era Contract Marriage"],[yO: 234538, EM: "Demon Lord 2099"]];def Ewe = n;aYU.each {if (it.yO == tmdbid && type.toString() != "Movie") {Ewe = it.EM}};def HK = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def aCq = Ewe.replaceAll(HK.collect { "\\" + it }.join('|'), '');aCq = aCq.replaceAll(/(\s|\.)*$/, '');aCq}{" ("}{y}{") [tmdbid-"}{tmdbid}{"]/"}{def LzR = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def FST = LzR.find { Tw ->  fn.contains(Tw) } ?: "";def LsY = any {(fn =~ /^\[(.*?)\]/)[0][1]} {FST} {group} {""};LsY ? "[$LsY] " : ""}{def aYU = [[yO: 229743, EM: "VTuber Legend"],[yO: 240633, EM: "A Journey Through Another World"],[yO: 245285, EM: "Failure Frame"],[yO: 237045, EM: "Cherry Magic!"],[yO: 68854, EM: "From Me to You"],[yO: 271026, EM: "Taisho Era Contract Marriage"],[yO: 234538, EM: "Demon Lord 2099"]];def Ewe = n;aYU.each {if (it.yO == tmdbid && type.toString() != "Movie") {Ewe = it.EM}};def HK = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def aCq = Ewe.replaceAll(HK.collect { "\\" + it }.join('|'), '');aCq = aCq.replaceAll(/(\s|\.)*$/, '');aCq}{" ("}{y}{")"} [{def pp = [[DR: "ABEMA", zP: ["ABEMA"]],[DR: "Bilibili.tv", zP: ["B-Global", "BiliIntl", "BILI"]],[DR: "Hulu", zP: ["HULU"]],[DR: "MeWatch", zP: ["MW.WEB-DL"]],[DR: "Netflix", zP: ["NF.WEB-DL", "NF WEB"]],[DR: "Prime Video", zP: ["AMZN"]],[DR: "TVer", zP: ["TVER"]],[DR: "Shahid", zP: ["SHAHID"]],[DR: "U-NEXT", zP: ["UNEXT"]],[DR: "YouTube", zP: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def HT = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def med = ["Erai-raws", "SubsPlease"];def DO = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def YPw = any {def tfP = pp.find { BL ->  BL.zP.find { CFl ->  fn.contains(CFl) } }?.zP.first() ?: "";tfP = tfP.replace(".WEB-DL", "");tfP ? "${tfP}.WEB-DL" : ""} {source} {HT.find { Wx ->  group == Wx || DO == Wx } ? "WEBRip" : ""} {def JX = med.find { yE ->  group == yE || DO == yE} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : JX} {vs} {""};YPw ? "$YPw " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def OP = " Dub";def Z_ = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : OP;Z_ = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : Z_;Z_}{def NMC = any { audioLanguages.size() } { 0 };def Z_ = NMC > 2 ? " MAud" : NMC > 1 ? " DAud" : null;def jGW = NMC > 5 ? audioLanguages.take(5) : audioLanguages;Z_ ? Z_ + jGW.joining(" ", " (", "").upper() + (NMC > 5 ? " ...)" : ")") : ""}{def vg = any { textLanguages.size() } { 0 };def Z_ = vg > 2 ? ", MSub" : vg > 1 ? ", DSub" : null;def jGW = vg > 5 ? textLanguages.take(5) : textLanguages;Z_ ? Z_ + jGW.joining(" ", " (", "").upper() + (vg > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}