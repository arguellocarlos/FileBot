{def Yn = "H:/";def ok = [home,"D:/","E:/","F:/","G:/","H:/"].collect { it as File }.sort { qw, sjq ->  qw.exists() <=> sjq.exists() ?: qw.diskSpace <=> sjq.diskSpace }.last();def kOR = Yn ? Yn : ok;"$kOR/"}{def OZo = /(CN|JP|KR|KP|TW|HK)/;def DGJ = /(aeni|donghua|anime)/;def OQs = anime || info.Keywords =~ DGJ || any {(genres =~ /Animation/ && country =~ OZo)}{false} ? true : false;def Un = OQs ? "Videos/Anime " : "Videos/";"$Un" + "Movies/"}{def KlK = [[dq: 229743, YYW: "VTuber Legend"],[dq: 240633, YYW: "A Journey Through Another World"],[dq: 245285, YYW: "Failure Frame"],[dq: 237045, YYW: "Cherry Magic!"],[dq: 68854, YYW: "From Me to You"],[dq: 271026, YYW: "Taisho Era Contract Marriage"],[dq: 234538, YYW: "Demon Lord 2099"]];def yP = n;KlK.each {if (it.dq == tmdbid && type.toString() != "Movie") {yP = it.YYW}};def zp = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def bbb = yP.replaceAll(zp.collect { "\\" + it }.join('|'), '');bbb = bbb.replaceAll(/(\s|\.)*$/, '');bbb}{" ("}{y}{") [tmdbid-"}{tmdbid}{"]/"}{def Og = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def WDM = Og.find { fw ->  fn.contains(fw) } ?: "";def xv = any {(fn =~ /^\[(.*?)\]/)[0][1]} {WDM} {group} {""};xv ? "[$xv] " : ""}{def KlK = [[dq: 229743, YYW: "VTuber Legend"],[dq: 240633, YYW: "A Journey Through Another World"],[dq: 245285, YYW: "Failure Frame"],[dq: 237045, YYW: "Cherry Magic!"],[dq: 68854, YYW: "From Me to You"],[dq: 271026, YYW: "Taisho Era Contract Marriage"],[dq: 234538, YYW: "Demon Lord 2099"]];def yP = n;KlK.each {if (it.dq == tmdbid && type.toString() != "Movie") {yP = it.YYW}};def zp = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def bbb = yP.replaceAll(zp.collect { "\\" + it }.join('|'), '');bbb = bbb.replaceAll(/(\s|\.)*$/, '');bbb}{" ("}{y}{")"} [{def Gbo = [[TY: "Bilibili.tv", sDR: ["B-Global", "BiliIntl", "BILI"]],[TY: "Prime Video", sDR: ["AMZN"]],[TY: "U-NEXT", sDR: ["UNEXT"]],[TY: "ABEMA", sDR: ["ABEMA"]],[TY: "Hulu", sDR: ["HULU"]],[TY: "Shahid", sDR: ["SHAHID"]],[TY: "YouTube", sDR: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def UnZ = ["ASW", "Judas"];def OM = ["Erai-raws", "SubsPlease", "JRx7"];def IQ = any {def _nc = Gbo.find { Ah ->  Ah.sDR.find { Lv ->  fn.contains(Lv) } }?.sDR.first() ?: "";_nc = _nc.replace("YT.WEB-DL", "YT");_nc ? "${_nc}.WEB-DL" : ""} {source} {UnZ.find { dXa ->  group == dXa } ? "WEBRip" : ""} {OM.find { ftx ->  group == ftx } ? "WEB-DL" : ""} {""};IQ ? "$IQ " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac} {af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def b_f = " Dub";def yqO = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : b_f;yqO = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : yqO;yqO}{def dCN = any { audioLanguages.size() } { 0 };def yqO = dCN > 2 ? " MAud" : dCN > 1 ? " DAud" : null;def ePN = dCN > 5 ? audioLanguages.take(5) : audioLanguages;yqO ? yqO + ePN.joining(" ", " (", "").upper() + (dCN > 5 ? " ...)" : ")") : ""}{def wl = any { textLanguages.size() } { 0 };def yqO = wl > 2 ? ", MSub" : wl > 1 ? ", DSub" : null;def ePN = wl > 5 ? textLanguages.take(5) : textLanguages;yqO ? yqO + ePN.joining(" ", " (", "").upper() + (wl > 5 ? " ...)" : ")") : ""}][{crc32.upper()}]{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}