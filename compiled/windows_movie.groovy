{def DcN = "H:/";def Og = [home,"D:/","E:/","F:/","G:/","H:/"].collect { it as File }.sort { AHU,WeJ ->  AHU.exists() <=> WeJ.exists() ?:AHU.diskSpace <=> WeJ.diskSpace }.last();def VJE = DcN ? DcN : Og;"$VJE/"}{"Videos/"}{def ARd = ["boys' love (bl)","gay theme","yaoi","yuri","lesbian","hentai","hentai","sex","lgbt","explicit","adult animation","adult content"];def fFS = "TheMovieDB::TV";def sj = [[271026,fFS],[220118,fFS]];def Iu = [[236530,fFS]];def vB = any { info.database } { "IMDb" };def Io = vB == "IMDb" ? "tt${id}" : id;def Sj = any { info.adult } { false };def El = sj.find { it[0] == Io && it[1] == vB } != null;def vY = Iu.find { it[0] == Io && it[1] == vB } != null;def Wp = info.Keywords.findAll { it in ARd } || El || Sj;Wp = vY ? false : Wp;Wp ? "R18+ " : ""}{def PW = ["CN","JP","KR","KP","TW","HK"];def TA = ["aeni","donghua","anime"];def jlT = any {anime} || info.Keywords.findAll { it in TA } || (PW.contains(country) && genres =~ /Animation/);jlT ? "Anime Movies/" : "Movies/"}{def fFS = "TheMovieDB::TV";def rW = [[ES:68854,DpQ:"From Me to You",BR:fFS],[ES:229743,DpQ:"VTuber Legend",BR:fFS],[ES:234538,DpQ:"Demon Lord 2099",BR:fFS],[ES:237045,DpQ:"Cherry Magic!",BR:fFS],[ES:240633,DpQ:"A Journey Through Another World",BR:fFS],[ES:245285,DpQ:"Failure Frame",BR:fFS],[ES:271026,DpQ:"Taisho Era Contract Marriage",BR:fFS]];def vB = any { info.database } { "IMDb" };def Io = vB == "IMDb" ? "tt${id}" : id;def ZQg = n;rW.each {if (it.ES == Io && it.BR == vB) {ZQg = it.DpQ}};def Bu = ['\\','/',':','*','?','"','<','>','|'];def dz_ = ZQg.replaceAll(Bu.collect { "\\" + it }.join('|'),'');dz_ = dz_.replaceAll(/(\s|\.)*$/,'');dz_}{" ("}{y}{")"}{def vB = any { info.database } { "IMDb" };def cF = ["TheMovieDB":"tmdbid","TheTVDB::Movie":"tvdbid","IMDb":"imdbid"];def NQM = cF[vB];def Io = vB == "IMDb" ? "tt${id}" : id;" [${NQM}-${Io}]/"}{def Zkj = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def DRk = Zkj.find { oYD ->  fn.contains(oYD) } ?:"";def hhS = any {(fn =~ /^\[(.*?)\]/)[0][1]} {DRk} {group} {""};hhS ? "[$hhS] " : ""}{def fFS = "TheMovieDB::TV";def rW = [[ES:68854,DpQ:"From Me to You",BR:fFS],[ES:229743,DpQ:"VTuber Legend",BR:fFS],[ES:234538,DpQ:"Demon Lord 2099",BR:fFS],[ES:237045,DpQ:"Cherry Magic!",BR:fFS],[ES:240633,DpQ:"A Journey Through Another World",BR:fFS],[ES:245285,DpQ:"Failure Frame",BR:fFS],[ES:271026,DpQ:"Taisho Era Contract Marriage",BR:fFS]];def vB = any { info.database } { "IMDb" };def Io = vB == "IMDb" ? "tt${id}" : id;def ZQg = n;rW.each {if (it.ES == Io && it.BR == vB) {ZQg = it.DpQ}};def Bu = ['\\','/',':','*','?','"','<','>','|'];def dz_ = ZQg.replaceAll(Bu.collect { "\\" + it }.join('|'),'');dz_ = dz_.replaceAll(/(\s|\.)*$/,'');dz_}{" ("}{y}{")"}{" ["}{def UU = [[IPK:"ABEMA",eIe:["ABEMA"]],[IPK:"Bilibili.tv",eIe:["B-Global","BiliIntl","BILI"]],[IPK:"Hulu",eIe:["HULU"]],[IPK:"MeWatch",eIe:["MW.WEB-DL"]],[IPK:"Netflix",eIe:["NF.WEB-DL","NF WEB"]],[IPK:"Prime Video",eIe:["AMZN"]],[IPK:"TVer",eIe:["TVER"]],[IPK:"Shahid",eIe:["SHAHID"]],[IPK:"U-NEXT",eIe:["UNEXT"]],[IPK:"YouTube",eIe:["YT.WEB-DL","YOUTUBE","YTB"]]];def VYk = ["ASW","Judas","JRx7","EMBER","KawaSubs","GuodongSubs"];def fAG = ["Erai-raws","SubsPlease"];def lDD = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def yq = any {def OB = UU.find { fpD ->  fpD.eIe.find { Es ->  fn.contains(Es) } }?.eIe.first() ?:"";OB = OB.replace(".WEB-DL","");OB ? "${OB}.WEB-DL" : ""} {source} {VYk.find { nq ->  group == nq || lDD == nq } ? "WEBRip" : ""} {def SH = fAG.find { ga_ ->  group == ga_ || lDD == ga_} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : SH} {vs} {""};yq ? "$yq " : ""}{def EfT = bitdepth ? " ${bitdepth}bit" : "";"$resolution $vcf $EfT,$ac"}{" "}{af.format(8:'DD+ 7.1',7:'6.1',6:'DD 5.1',5:'5.0',3:'2.1',2:'2.0',1:'1.0')}{def zxB = " Dub";def CqV = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : zxB;CqV = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : CqV;CqV}{def TmT = any { audioLanguages.size() } { 0 };def CqV = TmT > 2 ? " MAud" : TmT > 1 ? " DAud" : null;def jBe = TmT > 5 ? audioLanguages.take(5) : audioLanguages;CqV ? CqV + jBe.joining(" "," (","").upper() + (TmT > 5 ? " ...)" : ")") : ""}{def qY = any { textLanguages.size() } { 0 };def CqV = qY > 2 ? ",MSub" : qY > 1 ? ",DSub" : null;def jBe = qY > 5 ? textLanguages.take(5) : textLanguages;CqV ? CqV + jBe.joining(" "," (","").upper() + (qY > 5 ? " ...)" : ")") : ""}{"]["}{crc32.upper()}{"]"}{def wMU = ["ass","srt","ssa","vtt","ttml"];def kMM = ["name":"." + lang.name,"iso3b":"." + lang.ISO3B,"iso3":"." +lang.ISO3,"iso2":"." + lang.ISO2];def HK = subt;kMM.values().each { KuN -> if (HK.contains(KuN)) {HK = HK.replace(KuN,"")}};wMU.contains(ext) ? kMM.iso3b + HK : ""}{def wMU = ["jpg","jpeg","png","bmp"];wMU.contains(ext) ? "-thumb" : ""}