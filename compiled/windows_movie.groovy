{def rc = "H:/";def Emi = [home,"D:/","E:/","F:/","G:/","H:/"].collect { it as File }.sort { QvJ, BWW ->  QvJ.exists() <=> BWW.exists() ?: QvJ.diskSpace <=> BWW.diskSpace }.last();def qe = rc ? rc : Emi;"$qe/"}{"Videos/"}{def eU = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","hentai", "sex", "lgbt", "explicit", "adult animation", "adult content"];def js = "TheMovieDB::TV";def Sx = [[271026, js],[220118, js]];def tJ = [[236530, js]];def Ep = any { info.Ep } { "IMDb" };def Hp = Ep == "IMDb" ? "tt${id}" : id;def eiH = any { info.adult } { false };def Hdz = Sx.find { it[0] == Hp && it[1] == Ep } != null;def zii = tJ.find { it[0] == Hp && it[1] == Ep } != null;def eNA = info.Keywords.findAll { it in eU } || Hdz || eiH;eNA = zii ? false : eNA;eNA ? "R18+ " : ""}{def Snc = ["CN", "JP", "KR", "KP", "TW", "HK"];def RaD = ["aeni", "donghua", "anime"];def tWQ = any {anime} || info.Keywords.findAll { it in RaD } || (Snc.contains(country) && genres =~ /Animation/);tWQ ? "Anime Movies/" : "Movies/"}{def js = "TheMovieDB::TV";def TfN = [[tT: 68854, zt: "From Me to You", ml: js],[tT: 229743, zt: "VTuber Legend", ml: js],[tT: 234538, zt: "Demon Lord 2099", ml: js],[tT: 237045, zt: "Cherry Magic!", ml: js],[tT: 240633, zt: "A Journey Through Another World", ml: js],[tT: 245285, zt: "Failure Frame", ml: js],[tT: 271026, zt: "Taisho Era Contract Marriage", ml: js]];def Ep = any { info.Ep } { "IMDb" };def Hp = Ep == "IMDb" ? "tt${id}" : id;def Il = n;TfN.each {if (it.tT == Hp && it.ml == Ep) {Il = it.zt}};def tdA = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def Pd = Il.replaceAll(tdA.collect { "\\" + it }.join('|'), '');Pd = Pd.replaceAll(/(\s|\.)*$/, '');Pd}{" ("}{y}{")"}{def sFD = any { info.Ep } { "IMDb" };def weP = ["TheMovieDB": "tmdbid","TheTVDB::Movie": "tvdbid","IMDb": "imdbid"];def Dj = weP[sFD];def Hp = sFD == "IMDb" ? "tt${id}" : id;" [${Dj}-${Hp}]/"}{def VW = ["Alqanime","BlackLuster","NanDesuKa","ToonsHub","Tsundere-Raws"];def fBr = VW.find { Sg ->  fn.contains(Sg) } ?: "";def lI = any {(fn =~ /^\[(.*?)\]/)[0][1]} {fBr} {group} {""};lI ? "[$lI] " : ""}{def js = "TheMovieDB::TV";def TfN = [[tT: 68854, zt: "From Me to You", ml: js],[tT: 229743, zt: "VTuber Legend", ml: js],[tT: 234538, zt: "Demon Lord 2099", ml: js],[tT: 237045, zt: "Cherry Magic!", ml: js],[tT: 240633, zt: "A Journey Through Another World", ml: js],[tT: 245285, zt: "Failure Frame", ml: js],[tT: 271026, zt: "Taisho Era Contract Marriage", ml: js]];def Ep = any { info.Ep } { "IMDb" };def Hp = Ep == "IMDb" ? "tt${id}" : id;def Il = n;TfN.each {if (it.tT == Hp && it.ml == Ep) {Il = it.zt}};def tdA = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def Pd = Il.replaceAll(tdA.collect { "\\" + it }.join('|'), '');Pd = Pd.replaceAll(/(\s|\.)*$/, '');Pd}{" ("}{y}{")"}{" ["}{def HSm = [[hIg: "ABEMA", eij: ["ABEMA"]],[hIg: "Bilibili.tv", eij: ["B-Global", "BiliIntl", "BILI"]],[hIg: "Hulu", eij: ["HULU"]],[hIg: "MeWatch", eij: ["MW.WEB-DL"]],[hIg: "Netflix", eij: ["NF.WEB-DL", "NF WEB"]],[hIg: "Prime Video", eij: ["AMZN"]],[hIg: "TVer", eij: ["TVER"]],[hIg: "Shahid", eij: ["SHAHID"]],[hIg: "U-NEXT", eij: ["UNEXT"]],[hIg: "YouTube", eij: ["YT.WEB-DL", "YOUTUBE", "YTB"]]];def nPc = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def aB = ["Erai-raws", "SubsPlease"];def rWf = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def ln = any {def Ef = HSm.find { UMH ->  UMH.eij.find { FO ->  fn.contains(FO) } }?.eij.first() ?: "";Ef = Ef.replace(".WEB-DL", "");Ef ? "${Ef}.WEB-DL" : ""} {source} {nPc.find { XZU ->  group == XZU || rWf == XZU } ? "WEBRip" : ""} {def KiT = aB.find { QB ->  group == QB || rWf == QB} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : KiT} {vs} {""};ln ? "$ln " : ""}{resolution} {vcf.upper()}{bitdepth ? " ${bitdepth}bit" : ""}, {ac}{" "}{af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0',)}{def DV_ = " Dub";def iOc = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : DV_;iOc = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : iOc;iOc}{def ibI = any { audioLanguages.size() } { 0 };def iOc = ibI > 2 ? " MAud" : ibI > 1 ? " DAud" : null;def sWw = ibI > 5 ? audioLanguages.take(5) : audioLanguages;iOc ? iOc + sWw.joining(" ", " (", "").upper() + (ibI > 5 ? " ...)" : ")") : ""}{def qWc = any { textLanguages.size() } { 0 };def iOc = qWc > 2 ? ", MSub" : qWc > 1 ? ", DSub" : null;def sWw = qWc > 5 ? textLanguages.take(5) : textLanguages;iOc ? iOc + sWw.joining(" ", " (", "").upper() + (qWc > 5 ? " ...)" : ")") : ""}{"]["}{crc32.upper()}{"]"}{ext =~ /(ass|srt|ssa|vtt)/ ? '.' + lang.ISO3B : ""}{ext =~ /jp(?:e)?g|png/ ? "-thumb" : ""}