{def ujn = {System.getProperty(it)};def YG = ujn("os.name").toLowerCase().contains("windows");def DWq = ujn("user.name");def lx = "/run/media/${DWq}";def xkW = "";def qbW = [[URn: "Books", SAo: "F:/", XuZ: "$lx/Books"],[URn: "Data", SAo: "D:/", XuZ: "$lx/Data"],[URn: "Games", SAo: "G:/", XuZ: "$lx/Games"],[URn: "Music", SAo: "E:/", XuZ: "$lx/Music"],[URn: "Videos", SAo: "H:/", XuZ: "$lx/Videos"]];def xnB = (qbW.collect {it[YG ? "SAo" : "XuZ"] as File}.sort {first, second -> first.exists() <=> second.exists() ?: first.diskSpace <=> second.diskSpace}).last().path;def Ap = xkW ?: xnB;"$Ap/"}{"Videos/"}{def lpC = ["boys' love (bl)","gay theme","yaoi","yuri","lesbian","hentai", "sex","lgbt","explicit","adult animation","adult content"];def sJC = "TheMovieDB::TV";def OM = [[271026, sJC],[220118, sJC],[74180, sJC]];def mCs = [[236530, sJC]];def JFY = any {info.database} {id == tmdbid ? "TheMovieDB" : "IMDb"};def va = JFY == "IMDb" ? "tt${id}" : id;def tm = any {info.adult} {false};def jaN = OM.find {it[0] == va && it[1] == JFY} != null;def SJU = mCs.find {it[0] == va && it[1] == JFY} != null;def fwL = info.Keywords.findAll {it in lpC} || jaN || tm;fwL = SJU ? false : fwL;fwL ? "R18+ " : ""}{def EVr = ["CN","JP","KR","KP","TW","HK"];def MtY = ["aeni","donghua","anime"];def MEU = (any {anime} ||info.Keywords.findAll {it in MtY} ||(EVr.contains(country) && genres.contains("Animation")));MEU ? "Anime Movies/" : "Movies/"}{def sJC = "TheMovieDB::TV";def fpb = [[esW: 68854, gOL: "From Me to You", rN: sJC],[esW: 94904, gOL: "My Next Life as a Villainess", rN: sJC],[esW: 229743, gOL: "VTuber Legend", rN: sJC],[esW: 234538, gOL: "Demon Lord 2099", rN: sJC],[esW: 237045, gOL: "Cherry Magic!", rN: sJC],[esW: 240633, gOL: "A Journey Through Another World", rN: sJC],[esW: 245285, gOL: "Failure Frame", rN: sJC],[esW: 271026, gOL: "Taisho Era Contract Marriage", rN: sJC]];def JFY = any {info.database} {id == tmdbid ? "TheMovieDB" : "IMDb"};def va = JFY == "IMDb" ? "tt${id}" : id;def XA = n;fpb.each {if (it.esW == va && it.rN == JFY) {XA = it.gOL}};def oJm = ['\\','/',':','*','?','"','<','>','|'];def uOA = XA.replaceAll(oJm.collect {"\\" + it}.join('|'), '');uOA = uOA.replaceAll(/(\s|\.)*$/, '');uOA}{" ("}{y}{")"}{def JFY = id == tmdbid ? "TheMovieDB" : "IMDb";def XlW = ["TheMovieDB": "tmdbid","IMDb": "imdbid"];def MpJ = XlW[JFY];def va = JFY == "IMDb" ? "tt${id}" : id;" [${MpJ}-${va}]/"}{def Vpq = ["Alqanime","BlackLuster","Kuramanime","NanDesuKa","ToonsHub","Tsundere-Raws"];def hdO = Vpq.find {groupName ->  fn.contains(groupName)} ?: "";def dz = any {(fn =~ /^\[(.*?)\]/)[0][1]} {hdO} {group} {""};dz ? "[$dz] " : ""}{def sJC = "TheMovieDB::TV";def fpb = [[esW: 68854, gOL: "From Me to You", rN: sJC],[esW: 94904, gOL: "My Next Life as a Villainess", rN: sJC],[esW: 229743, gOL: "VTuber Legend", rN: sJC],[esW: 234538, gOL: "Demon Lord 2099", rN: sJC],[esW: 237045, gOL: "Cherry Magic!", rN: sJC],[esW: 240633, gOL: "A Journey Through Another World", rN: sJC],[esW: 245285, gOL: "Failure Frame", rN: sJC],[esW: 271026, gOL: "Taisho Era Contract Marriage", rN: sJC]];def JFY = any {info.database} {id == tmdbid ? "TheMovieDB" : "IMDb"};def va = JFY == "IMDb" ? "tt${id}" : id;def XA = n;fpb.each {if (it.esW == va && it.rN == JFY) {XA = it.gOL}};def oJm = ['\\','/',':','*','?','"','<','>','|'];def uOA = XA.replaceAll(oJm.collect {"\\" + it}.join('|'), '');uOA = uOA.replaceAll(/(\s|\.)*$/, '');uOA}{" ("}{y}{")"}{" ["}{def QL = [["ABEMA"],["ADN"],["BILI","B-Global","BiliIntl","B-Site","BiliCN"],["HIDIVE","HIDI.WEB-DL"],["IQIYI","IQ.WEB-DL"],["LAFTEL","LFTL"],["MW.WEB-DL"],["NF.WEB-DL","NF WEB"],["SHAHID"],["TVER"],["UNEXT"],["WETV"],["YT.WEB-DL","YOUTUBE","YTB"]];def yRu = ["ASW","Judas","JRx7","EMBER","KawaSubs","GuodongSubs"];def qbB = ["Erai-raws","SubsPlease"];def Ny = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def AAD = any {def FF = QL.find {idx -> idx.find {known -> fn.lower().contains(known.lower())}}[0];FF = FF.replace(".WEB-DL", "");FF ? "${FF}.WEB-DL" : ""} {source} {yRu.find {g_ ->  group == g_ || Ny == g_} ? "WEBRip" : ""} {def QZ = qbB.find {r_ ->  group == r_ || Ny == r_} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : QZ} {vs} {""};AAD ? "$AAD " : ""}{def fVZ = bitdepth ? " ${bitdepth}bit" : "";"$resolution $vcf $fVZ, $ac"}{" "}{af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0')}{def S_ = " Dub";def _GJ = audioLanguages.any{it.ISO3B == language.ISO3B} ? "" : S_;_GJ = audioLanguages.size() == 1 && audioLanguages.any{it.ISO3B == "und"} ? "" : _GJ;_GJ}{def VI = any {audioLanguages.size()} {0};def _GJ = VI > 2 ? " MAud" : VI > 1 ? " DAud" : null;def Fvo = VI > 5 ? audioLanguages.take(5) : audioLanguages;_GJ ? _GJ + Fvo.joining(" ", " (", "").upper() + (VI > 5 ? " ...)" : ")") : ""}{def Kt = any {textLanguages.size()} {0};def _GJ = Kt > 2 ? ", MSub" : Kt > 1 ? ", DSub" : null;def Fvo = Kt > 5 ? textLanguages.take(5) : textLanguages;_GJ ? _GJ + Fvo.joining(" ", " (", "").upper() + (Kt > 5 ? " ...)" : ")") : ""}{"]["}{crc32.upper()}{"]"}{if (f.subtitle) {def CXj = ["name": "." + lang.name,"iso3b": "." + lang.ISO3B,"iso3": "." +lang.ISO3,"iso2": "." + lang.ISO2];def oGi = subt;CXj.values().each {code -> if (oGi.contains(code)) {oGi = oGi.replace(code, "")}};CXj.iso3b + oGi}}{f.image ? "-thumb" : ""}