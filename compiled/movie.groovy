{def jpS = { System.getProperty(it) };def rzc = jpS("os.name").toLowerCase().contains("windows");def KF = jpS("user.name");def VRT = "/run/media/${KF}";def scM = rzc ? "H:/" : "$VRT/Videos";def OXs = [[BfQ: "Books", WWF: "F:/", nA: "$VRT/Books"],[BfQ: "Data", WWF: "D:/", nA: "$VRT/Data"],[BfQ: "Games", WWF: "G:/", nA: "$VRT/Games"],[BfQ: "Music", WWF: "E:/", nA: "$VRT/Music"],[BfQ: "Videos", WWF: "H:/", nA: "$VRT/Videos"]];def tM = (OXs.collect { it[rzc ? "WWF" : "nA"] as File }.sort { tN, USo ->  tN.exists() <=> USo.exists() ?: tN.diskSpace <=> USo.diskSpace }).last();def _x = scM ?: tM;"$_x/"}{"Videos/"}{def LbP = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","sex", "lgbt", "explicit", "adult animation", "adult content","nudity", "animefesta"];def lz = "TheMovieDB::TV";def bOL = [[ 74180, lz],[ 93821, lz],[ 95897, lz],[220118, lz],[249891, lz],[271026, lz]];def CJ = [[236530, lz]];def dV = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def nWl = dV == "IMDb" ? "tt${id}" : id;def UF = any { info.adult } { false };def sne = bOL.find { it[0] == nWl && it[1] == dV } != null;def Su = CJ.find { it[0] == nWl && it[1] == dV } != null;def pvs = info.Keywords.findAll { it in LbP } || sne || UF;pvs = Su ? false : pvs;pvs ? "R18+ " : ""}{def uz = ["CN", "JP", "KR", "KP", "TW", "HK"];def HBx = ["aeni", "donghua", "anime"];def Jy = any {anime} || info.Keywords.findAll { it in HBx } || (uz.contains(country) && genres =~ /Animation/);Jy ? "Anime Movies/" : "Movies/"}{def lz = "TheMovieDB::TV";def HA = [[oBW: 68854, hsa: "From Me to You", qIJ: lz],[oBW: 199928, hsa: "Nights With a Cat", qIJ: lz],[oBW: 219816, hsa: "Fate Grand Order Fujimaru Ritsuka Doesn't Get It", qIJ: lz],[oBW: 245561, hsa: "Okitsura", qIJ: lz],[oBW: 248707, hsa: "Neko Oji The Guy That Got Reincarnated As a Cat", qIJ: lz],[oBW: 259559, hsa: "Headhunted to Another World", qIJ: lz],[oBW: 261301, hsa: "Botsuraku Kizoku", qIJ: lz],[oBW: 262141, hsa: "Can You Keep a Secret", qIJ: lz],[oBW: 270657, hsa: "Tono to Inu", qIJ: lz],[oBW: 276204, hsa: "Bogus Skill Fruitmaster", qIJ: lz]];def dV = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def nWl = dV == "IMDb" ? "tt${id}" : id;def Hb = n;HA.each {if (it.oBW == nWl && it.qIJ == dV) {Hb = it.hsa}};def ZVr = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def tuw = Hb.replaceAll(ZVr.collect { "\\" + it }.join('|'), '');tuw = tuw.replaceAll(/(\s|\.)*$/, '');tuw}{" ("}{y}{")"}{"/"}{def EFb = ["Alqanime","BlackLuster","darkflux","Kuramanime","NanDesuKa","ToonsHub","Tsundere-Raws","S1PH3R","Samehadaku"];def ok = EFb.find { UP ->  fn.lower().contains(UP.lower()) } ?: "";def Do = any {(fn =~ /^\[(.*?)\]/)[0][1]} {ok} {group} {""};Do ? "[$Do] " : ""}{def lz = "TheMovieDB::TV";def HA = [[oBW: 68854, hsa: "From Me to You", qIJ: lz],[oBW: 199928, hsa: "Nights With a Cat", qIJ: lz],[oBW: 219816, hsa: "Fate Grand Order Fujimaru Ritsuka Doesn't Get It", qIJ: lz],[oBW: 245561, hsa: "Okitsura", qIJ: lz],[oBW: 248707, hsa: "Neko Oji The Guy That Got Reincarnated As a Cat", qIJ: lz],[oBW: 259559, hsa: "Headhunted to Another World", qIJ: lz],[oBW: 261301, hsa: "Botsuraku Kizoku", qIJ: lz],[oBW: 262141, hsa: "Can You Keep a Secret", qIJ: lz],[oBW: 270657, hsa: "Tono to Inu", qIJ: lz],[oBW: 276204, hsa: "Bogus Skill Fruitmaster", qIJ: lz]];def dV = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def nWl = dV == "IMDb" ? "tt${id}" : id;def Hb = n;HA.each {if (it.oBW == nWl && it.qIJ == dV) {Hb = it.hsa}};def ZVr = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def tuw = Hb.replaceAll(ZVr.collect { "\\" + it }.join('|'), '');tuw = tuw.replaceAll(/(\s|\.)*$/, '');tuw}{" ("}{y}{") ["}{def Id = [["YTB", "YT.WEB-DL", "YOUTUBE"],["ABEMA"],["ADN"],["BILI", "B-Global", "BiliIntl"],["BSITE", "BILICN"],["COOLMIC"],["HIDIVE", "HIDI.WEB-DL"],["IQIYI", "IQ.WEB-DL"],["JFFP"],["LAFTEL", "LFTL"],["MDON", "MANGADON"],["MW.WEB-DL"],["NF.WEB-DL", "NF WEB"],["SHAHID"],["TVER"],["UNEXT"],["WETV"]];def jRc = ["ASW", "Judas", "JRx7", "EMBER", "GuodongSubs", "SAMEHADAKU"];def ycd = ["DB"];def AFU = ["Ruri-Saizen"];def Rdu = ["Erai-raws", "SubsPlease"];def TKp = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def kI = any {def frA = Id.find { LpL ->  LpL.find { OqK ->  fn.lower().contains(OqK.lower()) } }[0];frA = frA.replace(".WEB-DL", "");if (fn.contains("WEBRip")) {frA = frA.replace(".WEBRip", "");frA = frA + ".WEBRip"} else {frA = frA + ".WEB-DL"};frA} {source} {jRc.find { Zg ->  group == Zg || TKp == Zg } ? "WEBRip" : ""} {ycd.find { Zg ->  group == Zg || TKp == Zg } ? "BDRip" : ""} {AFU.find { Zg ->  group == g__ || TKp == g__} ? "HDTVRip" : ""} {def KoA = Rdu.find { Dc ->  group == Dc || TKp == Dc} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : KoA} {vs} {""};kI ? "$kI " : ""}{def qn = bitdepth ? " ${bitdepth}bit" : "";"$resolution $vcf $qn, $ac"}{" "}{af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0')}{def Cl = any { audioLanguages.size() } { 0 };def eB = Cl > 2 ? " MULTi-AUD" : Cl > 1 ? " DUAL-AUD" : null;def giT = Cl > 5 ? audioLanguages.take(5) : audioLanguages;eB ? eB + giT.joining(" ", " (", "").upper() + (Cl > 5 ? " ...)" : ")") : ""}{def qsV = " DUBBED";def eB = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : qsV;eB = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : eB;eB}{def twQ = any { textLanguages.size() } { 0 };def eB = twQ > 2 ? ", MULTi" : twQ > 1 ? ", DUAL" : twQ == 1 ? ", SUB" : null;def giT = twQ > 5 ? textLanguages.take(5) : textLanguages;eB ? eB + giT.joining(" ", " (", "").upper() + (twQ > 6 ? " ...)" : ")") : ""}{"]["}{crc32.upper()}{"]"}{if (f.subtitle) {def kV = ["name": "." + lang.name,"iso3b": "." + lang.ISO3B,"iso3": "." +lang.ISO3,"iso2": "." + lang.ISO2];def Ekd = subt;kV.values().each { usi -> if (Ekd.contains(usi)) {Ekd = Ekd.replace(usi, "")}};kV.iso3b + Ekd}}{f.image ? "-thumb" : ""}