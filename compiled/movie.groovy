{def ZkI = { System.getProperty(it) };def Xf = ZkI("os.name").toLowerCase().contains("windows");def QU = ZkI("user.name");def cG = "/run/media/${QU}";def OPT = Xf ? "H:/" : "$cG/Videos";def LB = [[kvg: "Books", dPG: "F:/", tG: "$cG/Books"],[kvg: "Data", dPG: "D:/", tG: "$cG/Data"],[kvg: "Games", dPG: "G:/", tG: "$cG/Games"],[kvg: "Music", dPG: "E:/", tG: "$cG/Music"],[kvg: "Videos", dPG: "H:/", tG: "$cG/Videos"]];def KW = (LB.collect { it[Xf ? "dPG" : "tG"] as File }.sort { XIC, _Ck ->  XIC.exists() <=> _Ck.exists() ?: XIC.diskSpace <=> _Ck.diskSpace }).last();def GD = OPT ?: KW;"$GD/"}{"Videos/"}{def yjF = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","sex", "lgbt", "explicit", "adult animation", "adult content","nudity", "animefesta"];def Yqn = "TheMovieDB::TV";def io = [[ 74180, Yqn],[ 93821, Yqn],[ 95897, Yqn],[220118, Yqn],[249891, Yqn],[271026, Yqn]];def GFK = [[236530, Yqn]];def yGD = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def ljE = yGD == "IMDb" ? "tt${id}" : id;def Vr = any { info.adult } { false };def cq = io.find { it[0] == ljE && it[1] == yGD } != null;def Raf = GFK.find { it[0] == ljE && it[1] == yGD } != null;def YL = info.Keywords.findAll { it in yjF } || cq || Vr;YL = Raf ? false : YL;YL ? "R18+ " : ""}{def NW = ["CN", "JP", "KR", "KP", "TW", "HK"];def yj = ["aeni", "donghua", "anime"];def ltH = any {anime} || info.Keywords.findAll { it in yj } || (NW.contains(country) && genres =~ /Animation/);ltH ? "Anime Movies/" : "Movies/"}{def Yqn = "TheMovieDB::TV";def Nm = [[Wkc: 68854, BNm: "From Me to You", K_O: Yqn],[Wkc: 199928, BNm: "Nights With a Cat", K_O: Yqn],[Wkc: 219816, BNm: "Fate Grand Order Fujimaru Ritsuka Doesn't Get It", K_O: Yqn],[Wkc: 245561, BNm: "Okitsura", K_O: Yqn],[Wkc: 248707, BNm: "Neko Oji The Guy That Got Reincarnated As a Cat", K_O: Yqn],[Wkc: 259559, BNm: "Headhunted to Another World", K_O: Yqn],[Wkc: 261301, BNm: "Botsuraku Kizoku", K_O: Yqn],[Wkc: 262141, BNm: "Can You Keep a Secret", K_O: Yqn],[Wkc: 270657, BNm: "Tono to Inu", K_O: Yqn],[Wkc: 276204, BNm: "Bogus Skill Fruitmaster", K_O: Yqn]];def yGD = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def ljE = yGD == "IMDb" ? "tt${id}" : id;def y_ = n;Nm.each {if (it.Wkc == ljE && it.K_O == yGD) {y_ = it.BNm}};def avJ = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def AO = y_.replaceAll(avJ.collect { "\\" + it }.join('|'), '');AO = AO.replaceAll(/(\s|\.)*$/, '');AO}{" ("}{y}{")"}{"/"}{def lB = ["Alqanime","BlackLuster","darkflux","Kuramanime","NanDesuKa","ToonsHub","Tsundere-Raws","S1PH3R","Samehadaku"];def bm = lB.find { lnF ->  fn.lower().contains(lnF.lower()) } ?: "";def bsZ = any {(fn =~ /^\[(.*?)\]/)[0][1]} {bm} {group} {""};bsZ ? "[$bsZ] " : ""}{def Yqn = "TheMovieDB::TV";def Nm = [[Wkc: 68854, BNm: "From Me to You", K_O: Yqn],[Wkc: 199928, BNm: "Nights With a Cat", K_O: Yqn],[Wkc: 219816, BNm: "Fate Grand Order Fujimaru Ritsuka Doesn't Get It", K_O: Yqn],[Wkc: 245561, BNm: "Okitsura", K_O: Yqn],[Wkc: 248707, BNm: "Neko Oji The Guy That Got Reincarnated As a Cat", K_O: Yqn],[Wkc: 259559, BNm: "Headhunted to Another World", K_O: Yqn],[Wkc: 261301, BNm: "Botsuraku Kizoku", K_O: Yqn],[Wkc: 262141, BNm: "Can You Keep a Secret", K_O: Yqn],[Wkc: 270657, BNm: "Tono to Inu", K_O: Yqn],[Wkc: 276204, BNm: "Bogus Skill Fruitmaster", K_O: Yqn]];def yGD = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def ljE = yGD == "IMDb" ? "tt${id}" : id;def y_ = n;Nm.each {if (it.Wkc == ljE && it.K_O == yGD) {y_ = it.BNm}};def avJ = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def AO = y_.replaceAll(avJ.collect { "\\" + it }.join('|'), '');AO = AO.replaceAll(/(\s|\.)*$/, '');AO}{" ("}{y}{") ["}{def lbK = [["YTB", "YT.WEB-DL", "YOUTUBE"],["ABEMA"],["ADN"],["BILI", "B-Global", "BiliIntl"],["BSITE", "BILICN"],["COOLMIC"],["HIDIVE", "HIDI.WEB-DL"],["IQIYI", "IQ.WEB-DL"],["JFFP"],["LAFTEL", "LFTL"],["MDON", "MANGADON"],["MW.WEB-DL"],["NF.WEB-DL", "NF WEB"],["SHAHID"],["TVER"],["UNEXT"],["WETV"]];def bu = ["ASW", "Judas", "JRx7", "EMBER", "GuodongSubs", "SAMEHADAKU"];def Pcf = ["DB"];def Lw = ["Ruri-Saizen"];def RfI = ["Erai-raws", "SubsPlease"];def YzQ = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def cH = any {def xKq = lbK.find { dLG ->  dLG.find { Dc ->  fn.lower().contains(Dc.lower()) } }[0];xKq = xKq.replace(".WEB-DL", "");if (fn.contains("WEBRip")) {xKq = xKq.replace(".WEBRip", "");xKq = xKq + ".WEBRip"} else {xKq = xKq + ".WEB-DL"};xKq} {source} {bu.find { Mxc ->  group == Mxc || YzQ == Mxc } ? "WEBRip" : ""} {Pcf.find { Mxc ->  group == Mxc || YzQ == Mxc } ? "BDRip" : ""} {Lw.find { Mxc ->  group == g__ || YzQ == g__} ? "HDTVRip" : ""} {def Hu = RfI.find { GZ ->  group == GZ || YzQ == GZ} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : Hu} {vs} {""};cH ? "$cH " : ""}{def Ug = bitdepth ? " ${bitdepth}bit" : "";"$resolution $vcf $Ug, $ac"}{" "}{af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0')}{def LI = any { audioLanguages.size() } { 0 };def hBR = LI > 2 ? " MULTi-AUD" : LI > 1 ? " DUAL-AUD" : null;def zyu = LI > 5 ? audioLanguages.take(5) : audioLanguages;hBR ? hBR + zyu.ISO2.joining(" ", " (", "").upper() + (LI > 5 ? " ...)" : ")") : ""}{def xt = " DUBBED";def hBR = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : xt;hBR = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : hBR;hBR}{def qW = any { textLanguages.size() } { 0 };def hBR = qW > 2 ? ", MULTi" : qW > 1 ? ", DUAL" : qW == 1 ? ", SUB" : null;def zyu = qW > 5 ? textLanguages.take(5) : textLanguages;hBR ? hBR + zyu.ISO2.joining(" ", " (", "").upper() + (qW > 6 ? " ...)" : ")") : ""}{"]["}{crc32.upper()}{"]"}{if (f.subtitle) {def LC = ["name": "." + lang.name,"iso3b": "." + lang.ISO3B,"iso3": "." +lang.ISO3,"iso2": "." + lang.ISO2];def vLm = subt;LC.values().each { dFe -> if (vLm.contains(dFe)) {vLm = vLm.replace(dFe, "")}};LC.iso3b + vLm}}{f.image ? "-thumb" : ""}