{def D_m = { System.getProperty(it) };def Bfs = D_m("os.name").toLowerCase().contains("windows");def vnX = D_m("user.name");def ex = "/run/media/${vnX}";def Yb = Bfs ? "H:/" : "$ex/Videos";def fJ = [[E_i: "Books", fNG: "F:/", hl: "$ex/Books"],[E_i: "Data", fNG: "D:/", hl: "$ex/Data"],[E_i: "Games", fNG: "G:/", hl: "$ex/Games"],[E_i: "Music", fNG: "E:/", hl: "$ex/Music"],[E_i: "Videos", fNG: "H:/", hl: "$ex/Videos"]];def Pkt = (fJ.collect { it[Bfs ? "fNG" : "hl"] as File }.sort { Mlr, AkL ->  Mlr.exists() <=> AkL.exists() ?: Mlr.diskSpace <=> AkL.diskSpace }).last();def cib = Yb ?: Pkt;"$cib/"}{"Videos/"}{def SU = ["boys' love (bl)", "gay theme", "yaoi", "yuri", "lesbian", "hentai","sex", "lgbt", "explicit", "adult animation", "adult content"];def MpJ = "TheMovieDB::TV";def HRf = [[271026, MpJ],[220118, MpJ],[ 74180, MpJ]];def oY = [[236530, MpJ]];def zWt = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def ivL = zWt == "IMDb" ? "tt${id}" : id;def Jij = any { info.adult } { false };def HJz = HRf.find { it[0] == ivL && it[1] == zWt } != null;def zGG = oY.find { it[0] == ivL && it[1] == zWt } != null;def iJW = info.Keywords.findAll { it in SU } || HJz || Jij;iJW = zGG ? false : iJW;iJW ? "R18+ " : ""}{def MOz = ["CN", "JP", "KR", "KP", "TW", "HK"];def ee = ["aeni", "donghua", "anime"];def ENq = any {anime} || info.Keywords.findAll { it in ee } || (MOz.contains(country) && genres =~ /Animation/);ENq ? "Anime Movies/" : "Movies/"}{def MpJ = "TheMovieDB::TV";def sx = [[VnV: 68854, Py: "From Me to You", OWo: MpJ],[VnV: 234538, Py: "Demon Lord 2099", OWo: MpJ]];def zWt = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def ivL = zWt == "IMDb" ? "tt${id}" : id;def oAU = n;sx.each {if (it.VnV == ivL && it.OWo == zWt) {oAU = it.Py}};def ZI = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def QXT = oAU.replaceAll(ZI.collect { "\\" + it }.join('|'), '');QXT = QXT.replaceAll(/(\s|\.)*$/, '');QXT}{" ("}{y}{")"}{def zWt = id == tmdbid ? "TheMovieDB" : "IMDb";def Dx = ["TheMovieDB": "tmdbid","IMDb": "imdbid"];def tXJ = Dx[zWt];def ivL = zWt == "IMDb" ? "tt${id}" : id;" [${tXJ}-${ivL}]/"}{def dRl = ["Alqanime","BlackLuster","Kuramanime","NanDesuKa","ToonsHub","Tsundere-Raws"];def Ve = dRl.find { eW ->  fn.contains(eW) } ?: "";def FaW = any {(fn =~ /^\[(.*?)\]/)[0][1]} {Ve} {group} {""};FaW ? "[$FaW] " : ""}{def MpJ = "TheMovieDB::TV";def sx = [[VnV: 68854, Py: "From Me to You", OWo: MpJ],[VnV: 234538, Py: "Demon Lord 2099", OWo: MpJ]];def zWt = any { info.database } { id == tmdbid ? "TheMovieDB" : "IMDb" };def ivL = zWt == "IMDb" ? "tt${id}" : id;def oAU = n;sx.each {if (it.VnV == ivL && it.OWo == zWt) {oAU = it.Py}};def ZI = ['\\', '/', ':', '*', '?', '"', '<', '>', '|'];def QXT = oAU.replaceAll(ZI.collect { "\\" + it }.join('|'), '');QXT = QXT.replaceAll(/(\s|\.)*$/, '');QXT}{" ("}{y}{")"}{" ["}{def Ez = [["ABEMA"],["ADN"],["BILI", "B-Global", "BiliIntl", "B-Site", "BiliCN"],["COOLMIC"],["HIDIVE", "HIDI.WEB-DL"],["IQIYI", "IQ.WEB-DL"],["JFFP"],["LAFTEL", "LFTL"],["MDON", "MANGADON"],["MW.WEB-DL"],["NF.WEB-DL", "NF WEB"],["SHAHID"],["TVER"],["UNEXT"],["WETV"],["YT.WEB-DL", "YOUTUBE", "YTB"]];def dX = ["ASW", "Judas", "JRx7", "EMBER", "KawaSubs", "GuodongSubs"];def LQm = ["Erai-raws", "SubsPlease"];def QI = any {(fn =~ /^\[(.*?)\]/)[0][1]} {""};def jC = any {def ilm = Ez.find { lf ->  lf.find { lS ->  fn.lower().contains(lS.lower()) } }[0];ilm = ilm.replace(".WEB-DL", "");ilm ? "${ilm}.WEB-DL" : ""} {} {source} {dX.find { ffW ->  group == ffW || QI == ffW } ? "WEBRip" : ""} {def fm = LQm.find { Tn ->  group == Tn || QI == Tn} ? "WEB-DL" : "";(source == "Erai-raws" && vcf.upper() == "HEVC") ? "WEBRip" : fm} {vs} {""};jC ? "$jC " : ""}{def Kg = bitdepth ? " ${bitdepth}bit" : "";"$resolution $vcf $Kg, $ac"}{" "}{af.format(8: 'DD+ 7.1',7: '6.1',6: 'DD 5.1',5: '5.0',3: '2.1',2: '2.0',1: '1.0')}{def ak = " Dub";def Fv = audioLanguages.any { it.ISO3B == language.ISO3B } ? "" : ak;Fv = audioLanguages.size() == 1 && audioLanguages.any { it.ISO3B == "und" } ? "" : Fv;Fv}{def Qsk = any { audioLanguages.size() } { 0 };def Fv = Qsk > 2 ? " MAud" : Qsk > 1 ? " DAud" : null;def zPm = Qsk > 5 ? audioLanguages.take(5) : audioLanguages;Fv ? Fv + zPm.joining(" ", " (", "").upper() + (Qsk > 5 ? " ...)" : ")") : ""}{def Ru = any { textLanguages.size() } { 0 };def Fv = Ru > 2 ? ", MSub" : Ru > 1 ? ", DSub" : null;def zPm = Ru > 5 ? textLanguages.take(5) : textLanguages;Fv ? Fv + zPm.joining(" ", " (", "").upper() + (Ru > 5 ? " ...)" : ")") : ""}{"]["}{crc32.upper()}{"]"}{if (f.subtitle) {def LU = ["name": "." + lang.name,"iso3b": "." + lang.ISO3B,"iso3": "." +lang.ISO3,"iso2": "." + lang.ISO2];def Eps = subt;LU.values().each { AN -> if (Eps.contains(AN)) {Eps = Eps.replace(AN, "")}};LU.iso3b + Eps}}{f.image ? "-thumb" : ""}