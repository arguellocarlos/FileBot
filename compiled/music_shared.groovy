{def JMI = { System.getProperty(it) };def a_y = JMI("os.name").toLowerCase().contains("windows");def Po = JMI("user.name");def kS = "/run/media/${Po}";def Pp = a_y ? "H:/" : "$kS/Videos";def oGo = [[EPY: "Books", OV: "F:/", Ys: "$kS/Books"],[EPY: "Data", OV: "D:/", Ys: "$kS/Data"],[EPY: "Games", OV: "G:/", Ys: "$kS/Games"],[EPY: "Music", OV: "E:/", Ys: "$kS/Music"],[EPY: "Videos", OV: "H:/", Ys: "$kS/Videos"]];def FCg = (oGo.collect { it[a_y ? "OV" : "Ys"] as File }.sort { Ll, Yx ->  Ll.exists() <=> Yx.exists() ?: Ll.diskSpace <=> Yx.diskSpace }).last();def TN = Pp ?: FCg;"$TN/"}{"Torrent Uploads/"}{ext.upper()}{"/"}{y}{"/["}{d.format("yyyy.MM.dd")}{"] "}{album}{" - "}{n}{" ["}{ext.upper()}{ext == "flac" ? " " + "${ bitdepth > 16 ? bitdepth + '-' : ''}" + khz : ext == "mp3" && media.get("OverallBitRate/String") != "320 kbps" ? " V0" : ""}{"]"}{media.CATALOGNUMBER ? "[" + media.CATALOGNUMBER + "]" : ""}{"/"}{dc > 1 ? "Disc " + di + "/" : ""}{dc? di + "-": ""}{pi.pad(2)}{" "}{t}