{def FS = { System.getProperty(it) };def cV = FS("os.name").toLowerCase().contains("windows");def fAK = FS("user.name");def uB = "/run/media/${fAK}";def ZD = cV ? "H:/" : "$uB/Videos";def BV = [[Zcl: "Books", cO: "F:/", t_: "$uB/Books"],[Zcl: "Data", cO: "D:/", t_: "$uB/Data"],[Zcl: "Games", cO: "G:/", t_: "$uB/Games"],[Zcl: "Music", cO: "E:/", t_: "$uB/Music"],[Zcl: "Videos", cO: "H:/", t_: "$uB/Videos"]];def Vp = (BV.collect { it[cV ? "cO" : "t_"] as File }.sort { tLe, kV ->  tLe.exists() <=> kV.exists() ?: tLe.diskSpace <=> kV.diskSpace }).last();def Ue = ZD ?: Vp;"$Ue/"}{"Torrent Uploads/"}{ext.upper()}{"/"}{y}{"/["}{d.format("yyyy.MM.dd")}{"] "}{album}{" - "}{n}{" ["}{ext.upper()}{ext == "flac" ? " " + "${ bitdepth > 16 ? bitdepth + '-' : ''}" + khz : ext == "mp3" && media.get("OverallBitRate/String") != "320 kbps" ? " V0" : ""}{"]"}{media.CATALOGNUMBER ? "[" + media.CATALOGNUMBER + "]" : ""}{"/"}{dc > 1 ? "Disc " + di + "/" : ""}{dc? di + "-": ""}{pi.pad(2)}{" "}{t}