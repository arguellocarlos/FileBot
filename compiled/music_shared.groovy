{def Xzb = { System.getProperty(it) };def mp = Xzb("os.name").toLowerCase().contains("windows");def Qw = Xzb("user.name");def eGr = "/run/media/${Qw}";def KB = mp ? "H:/" : "$eGr/Videos";def bRY = [[Vw: "Books", hXT: "F:/", un: "$eGr/Books"],[Vw: "Data", hXT: "D:/", un: "$eGr/Data"],[Vw: "Games", hXT: "G:/", un: "$eGr/Games"],[Vw: "Music", hXT: "E:/", un: "$eGr/Music"],[Vw: "Videos", hXT: "H:/", un: "$eGr/Videos"]];def lt = (bRY.collect { it[mp ? "hXT" : "un"] as File }.sort { Rp, lz ->  Rp.exists() <=> lz.exists() ?: Rp.diskSpace <=> lz.diskSpace }).last();def Ai = KB ?: lt;"$Ai/"}{"Torrent Uploads/"}{ext.upper()}{"/"}{y}{"/["}{d.format("yyyy.MM.dd")}{"] "}{album}{" - "}{n}{" ["}{ext.upper()}{ext == "flac" ? " " + "${ bitdepth > 16 ? bitdepth + '-' : ''}" + khz : ext == "mp3" && media.get("OverallBitRate/String") != "320 kbps" ? " V0" : ""}{"]"}{media.CATALOGNUMBER ? "[" + media.CATALOGNUMBER + "]" : ""}{"/"}{dc > 1 ? "Disc " + di + "/" : ""}{dc? di + "-": ""}{pi.pad(2)}{" "}{t}