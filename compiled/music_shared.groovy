{def gm = { System.getProperty(it) };def tHm = gm("os.name").toLowerCase().contains("windows");def dZi = gm("user.name");def Ut = "/run/media/${dZi}";def Ah = tHm ? "H:/" : "$Ut/Videos";def zUe = [[PS: "Books", vbu: "F:/", cau: "$Ut/Books"],[PS: "Data", vbu: "D:/", cau: "$Ut/Data"],[PS: "Games", vbu: "G:/", cau: "$Ut/Games"],[PS: "Music", vbu: "E:/", cau: "$Ut/Music"],[PS: "Videos", vbu: "H:/", cau: "$Ut/Videos"]];def lc = (zUe.collect { it[tHm ? "vbu" : "cau"] as File }.sort { Fen, SEl ->  Fen.exists() <=> SEl.exists() ?: Fen.diskSpace <=> SEl.diskSpace }).last();def Mqw = Ah ?: lc;"$Mqw/"}{"Torrent Uploads/"}{ext.upper()}{"/"}{y}{"/["}{d.format("yyyy.MM.dd")}{"] "}{album}{" - "}{n}{" ["}{ext.upper()}{ext == "flac" ? " " + "${ bitdepth > 16 ? bitdepth + '-' : ''}" + khz : ext == "mp3" && media.get("OverallBitRate/String") != "320 kbps" ? " V0" : ""}{"]"}{media.CATALOGNUMBER ? "[" + media.CATALOGNUMBER + "]" : ""}{"/"}{dc > 1 ? "Disc " + di + "/" : ""}{dc? di + "-": ""}{pi.pad(2)}{" "}{t}