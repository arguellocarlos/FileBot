{def lQ = { System.getProperty(it) };def fW = lQ("os.name").toLowerCase().contains("windows");def xv = lQ("user.name");def tK = "/run/media/${xv}";def em = fW ? "H:/" : "$tK/Videos";def uz = [[_c: "Books", XHv: "F:/", RKA: "$tK/Books"],[_c: "Data", XHv: "D:/", RKA: "$tK/Data"],[_c: "Games", XHv: "G:/", RKA: "$tK/Games"],[_c: "Music", XHv: "E:/", RKA: "$tK/Music"],[_c: "Videos", XHv: "H:/", RKA: "$tK/Videos"]];def IWK = (uz.collect { it[fW ? "XHv" : "RKA"] as File }.sort { Ng, FLl ->  Ng.exists() <=> FLl.exists() ?: Ng.diskSpace <=> FLl.diskSpace }).last();def vlY = em ?: IWK;"$vlY/"}{"Torrent Uploads/"}{ext.upper()}{"/"}{y}{"/["}{d.format("yyyy.MM.dd")}{"] "}{album}{" - "}{n}{" ["}{ext.upper()}{ext == "flac" ? " " + "${ bitdepth > 16 ? bitdepth + '-' : ''}" + khz : ext == "mp3" && media.get("OverallBitRate/String") != "320 kbps" ? " V0" : ""}{"]"}{media.CATALOGNUMBER ? "[" + media.CATALOGNUMBER + "]" : ""}{"/"}{dc > 1 ? "Disc " + di + "/" : ""}{dc? di + "-": ""}{pi.pad(2)}{" "}{t}